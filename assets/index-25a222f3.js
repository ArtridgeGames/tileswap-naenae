var Jm=Object.defineProperty;var Zm=(t,e,n)=>e in t?Jm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var jt=(t,e,n)=>(Zm(t,typeof e!="symbol"?e+"":e,n),n),Lu=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Ai=(t,e,n)=>(Lu(t,e,"read from private field"),n?n.call(t):e.get(t)),jr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};var An=(t,e,n)=>(Lu(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function ec(t,e){const n=Object.create(null),s=t.split(",");for(let i=0;i<s.length;i++)n[s[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const ze={},Ys=[],Jt=()=>{},e0=()=>!1,t0=/^on[^a-z]/,Ko=t=>t0.test(t),tc=t=>t.startsWith("onUpdate:"),Xe=Object.assign,nc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},n0=Object.prototype.hasOwnProperty,we=(t,e)=>n0.call(t,e),Q=Array.isArray,Qs=t=>Yo(t)==="[object Map]",Qh=t=>Yo(t)==="[object Set]",oe=t=>typeof t=="function",Je=t=>typeof t=="string",sc=t=>typeof t=="symbol",He=t=>t!==null&&typeof t=="object",Xh=t=>He(t)&&oe(t.then)&&oe(t.catch),Jh=Object.prototype.toString,Yo=t=>Jh.call(t),s0=t=>Yo(t).slice(8,-1),Zh=t=>Yo(t)==="[object Object]",ic=t=>Je(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,no=ec(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},i0=/-(\w)/g,pn=Qo(t=>t.replace(i0,(e,n)=>n?n.toUpperCase():"")),r0=/\B([A-Z])/g,_i=Qo(t=>t.replace(r0,"-$1").toLowerCase()),Xo=Qo(t=>t.charAt(0).toUpperCase()+t.slice(1)),qi=Qo(t=>t?`on${Xo(t)}`:""),rr=(t,e)=>!Object.is(t,e),so=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},fo=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},cl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},o0=t=>{const e=Je(t)?Number(t):NaN;return isNaN(e)?t:e};let Nu;const ul=()=>Nu||(Nu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ht(t){if(Q(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=Je(s)?u0(s):Ht(s);if(i)for(const r in i)e[r]=i[r]}return e}else{if(Je(t))return t;if(He(t))return t}}const a0=/;(?![^(]*\))/g,l0=/:([^]+)/,c0=/\/\*[^]*?\*\//g;function u0(t){const e={};return t.replace(c0,"").split(a0).forEach(n=>{if(n){const s=n.split(l0);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ht(t){let e="";if(Je(t))e=t;else if(Q(t))for(let n=0;n<t.length;n++){const s=ht(t[n]);s&&(e+=s+" ")}else if(He(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const d0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",h0=ec(d0);function ef(t){return!!t||t===""}const re=t=>Je(t)?t:t==null?"":Q(t)||He(t)&&(t.toString===Jh||!oe(t.toString))?JSON.stringify(t,tf,2):String(t),tf=(t,e)=>e&&e.__v_isRef?tf(t,e.value):Qs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i])=>(n[`${s} =>`]=i,n),{})}:Qh(e)?{[`Set(${e.size})`]:[...e.values()]}:He(e)&&!Q(e)&&!Zh(e)?String(e):e;let Lt;class nf{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Lt,!e&&Lt&&(this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Lt;try{return Lt=this,e()}finally{Lt=n}}}on(){Lt=this}off(){Lt=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function sf(t){return new nf(t)}function f0(t,e=Lt){e&&e.active&&e.effects.push(t)}function rf(){return Lt}function p0(t){Lt&&Lt.cleanups.push(t)}const rc=t=>{const e=new Set(t);return e.w=0,e.n=0,e},of=t=>(t.w&ts)>0,af=t=>(t.n&ts)>0,m0=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ts},g0=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const i=e[s];of(i)&&!af(i)?i.delete(t):e[n++]=i,i.w&=~ts,i.n&=~ts}e.length=n}},po=new WeakMap;let Bi=0,ts=1;const dl=30;let Gt;const Ts=Symbol(""),hl=Symbol("");class oc{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,f0(this,s)}run(){if(!this.active)return this.fn();let e=Gt,n=qn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Gt,Gt=this,qn=!0,ts=1<<++Bi,Bi<=dl?m0(this):Du(this),this.fn()}finally{Bi<=dl&&g0(this),ts=1<<--Bi,Gt=this.parent,qn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Gt===this?this.deferStop=!0:this.active&&(Du(this),this.onStop&&this.onStop(),this.active=!1)}}function Du(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let qn=!0;const lf=[];function yi(){lf.push(qn),qn=!1}function vi(){const t=lf.pop();qn=t===void 0?!0:t}function Pt(t,e,n){if(qn&&Gt){let s=po.get(t);s||po.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=rc()),cf(i)}}function cf(t,e){let n=!1;Bi<=dl?af(t)||(t.n|=ts,n=!of(t)):n=!t.has(Gt),n&&(t.add(Gt),Gt.deps.push(t))}function kn(t,e,n,s,i,r){const o=po.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Q(t)){const l=Number(s);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Q(t)?ic(n)&&a.push(o.get("length")):(a.push(o.get(Ts)),Qs(t)&&a.push(o.get(hl)));break;case"delete":Q(t)||(a.push(o.get(Ts)),Qs(t)&&a.push(o.get(hl)));break;case"set":Qs(t)&&a.push(o.get(Ts));break}if(a.length===1)a[0]&&fl(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);fl(rc(l))}}function fl(t,e){const n=Q(t)?t:[...t];for(const s of n)s.computed&&$u(s);for(const s of n)s.computed||$u(s)}function $u(t,e){(t!==Gt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function _0(t,e){var n;return(n=po.get(t))==null?void 0:n.get(e)}const y0=ec("__proto__,__v_isRef,__isVue"),uf=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(sc)),v0=ac(),w0=ac(!1,!0),C0=ac(!0),Fu=b0();function b0(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=ye(this);for(let r=0,o=this.length;r<o;r++)Pt(s,"get",r+"");const i=s[e](...n);return i===-1||i===!1?s[e](...n.map(ye)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){yi();const s=ye(this)[e].apply(this,n);return vi(),s}}),t}function E0(t){const e=ye(this);return Pt(e,"has",t),e.hasOwnProperty(t)}function ac(t=!1,e=!1){return function(s,i,r){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&r===(t?e?U0:mf:e?pf:ff).get(s))return s;const o=Q(s);if(!t){if(o&&we(Fu,i))return Reflect.get(Fu,i,r);if(i==="hasOwnProperty")return E0}const a=Reflect.get(s,i,r);return(sc(i)?uf.has(i):y0(i))||(t||Pt(s,"get",i),e)?a:Ye(a)?o&&ic(i)?a:a.value:He(a)?t?_f(a):Mr(a):a}}const T0=df(),k0=df(!0);function df(t=!1){return function(n,s,i,r){let o=n[s];if(ri(o)&&Ye(o)&&!Ye(i))return!1;if(!t&&(!mo(i)&&!ri(i)&&(o=ye(o),i=ye(i)),!Q(n)&&Ye(o)&&!Ye(i)))return o.value=i,!0;const a=Q(n)&&ic(s)?Number(s)<n.length:we(n,s),l=Reflect.set(n,s,i,r);return n===ye(r)&&(a?rr(i,o)&&kn(n,"set",s,i):kn(n,"add",s,i)),l}}function I0(t,e){const n=we(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&kn(t,"delete",e,void 0),s}function S0(t,e){const n=Reflect.has(t,e);return(!sc(e)||!uf.has(e))&&Pt(t,"has",e),n}function x0(t){return Pt(t,"iterate",Q(t)?"length":Ts),Reflect.ownKeys(t)}const hf={get:v0,set:T0,deleteProperty:I0,has:S0,ownKeys:x0},P0={get:C0,set(t,e){return!0},deleteProperty(t,e){return!0}},R0=Xe({},hf,{get:w0,set:k0}),lc=t=>t,Jo=t=>Reflect.getPrototypeOf(t);function qr(t,e,n=!1,s=!1){t=t.__v_raw;const i=ye(t),r=ye(e);n||(e!==r&&Pt(i,"get",e),Pt(i,"get",r));const{has:o}=Jo(i),a=s?lc:n?dc:or;if(o.call(i,e))return a(t.get(e));if(o.call(i,r))return a(t.get(r));t!==i&&t.get(e)}function Gr(t,e=!1){const n=this.__v_raw,s=ye(n),i=ye(t);return e||(t!==i&&Pt(s,"has",t),Pt(s,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Kr(t,e=!1){return t=t.__v_raw,!e&&Pt(ye(t),"iterate",Ts),Reflect.get(t,"size",t)}function Uu(t){t=ye(t);const e=ye(this);return Jo(e).has.call(e,t)||(e.add(t),kn(e,"add",t,t)),this}function Vu(t,e){e=ye(e);const n=ye(this),{has:s,get:i}=Jo(n);let r=s.call(n,t);r||(t=ye(t),r=s.call(n,t));const o=i.call(n,t);return n.set(t,e),r?rr(e,o)&&kn(n,"set",t,e):kn(n,"add",t,e),this}function Bu(t){const e=ye(this),{has:n,get:s}=Jo(e);let i=n.call(e,t);i||(t=ye(t),i=n.call(e,t)),s&&s.call(e,t);const r=e.delete(t);return i&&kn(e,"delete",t,void 0),r}function zu(){const t=ye(this),e=t.size!==0,n=t.clear();return e&&kn(t,"clear",void 0,void 0),n}function Yr(t,e){return function(s,i){const r=this,o=r.__v_raw,a=ye(o),l=e?lc:t?dc:or;return!t&&Pt(a,"iterate",Ts),o.forEach((c,u)=>s.call(i,l(c),l(u),r))}}function Qr(t,e,n){return function(...s){const i=this.__v_raw,r=ye(i),o=Qs(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...s),u=n?lc:e?dc:or;return!e&&Pt(r,"iterate",l?hl:Ts),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function On(t){return function(...e){return t==="delete"?!1:this}}function M0(){const t={get(r){return qr(this,r)},get size(){return Kr(this)},has:Gr,add:Uu,set:Vu,delete:Bu,clear:zu,forEach:Yr(!1,!1)},e={get(r){return qr(this,r,!1,!0)},get size(){return Kr(this)},has:Gr,add:Uu,set:Vu,delete:Bu,clear:zu,forEach:Yr(!1,!0)},n={get(r){return qr(this,r,!0)},get size(){return Kr(this,!0)},has(r){return Gr.call(this,r,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:Yr(!0,!1)},s={get(r){return qr(this,r,!0,!0)},get size(){return Kr(this,!0)},has(r){return Gr.call(this,r,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:Yr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Qr(r,!1,!1),n[r]=Qr(r,!0,!1),e[r]=Qr(r,!1,!0),s[r]=Qr(r,!0,!0)}),[t,n,e,s]}const[A0,O0,L0,N0]=M0();function cc(t,e){const n=e?t?N0:L0:t?O0:A0;return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(we(n,i)&&i in s?n:s,i,r)}const D0={get:cc(!1,!1)},$0={get:cc(!1,!0)},F0={get:cc(!0,!1)},ff=new WeakMap,pf=new WeakMap,mf=new WeakMap,U0=new WeakMap;function V0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function B0(t){return t.__v_skip||!Object.isExtensible(t)?0:V0(s0(t))}function Mr(t){return ri(t)?t:uc(t,!1,hf,D0,ff)}function gf(t){return uc(t,!1,R0,$0,pf)}function _f(t){return uc(t,!0,P0,F0,mf)}function uc(t,e,n,s,i){if(!He(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=B0(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return i.set(t,a),a}function Gn(t){return ri(t)?Gn(t.__v_raw):!!(t&&t.__v_isReactive)}function ri(t){return!!(t&&t.__v_isReadonly)}function mo(t){return!!(t&&t.__v_isShallow)}function yf(t){return Gn(t)||ri(t)}function ye(t){const e=t&&t.__v_raw;return e?ye(e):t}function Zo(t){return fo(t,"__v_skip",!0),t}const or=t=>He(t)?Mr(t):t,dc=t=>He(t)?_f(t):t;function vf(t){qn&&Gt&&(t=ye(t),cf(t.dep||(t.dep=rc())))}function wf(t,e){t=ye(t);const n=t.dep;n&&fl(n)}function Ye(t){return!!(t&&t.__v_isRef===!0)}function Re(t){return Cf(t,!1)}function z0(t){return Cf(t,!0)}function Cf(t,e){return Ye(t)?t:new H0(t,e)}class H0{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:ye(e),this._value=n?e:or(e)}get value(){return vf(this),this._value}set value(e){const n=this.__v_isShallow||mo(e)||ri(e);e=n?e:ye(e),rr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:or(e),wf(this))}}function me(t){return Ye(t)?t.value:t}const W0={get:(t,e,n)=>me(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return Ye(i)&&!Ye(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function bf(t){return Gn(t)?t:new Proxy(t,W0)}function j0(t){const e=Q(t)?new Array(t.length):{};for(const n in t)e[n]=G0(t,n);return e}class q0{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return _0(ye(this._object),this._key)}}function G0(t,e,n){const s=t[e];return Ye(s)?s:new q0(t,e,n)}class K0{constructor(e,n,s,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new oc(e,()=>{this._dirty||(this._dirty=!0,wf(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const e=ye(this);return vf(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Y0(t,e,n=!1){let s,i;const r=oe(t);return r?(s=t,i=Jt):(s=t.get,i=t.set),new K0(s,i,r||!i,n)}function Kn(t,e,n,s){let i;try{i=s?t(...s):t()}catch(r){ea(r,e,n)}return i}function Bt(t,e,n,s){if(oe(t)){const r=Kn(t,e,n,s);return r&&Xh(r)&&r.catch(o=>{ea(o,e,n)}),r}const i=[];for(let r=0;r<t.length;r++)i.push(Bt(t[r],e,n,s));return i}function ea(t,e,n,s=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=n;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Kn(l,null,10,[t,o,a]);return}}Q0(t,n,i,s)}function Q0(t,e,n,s=!0){console.error(t)}let ar=!1,pl=!1;const yt=[];let un=0;const Xs=[];let yn=null,ms=0;const Ef=Promise.resolve();let hc=null;function fc(t){const e=hc||Ef;return t?e.then(this?t.bind(this):t):e}function X0(t){let e=un+1,n=yt.length;for(;e<n;){const s=e+n>>>1;lr(yt[s])<t?e=s+1:n=s}return e}function pc(t){(!yt.length||!yt.includes(t,ar&&t.allowRecurse?un+1:un))&&(t.id==null?yt.push(t):yt.splice(X0(t.id),0,t),Tf())}function Tf(){!ar&&!pl&&(pl=!0,hc=Ef.then(If))}function J0(t){const e=yt.indexOf(t);e>un&&yt.splice(e,1)}function Z0(t){Q(t)?Xs.push(...t):(!yn||!yn.includes(t,t.allowRecurse?ms+1:ms))&&Xs.push(t),Tf()}function Hu(t,e=ar?un+1:0){for(;e<yt.length;e++){const n=yt[e];n&&n.pre&&(yt.splice(e,1),e--,n())}}function kf(t){if(Xs.length){const e=[...new Set(Xs)];if(Xs.length=0,yn){yn.push(...e);return}for(yn=e,yn.sort((n,s)=>lr(n)-lr(s)),ms=0;ms<yn.length;ms++)yn[ms]();yn=null,ms=0}}const lr=t=>t.id==null?1/0:t.id,eg=(t,e)=>{const n=lr(t)-lr(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function If(t){pl=!1,ar=!0,yt.sort(eg);const e=Jt;try{for(un=0;un<yt.length;un++){const n=yt[un];n&&n.active!==!1&&Kn(n,null,14)}}finally{un=0,yt.length=0,kf(),ar=!1,hc=null,(yt.length||Xs.length)&&If()}}function tg(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ze;let i=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=s[u]||ze;h&&(i=n.map(m=>Je(m)?m.trim():m)),d&&(i=n.map(cl))}let a,l=s[a=qi(e)]||s[a=qi(pn(e))];!l&&r&&(l=s[a=qi(_i(e))]),l&&Bt(l,t,6,i);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Bt(c,t,6,i)}}function Sf(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!oe(t)){const l=c=>{const u=Sf(c,e,!0);u&&(a=!0,Xe(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(He(t)&&s.set(t,null),null):(Q(r)?r.forEach(l=>o[l]=null):Xe(o,r),He(t)&&s.set(t,o),o)}function ta(t,e){return!t||!Ko(e)?!1:(e=e.slice(2).replace(/Once$/,""),we(t,e[0].toLowerCase()+e.slice(1))||we(t,_i(e))||we(t,e))}let dt=null,na=null;function go(t){const e=dt;return dt=t,na=t&&t.type.__scopeId||null,e}function Ft(t){na=t}function Ut(){na=null}function Me(t,e=dt,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&td(-1);const r=go(e);let o;try{o=t(...i)}finally{go(r),s._d&&td(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ma(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:m,ctx:g,inheritAttrs:w}=t;let M,P;const L=go(t);try{if(n.shapeFlag&4){const $=i||s;M=cn(u.call($,$,d,r,m,h,g)),P=l}else{const $=e;M=cn($.length>1?$(r,{attrs:l,slots:a,emit:c}):$(r,null)),P=e.props?l:ng(l)}}catch($){Yi.length=0,ea($,t,1),M=E(zt)}let z=M;if(P&&w!==!1){const $=Object.keys(P),{shapeFlag:se}=z;$.length&&se&7&&(o&&$.some(tc)&&(P=sg(P,o)),z=ns(z,P))}return n.dirs&&(z=ns(z),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&(z.transition=n.transition),M=z,go(L),M}const ng=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ko(n))&&((e||(e={}))[n]=t[n]);return e},sg=(t,e)=>{const n={};for(const s in t)(!tc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function ig(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Wu(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==s[h]&&!ta(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Wu(s,o,c):!0:!!o;return!1}function Wu(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!ta(n,r))return!0}return!1}function rg({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const og=t=>t.__isSuspense;function ag(t,e){e&&e.pendingBranch?Q(t)?e.effects.push(...t):e.effects.push(t):Z0(t)}function lg(t,e){return mc(t,null,{flush:"post"})}const Xr={};function En(t,e,n){return mc(t,e,n)}function mc(t,e,{immediate:n,deep:s,flush:i,onTrack:r,onTrigger:o}=ze){var a;const l=rf()===((a=it)==null?void 0:a.scope)?it:null;let c,u=!1,d=!1;if(Ye(t)?(c=()=>t.value,u=mo(t)):Gn(t)?(c=()=>t,s=!0):Q(t)?(d=!0,u=t.some($=>Gn($)||mo($)),c=()=>t.map($=>{if(Ye($))return $.value;if(Gn($))return ys($);if(oe($))return Kn($,l,2)})):oe(t)?e?c=()=>Kn(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),Bt(t,l,3,[m])}:c=Jt,e&&s){const $=c;c=()=>ys($())}let h,m=$=>{h=L.onStop=()=>{Kn($,l,4)}},g;if(mr)if(m=Jt,e?n&&Bt(e,l,3,[c(),d?[]:void 0,m]):c(),i==="sync"){const $=e_();g=$.__watcherHandles||($.__watcherHandles=[])}else return Jt;let w=d?new Array(t.length).fill(Xr):Xr;const M=()=>{if(L.active)if(e){const $=L.run();(s||u||(d?$.some((se,ve)=>rr(se,w[ve])):rr($,w)))&&(h&&h(),Bt(e,l,3,[$,w===Xr?void 0:d&&w[0]===Xr?[]:w,m]),w=$)}else L.run()};M.allowRecurse=!!e;let P;i==="sync"?P=M:i==="post"?P=()=>It(M,l&&l.suspense):(M.pre=!0,l&&(M.id=l.uid),P=()=>pc(M));const L=new oc(c,P);e?n?M():w=L.run():i==="post"?It(L.run.bind(L),l&&l.suspense):L.run();const z=()=>{L.stop(),l&&l.scope&&nc(l.scope.effects,L)};return g&&g.push(z),z}function cg(t,e,n){const s=this.proxy,i=Je(t)?t.includes(".")?xf(s,t):()=>s[t]:t.bind(s,s);let r;oe(e)?r=e:(r=e.handler,n=e);const o=it;oi(this);const a=mc(i,r.bind(s),n);return o?oi(o):ks(),a}function xf(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function ys(t,e){if(!He(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ye(t))ys(t.value,e);else if(Q(t))for(let n=0;n<t.length;n++)ys(t[n],e);else if(Qh(t)||Qs(t))t.forEach(n=>{ys(n,e)});else if(Zh(t))for(const n in t)ys(t[n],e);return t}function xs(t,e){const n=dt;if(n===null)return t;const s=la(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[o,a,l,c=ze]=e[r];o&&(oe(o)&&(o={mounted:o,updated:o}),o.deep&&ys(a),i.push({dir:o,instance:s,value:a,oldValue:void 0,arg:l,modifiers:c}))}return t}function cs(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(yi(),Bt(l,n,8,[t.el,a,t,e]),vi())}}function Pf(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return dr(()=>{t.isMounted=!0}),Nf(()=>{t.isUnmounting=!0}),t}const Vt=[Function,Array],Rf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vt,onEnter:Vt,onAfterEnter:Vt,onEnterCancelled:Vt,onBeforeLeave:Vt,onLeave:Vt,onAfterLeave:Vt,onLeaveCancelled:Vt,onBeforeAppear:Vt,onAppear:Vt,onAfterAppear:Vt,onAppearCancelled:Vt},ug={name:"BaseTransition",props:Rf,setup(t,{slots:e}){const n=bc(),s=Pf();let i;return()=>{const r=e.default&&gc(e.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const w of r)if(w.type!==zt){o=w;break}}const a=ye(t),{mode:l}=a;if(s.isLeaving)return Aa(o);const c=ju(o);if(!c)return Aa(o);const u=cr(c,a,s,n);ur(c,u);const d=n.subTree,h=d&&ju(d);let m=!1;const{getTransitionKey:g}=c.type;if(g){const w=g();i===void 0?i=w:w!==i&&(i=w,m=!0)}if(h&&h.type!==zt&&(!gs(c,h)||m)){const w=cr(h,a,s,n);if(ur(h,w),l==="out-in")return s.isLeaving=!0,w.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&n.update()},Aa(o);l==="in-out"&&c.type!==zt&&(w.delayLeave=(M,P,L)=>{const z=Mf(s,h);z[String(h.key)]=h,M._leaveCb=()=>{P(),M._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=L})}return o}}},dg=ug;function Mf(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function cr(t,e,n,s){const{appear:i,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:w,onAppear:M,onAfterAppear:P,onAppearCancelled:L}=e,z=String(t.key),$=Mf(n,t),se=(R,U)=>{R&&Bt(R,s,9,U)},ve=(R,U)=>{const G=U[1];se(R,U),Q(R)?R.every(fe=>fe.length<=1)&&G():R.length<=1&&G()},q={mode:r,persisted:o,beforeEnter(R){let U=a;if(!n.isMounted)if(i)U=w||a;else return;R._leaveCb&&R._leaveCb(!0);const G=$[z];G&&gs(t,G)&&G.el._leaveCb&&G.el._leaveCb(),se(U,[R])},enter(R){let U=l,G=c,fe=u;if(!n.isMounted)if(i)U=M||l,G=P||c,fe=L||u;else return;let I=!1;const Z=R._enterCb=qe=>{I||(I=!0,qe?se(fe,[R]):se(G,[R]),q.delayedLeave&&q.delayedLeave(),R._enterCb=void 0)};U?ve(U,[R,Z]):Z()},leave(R,U){const G=String(t.key);if(R._enterCb&&R._enterCb(!0),n.isUnmounting)return U();se(d,[R]);let fe=!1;const I=R._leaveCb=Z=>{fe||(fe=!0,U(),Z?se(g,[R]):se(m,[R]),R._leaveCb=void 0,$[G]===t&&delete $[G])};$[G]=t,h?ve(h,[R,I]):I()},clone(R){return cr(R,e,n,s)}};return q}function Aa(t){if(sa(t))return t=ns(t),t.children=null,t}function ju(t){return sa(t)?t.children?t.children[0]:void 0:t}function ur(t,e){t.shapeFlag&6&&t.component?ur(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gc(t,e=!1,n){let s=[],i=0;for(let r=0;r<t.length;r++){let o=t[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===_e?(o.patchFlag&128&&i++,s=s.concat(gc(o.children,e,a))):(e||o.type!==zt)&&s.push(a!=null?ns(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function Af(t,e){return oe(t)?(()=>Xe({name:t.name},e,{setup:t}))():t}const Gi=t=>!!t.type.__asyncLoader,sa=t=>t.type.__isKeepAlive;function hg(t,e){Of(t,"a",e)}function fg(t,e){Of(t,"da",e)}function Of(t,e,n=it){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(ia(e,s,n),n){let i=n.parent;for(;i&&i.parent;)sa(i.parent.vnode)&&pg(s,e,n,i),i=i.parent}}function pg(t,e,n,s){const i=ia(e,t,s,!0);hr(()=>{nc(s[e],i)},n)}function ia(t,e,n=it,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;yi(),oi(n);const a=Bt(e,n,t,o);return ks(),vi(),a});return s?i.unshift(r):i.push(r),r}}const Pn=t=>(e,n=it)=>(!mr||t==="sp")&&ia(t,(...s)=>e(...s),n),mg=Pn("bm"),dr=Pn("m"),gg=Pn("bu"),Lf=Pn("u"),Nf=Pn("bum"),hr=Pn("um"),_g=Pn("sp"),yg=Pn("rtg"),vg=Pn("rtc");function wg(t,e=it){ia("ec",t,e)}const _c="components";function Cg(t,e){return $f(_c,t,!0,e)||t}const Df=Symbol.for("v-ndc");function ra(t){return Je(t)?$f(_c,t,!1)||t:t||Df}function $f(t,e,n=!0,s=!1){const i=dt||it;if(i){const r=i.type;if(t===_c){const a=Xg(r,!1);if(a&&(a===e||a===pn(e)||a===Xo(pn(e))))return r}const o=qu(i[t]||r[t],e)||qu(i.appContext[t],e);return!o&&s?r:o}}function qu(t,e){return t&&(t[e]||t[pn(e)]||t[Xo(pn(e))])}function Qe(t,e,n,s){let i;const r=n&&n[s];if(Q(t)||Je(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,r&&r[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,r&&r[o])}else if(He(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,r&&r[a])}}else i=[];return n&&(n[s]=i),i}function bg(t,e,n={},s,i){if(dt.isCE||dt.parent&&Gi(dt.parent)&&dt.parent.isCE)return e!=="default"&&(n.name=e),E("slot",n,s&&s());let r=t[e];r&&r._c&&(r._d=!1),v();const o=r&&Ff(r(n)),a=Pe(_e,{key:n.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Ff(t){return t.some(e=>yo(e)?!(e.type===zt||e.type===_e&&!Ff(e.children)):!0)?t:null}const ml=t=>t?Yf(t)?la(t)||t.proxy:ml(t.parent):null,Ki=Xe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ml(t.parent),$root:t=>ml(t.root),$emit:t=>t.emit,$options:t=>yc(t),$forceUpdate:t=>t.f||(t.f=()=>pc(t.update)),$nextTick:t=>t.n||(t.n=fc.bind(t.proxy)),$watch:t=>cg.bind(t)}),Oa=(t,e)=>t!==ze&&!t.__isScriptSetup&&we(t,e),Eg={get({_:t},e){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Oa(s,e))return o[e]=1,s[e];if(i!==ze&&we(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&we(c,e))return o[e]=3,r[e];if(n!==ze&&we(n,e))return o[e]=4,n[e];gl&&(o[e]=0)}}const u=Ki[e];let d,h;if(u)return e==="$attrs"&&Pt(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==ze&&we(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,we(h,e))return h[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Oa(i,e)?(i[e]=n,!0):s!==ze&&we(s,e)?(s[e]=n,!0):we(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||t!==ze&&we(t,o)||Oa(e,o)||(a=r[0])&&we(a,o)||we(s,o)||we(Ki,o)||we(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:we(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gu(t){return Q(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let gl=!0;function Tg(t){const e=yc(t),n=t.proxy,s=t.ctx;gl=!1,e.beforeCreate&&Ku(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:m,updated:g,activated:w,deactivated:M,beforeDestroy:P,beforeUnmount:L,destroyed:z,unmounted:$,render:se,renderTracked:ve,renderTriggered:q,errorCaptured:R,serverPrefetch:U,expose:G,inheritAttrs:fe,components:I,directives:Z,filters:qe}=e;if(c&&kg(c,s,null),o)for(const Te in o){const Ce=o[Te];oe(Ce)&&(s[Te]=Ce.bind(n))}if(i){const Te=i.call(n,n);He(Te)&&(t.data=Mr(Te))}if(gl=!0,r)for(const Te in r){const Ce=r[Te],At=oe(Ce)?Ce.bind(n,n):oe(Ce.get)?Ce.get.bind(n,n):Jt,$e=!oe(Ce)&&oe(Ce.set)?Ce.set.bind(n):Jt,Fe=Ne({get:At,set:$e});Object.defineProperty(s,Te,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:Ue=>Fe.value=Ue})}if(a)for(const Te in a)Uf(a[Te],s,n,Te);if(l){const Te=oe(l)?l.call(n):l;Reflect.ownKeys(Te).forEach(Ce=>{io(Ce,Te[Ce])})}u&&Ku(u,t,"c");function ce(Te,Ce){Q(Ce)?Ce.forEach(At=>Te(At.bind(n))):Ce&&Te(Ce.bind(n))}if(ce(mg,d),ce(dr,h),ce(gg,m),ce(Lf,g),ce(hg,w),ce(fg,M),ce(wg,R),ce(vg,ve),ce(yg,q),ce(Nf,L),ce(hr,$),ce(_g,U),Q(G))if(G.length){const Te=t.exposed||(t.exposed={});G.forEach(Ce=>{Object.defineProperty(Te,Ce,{get:()=>n[Ce],set:At=>n[Ce]=At})})}else t.exposed||(t.exposed={});se&&t.render===Jt&&(t.render=se),fe!=null&&(t.inheritAttrs=fe),I&&(t.components=I),Z&&(t.directives=Z)}function kg(t,e,n=Jt){Q(t)&&(t=_l(t));for(const s in t){const i=t[s];let r;He(i)?"default"in i?r=dn(i.from||s,i.default,!0):r=dn(i.from||s):r=dn(i),Ye(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function Ku(t,e,n){Bt(Q(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Uf(t,e,n,s){const i=s.includes(".")?xf(n,s):()=>n[s];if(Je(t)){const r=e[t];oe(r)&&En(i,r)}else if(oe(t))En(i,t.bind(n));else if(He(t))if(Q(t))t.forEach(r=>Uf(r,e,n,s));else{const r=oe(t.handler)?t.handler.bind(n):e[t.handler];oe(r)&&En(i,r,t)}}function yc(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!n&&!s?l=e:(l={},i.length&&i.forEach(c=>_o(l,c,o,!0)),_o(l,e,o)),He(e)&&r.set(e,l),l}function _o(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&_o(t,r,n,!0),i&&i.forEach(o=>_o(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Ig[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Ig={data:Yu,props:Qu,emits:Qu,methods:zi,computed:zi,beforeCreate:bt,created:bt,beforeMount:bt,mounted:bt,beforeUpdate:bt,updated:bt,beforeDestroy:bt,beforeUnmount:bt,destroyed:bt,unmounted:bt,activated:bt,deactivated:bt,errorCaptured:bt,serverPrefetch:bt,components:zi,directives:zi,watch:xg,provide:Yu,inject:Sg};function Yu(t,e){return e?t?function(){return Xe(oe(t)?t.call(this,this):t,oe(e)?e.call(this,this):e)}:e:t}function Sg(t,e){return zi(_l(t),_l(e))}function _l(t){if(Q(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function bt(t,e){return t?[...new Set([].concat(t,e))]:e}function zi(t,e){return t?Xe(Object.create(null),t,e):e}function Qu(t,e){return t?Q(t)&&Q(e)?[...new Set([...t,...e])]:Xe(Object.create(null),Gu(t),Gu(e??{})):e}function xg(t,e){if(!t)return e;if(!e)return t;const n=Xe(Object.create(null),t);for(const s in e)n[s]=bt(t[s],e[s]);return n}function Vf(){return{app:null,config:{isNativeTag:e0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pg=0;function Rg(t,e){return function(s,i=null){oe(s)||(s=Xe({},s)),i!=null&&!He(i)&&(i=null);const r=Vf(),o=new Set;let a=!1;const l=r.app={_uid:Pg++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:t_,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&oe(c.install)?(o.add(c),c.install(l,...u)):oe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,d){if(!a){const h=E(s,i);return h.appContext=r,u&&e?e(h,c):t(h,c,d),a=!0,l._container=c,c.__vue_app__=l,la(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){fr=l;try{return c()}finally{fr=null}}};return l}}let fr=null;function io(t,e){if(it){let n=it.provides;const s=it.parent&&it.parent.provides;s===n&&(n=it.provides=Object.create(s)),n[t]=e}}function dn(t,e,n=!1){const s=it||dt;if(s||fr){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:fr._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&oe(e)?e.call(s&&s.proxy):e}}function Mg(){return!!(it||dt||fr)}function Ag(t,e,n,s=!1){const i={},r={};fo(r,aa,1),t.propsDefaults=Object.create(null),Bf(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:gf(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function Og(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=ye(i),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(ta(t.emitsOptions,h))continue;const m=e[h];if(l)if(we(r,h))m!==r[h]&&(r[h]=m,c=!0);else{const g=pn(h);i[g]=yl(l,a,g,m,t,!1)}else m!==r[h]&&(r[h]=m,c=!0)}}}else{Bf(t,e,i,r)&&(c=!0);let u;for(const d in a)(!e||!we(e,d)&&((u=_i(d))===d||!we(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=yl(l,a,d,void 0,t,!0)):delete i[d]);if(r!==a)for(const d in r)(!e||!we(e,d))&&(delete r[d],c=!0)}c&&kn(t,"set","$attrs")}function Bf(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(no(l))continue;const c=e[l];let u;i&&we(i,u=pn(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:ta(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=ye(n),c=a||ze;for(let u=0;u<r.length;u++){const d=r[u];n[d]=yl(i,l,d,c[d],t,!we(c,d))}}return o}function yl(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=we(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&oe(l)){const{propsDefaults:c}=i;n in c?s=c[n]:(oi(i),s=c[n]=l.call(null,e),ks())}else s=l}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===_i(n))&&(s=!0))}return s}function zf(t,e,n=!1){const s=e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let l=!1;if(!oe(t)){const u=d=>{l=!0;const[h,m]=zf(d,e,!0);Xe(o,h),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return He(t)&&s.set(t,Ys),Ys;if(Q(r))for(let u=0;u<r.length;u++){const d=pn(r[u]);Xu(d)&&(o[d]=ze)}else if(r)for(const u in r){const d=pn(u);if(Xu(d)){const h=r[u],m=o[d]=Q(h)||oe(h)?{type:h}:Xe({},h);if(m){const g=ed(Boolean,m.type),w=ed(String,m.type);m[0]=g>-1,m[1]=w<0||g<w,(g>-1||we(m,"default"))&&a.push(d)}}}const c=[o,a];return He(t)&&s.set(t,c),c}function Xu(t){return t[0]!=="$"}function Ju(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Zu(t,e){return Ju(t)===Ju(e)}function ed(t,e){return Q(e)?e.findIndex(n=>Zu(n,t)):oe(e)&&Zu(e,t)?0:-1}const Hf=t=>t[0]==="_"||t==="$stable",vc=t=>Q(t)?t.map(cn):[cn(t)],Lg=(t,e,n)=>{if(e._n)return e;const s=Me((...i)=>vc(e(...i)),n);return s._c=!1,s},Wf=(t,e,n)=>{const s=t._ctx;for(const i in t){if(Hf(i))continue;const r=t[i];if(oe(r))e[i]=Lg(i,r,s);else if(r!=null){const o=vc(r);e[i]=()=>o}}},jf=(t,e)=>{const n=vc(e);t.slots.default=()=>n},Ng=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=ye(e),fo(e,"_",n)):Wf(e,t.slots={})}else t.slots={},e&&jf(t,e);fo(t.slots,aa,1)},Dg=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=ze;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:(Xe(i,e),!n&&a===1&&delete i._):(r=!e.$stable,Wf(e,i)),o=e}else e&&(jf(t,e),o={default:1});if(r)for(const a in i)!Hf(a)&&!(a in o)&&delete i[a]};function vl(t,e,n,s,i=!1){if(Q(t)){t.forEach((h,m)=>vl(h,e&&(Q(e)?e[m]:e),n,s,i));return}if(Gi(s)&&!i)return;const r=s.shapeFlag&4?la(s.component)||s.component.proxy:s.el,o=i?null:r,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ze?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(Je(c)?(u[c]=null,we(d,c)&&(d[c]=null)):Ye(c)&&(c.value=null)),oe(l))Kn(l,a,12,[o,u]);else{const h=Je(l),m=Ye(l);if(h||m){const g=()=>{if(t.f){const w=h?we(d,l)?d[l]:u[l]:l.value;i?Q(w)&&nc(w,r):Q(w)?w.includes(r)||w.push(r):h?(u[l]=[r],we(d,l)&&(d[l]=u[l])):(l.value=[r],t.k&&(u[t.k]=l.value))}else h?(u[l]=o,we(d,l)&&(d[l]=o)):m&&(l.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,It(g,n)):g()}}}const It=ag;function $g(t){return Fg(t)}function Fg(t,e){const n=ul();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:m=Jt,insertStaticContent:g}=t,w=(f,p,_,b=null,k=null,S=null,F=!1,A=null,N=!!p.dynamicChildren)=>{if(f===p)return;f&&!gs(f,p)&&(b=T(f),Ue(f,k,S,!0),f=null),p.patchFlag===-2&&(N=!1,p.dynamicChildren=null);const{type:x,ref:W,shapeFlag:B}=p;switch(x){case oa:M(f,p,_,b);break;case zt:P(f,p,_,b);break;case ro:f==null&&L(p,_,b,F);break;case _e:I(f,p,_,b,k,S,F,A,N);break;default:B&1?se(f,p,_,b,k,S,F,A,N):B&6?Z(f,p,_,b,k,S,F,A,N):(B&64||B&128)&&x.process(f,p,_,b,k,S,F,A,N,D)}W!=null&&k&&vl(W,f&&f.ref,S,p||f,!p)},M=(f,p,_,b)=>{if(f==null)s(p.el=a(p.children),_,b);else{const k=p.el=f.el;p.children!==f.children&&c(k,p.children)}},P=(f,p,_,b)=>{f==null?s(p.el=l(p.children||""),_,b):p.el=f.el},L=(f,p,_,b)=>{[f.el,f.anchor]=g(f.children,p,_,b,f.el,f.anchor)},z=({el:f,anchor:p},_,b)=>{let k;for(;f&&f!==p;)k=h(f),s(f,_,b),f=k;s(p,_,b)},$=({el:f,anchor:p})=>{let _;for(;f&&f!==p;)_=h(f),i(f),f=_;i(p)},se=(f,p,_,b,k,S,F,A,N)=>{F=F||p.type==="svg",f==null?ve(p,_,b,k,S,F,A,N):U(f,p,k,S,F,A,N)},ve=(f,p,_,b,k,S,F,A)=>{let N,x;const{type:W,props:B,shapeFlag:j,transition:ie,dirs:pe}=f;if(N=f.el=o(f.type,S,B&&B.is,B),j&8?u(N,f.children):j&16&&R(f.children,N,null,b,k,S&&W!=="foreignObject",F,A),pe&&cs(f,null,b,"created"),q(N,f,f.scopeId,F,b),B){for(const Se in B)Se!=="value"&&!no(Se)&&r(N,Se,null,B[Se],S,f.children,b,k,Ke);"value"in B&&r(N,"value",null,B.value),(x=B.onVnodeBeforeMount)&&on(x,b,f)}pe&&cs(f,null,b,"beforeMount");const Oe=(!k||k&&!k.pendingBranch)&&ie&&!ie.persisted;Oe&&ie.beforeEnter(N),s(N,p,_),((x=B&&B.onVnodeMounted)||Oe||pe)&&It(()=>{x&&on(x,b,f),Oe&&ie.enter(N),pe&&cs(f,null,b,"mounted")},k)},q=(f,p,_,b,k)=>{if(_&&m(f,_),b)for(let S=0;S<b.length;S++)m(f,b[S]);if(k){let S=k.subTree;if(p===S){const F=k.vnode;q(f,F,F.scopeId,F.slotScopeIds,k.parent)}}},R=(f,p,_,b,k,S,F,A,N=0)=>{for(let x=N;x<f.length;x++){const W=f[x]=A?Vn(f[x]):cn(f[x]);w(null,W,p,_,b,k,S,F,A)}},U=(f,p,_,b,k,S,F)=>{const A=p.el=f.el;let{patchFlag:N,dynamicChildren:x,dirs:W}=p;N|=f.patchFlag&16;const B=f.props||ze,j=p.props||ze;let ie;_&&us(_,!1),(ie=j.onVnodeBeforeUpdate)&&on(ie,_,p,f),W&&cs(p,f,_,"beforeUpdate"),_&&us(_,!0);const pe=k&&p.type!=="foreignObject";if(x?G(f.dynamicChildren,x,A,_,b,pe,S):F||Ce(f,p,A,null,_,b,pe,S,!1),N>0){if(N&16)fe(A,p,B,j,_,b,k);else if(N&2&&B.class!==j.class&&r(A,"class",null,j.class,k),N&4&&r(A,"style",B.style,j.style,k),N&8){const Oe=p.dynamicProps;for(let Se=0;Se<Oe.length;Se++){const Ze=Oe[Se],Wt=B[Ze],Fs=j[Ze];(Fs!==Wt||Ze==="value")&&r(A,Ze,Wt,Fs,k,f.children,_,b,Ke)}}N&1&&f.children!==p.children&&u(A,p.children)}else!F&&x==null&&fe(A,p,B,j,_,b,k);((ie=j.onVnodeUpdated)||W)&&It(()=>{ie&&on(ie,_,p,f),W&&cs(p,f,_,"updated")},b)},G=(f,p,_,b,k,S,F)=>{for(let A=0;A<p.length;A++){const N=f[A],x=p[A],W=N.el&&(N.type===_e||!gs(N,x)||N.shapeFlag&70)?d(N.el):_;w(N,x,W,null,b,k,S,F,!0)}},fe=(f,p,_,b,k,S,F)=>{if(_!==b){if(_!==ze)for(const A in _)!no(A)&&!(A in b)&&r(f,A,_[A],null,F,p.children,k,S,Ke);for(const A in b){if(no(A))continue;const N=b[A],x=_[A];N!==x&&A!=="value"&&r(f,A,x,N,F,p.children,k,S,Ke)}"value"in b&&r(f,"value",_.value,b.value)}},I=(f,p,_,b,k,S,F,A,N)=>{const x=p.el=f?f.el:a(""),W=p.anchor=f?f.anchor:a("");let{patchFlag:B,dynamicChildren:j,slotScopeIds:ie}=p;ie&&(A=A?A.concat(ie):ie),f==null?(s(x,_,b),s(W,_,b),R(p.children,_,W,k,S,F,A,N)):B>0&&B&64&&j&&f.dynamicChildren?(G(f.dynamicChildren,j,_,k,S,F,A),(p.key!=null||k&&p===k.subTree)&&qf(f,p,!0)):Ce(f,p,_,W,k,S,F,A,N)},Z=(f,p,_,b,k,S,F,A,N)=>{p.slotScopeIds=A,f==null?p.shapeFlag&512?k.ctx.activate(p,_,b,F,N):qe(p,_,b,k,S,F,N):nt(f,p,N)},qe=(f,p,_,b,k,S,F)=>{const A=f.component=qg(f,b,k);if(sa(f)&&(A.ctx.renderer=D),Gg(A),A.asyncDep){if(k&&k.registerDep(A,ce),!f.el){const N=A.subTree=E(zt);P(null,N,p,_)}return}ce(A,f,p,_,k,S,F)},nt=(f,p,_)=>{const b=p.component=f.component;if(ig(f,p,_))if(b.asyncDep&&!b.asyncResolved){Te(b,p,_);return}else b.next=p,J0(b.update),b.update();else p.el=f.el,b.vnode=p},ce=(f,p,_,b,k,S,F)=>{const A=()=>{if(f.isMounted){let{next:W,bu:B,u:j,parent:ie,vnode:pe}=f,Oe=W,Se;us(f,!1),W?(W.el=pe.el,Te(f,W,F)):W=pe,B&&so(B),(Se=W.props&&W.props.onVnodeBeforeUpdate)&&on(Se,ie,W,pe),us(f,!0);const Ze=Ma(f),Wt=f.subTree;f.subTree=Ze,w(Wt,Ze,d(Wt.el),T(Wt),f,k,S),W.el=Ze.el,Oe===null&&rg(f,Ze.el),j&&It(j,k),(Se=W.props&&W.props.onVnodeUpdated)&&It(()=>on(Se,ie,W,pe),k)}else{let W;const{el:B,props:j}=p,{bm:ie,m:pe,parent:Oe}=f,Se=Gi(p);if(us(f,!1),ie&&so(ie),!Se&&(W=j&&j.onVnodeBeforeMount)&&on(W,Oe,p),us(f,!0),B&&ke){const Ze=()=>{f.subTree=Ma(f),ke(B,f.subTree,f,k,null)};Se?p.type.__asyncLoader().then(()=>!f.isUnmounted&&Ze()):Ze()}else{const Ze=f.subTree=Ma(f);w(null,Ze,_,b,f,k,S),p.el=Ze.el}if(pe&&It(pe,k),!Se&&(W=j&&j.onVnodeMounted)){const Ze=p;It(()=>on(W,Oe,Ze),k)}(p.shapeFlag&256||Oe&&Gi(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&f.a&&It(f.a,k),f.isMounted=!0,p=_=b=null}},N=f.effect=new oc(A,()=>pc(x),f.scope),x=f.update=()=>N.run();x.id=f.uid,us(f,!0),x()},Te=(f,p,_)=>{p.component=f;const b=f.vnode.props;f.vnode=p,f.next=null,Og(f,p.props,b,_),Dg(f,p.children,_),yi(),Hu(),vi()},Ce=(f,p,_,b,k,S,F,A,N=!1)=>{const x=f&&f.children,W=f?f.shapeFlag:0,B=p.children,{patchFlag:j,shapeFlag:ie}=p;if(j>0){if(j&128){$e(x,B,_,b,k,S,F,A,N);return}else if(j&256){At(x,B,_,b,k,S,F,A,N);return}}ie&8?(W&16&&Ke(x,k,S),B!==x&&u(_,B)):W&16?ie&16?$e(x,B,_,b,k,S,F,A,N):Ke(x,k,S,!0):(W&8&&u(_,""),ie&16&&R(B,_,b,k,S,F,A,N))},At=(f,p,_,b,k,S,F,A,N)=>{f=f||Ys,p=p||Ys;const x=f.length,W=p.length,B=Math.min(x,W);let j;for(j=0;j<B;j++){const ie=p[j]=N?Vn(p[j]):cn(p[j]);w(f[j],ie,_,null,k,S,F,A,N)}x>W?Ke(f,k,S,!0,!1,B):R(p,_,b,k,S,F,A,N,B)},$e=(f,p,_,b,k,S,F,A,N)=>{let x=0;const W=p.length;let B=f.length-1,j=W-1;for(;x<=B&&x<=j;){const ie=f[x],pe=p[x]=N?Vn(p[x]):cn(p[x]);if(gs(ie,pe))w(ie,pe,_,null,k,S,F,A,N);else break;x++}for(;x<=B&&x<=j;){const ie=f[B],pe=p[j]=N?Vn(p[j]):cn(p[j]);if(gs(ie,pe))w(ie,pe,_,null,k,S,F,A,N);else break;B--,j--}if(x>B){if(x<=j){const ie=j+1,pe=ie<W?p[ie].el:b;for(;x<=j;)w(null,p[x]=N?Vn(p[x]):cn(p[x]),_,pe,k,S,F,A,N),x++}}else if(x>j)for(;x<=B;)Ue(f[x],k,S,!0),x++;else{const ie=x,pe=x,Oe=new Map;for(x=pe;x<=j;x++){const Ot=p[x]=N?Vn(p[x]):cn(p[x]);Ot.key!=null&&Oe.set(Ot.key,x)}let Se,Ze=0;const Wt=j-pe+1;let Fs=!1,Mu=0;const Mi=new Array(Wt);for(x=0;x<Wt;x++)Mi[x]=0;for(x=ie;x<=B;x++){const Ot=f[x];if(Ze>=Wt){Ue(Ot,k,S,!0);continue}let rn;if(Ot.key!=null)rn=Oe.get(Ot.key);else for(Se=pe;Se<=j;Se++)if(Mi[Se-pe]===0&&gs(Ot,p[Se])){rn=Se;break}rn===void 0?Ue(Ot,k,S,!0):(Mi[rn-pe]=x+1,rn>=Mu?Mu=rn:Fs=!0,w(Ot,p[rn],_,null,k,S,F,A,N),Ze++)}const Au=Fs?Ug(Mi):Ys;for(Se=Au.length-1,x=Wt-1;x>=0;x--){const Ot=pe+x,rn=p[Ot],Ou=Ot+1<W?p[Ot+1].el:b;Mi[x]===0?w(null,rn,_,Ou,k,S,F,A,N):Fs&&(Se<0||x!==Au[Se]?Fe(rn,_,Ou,2):Se--)}}},Fe=(f,p,_,b,k=null)=>{const{el:S,type:F,transition:A,children:N,shapeFlag:x}=f;if(x&6){Fe(f.component.subTree,p,_,b);return}if(x&128){f.suspense.move(p,_,b);return}if(x&64){F.move(f,p,_,D);return}if(F===_e){s(S,p,_);for(let B=0;B<N.length;B++)Fe(N[B],p,_,b);s(f.anchor,p,_);return}if(F===ro){z(f,p,_);return}if(b!==2&&x&1&&A)if(b===0)A.beforeEnter(S),s(S,p,_),It(()=>A.enter(S),k);else{const{leave:B,delayLeave:j,afterLeave:ie}=A,pe=()=>s(S,p,_),Oe=()=>{B(S,()=>{pe(),ie&&ie()})};j?j(S,pe,Oe):Oe()}else s(S,p,_)},Ue=(f,p,_,b=!1,k=!1)=>{const{type:S,props:F,ref:A,children:N,dynamicChildren:x,shapeFlag:W,patchFlag:B,dirs:j}=f;if(A!=null&&vl(A,null,_,f,!0),W&256){p.ctx.deactivate(f);return}const ie=W&1&&j,pe=!Gi(f);let Oe;if(pe&&(Oe=F&&F.onVnodeBeforeUnmount)&&on(Oe,p,f),W&6)pt(f.component,_,b);else{if(W&128){f.suspense.unmount(_,b);return}ie&&cs(f,null,p,"beforeUnmount"),W&64?f.type.remove(f,p,_,k,D,b):x&&(S!==_e||B>0&&B&64)?Ke(x,p,_,!1,!0):(S===_e&&B&384||!k&&W&16)&&Ke(N,p,_),b&&wt(f)}(pe&&(Oe=F&&F.onVnodeUnmounted)||ie)&&It(()=>{Oe&&on(Oe,p,f),ie&&cs(f,null,p,"unmounted")},_)},wt=f=>{const{type:p,el:_,anchor:b,transition:k}=f;if(p===_e){Ct(_,b);return}if(p===ro){$(f);return}const S=()=>{i(_),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(f.shapeFlag&1&&k&&!k.persisted){const{leave:F,delayLeave:A}=k,N=()=>F(_,S);A?A(f.el,S,N):N()}else S()},Ct=(f,p)=>{let _;for(;f!==p;)_=h(f),i(f),f=_;i(p)},pt=(f,p,_)=>{const{bum:b,scope:k,update:S,subTree:F,um:A}=f;b&&so(b),k.stop(),S&&(S.active=!1,Ue(F,f,p,_)),A&&It(A,p),It(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Ke=(f,p,_,b=!1,k=!1,S=0)=>{for(let F=S;F<f.length;F++)Ue(f[F],p,_,b,k)},T=f=>f.shapeFlag&6?T(f.component.subTree):f.shapeFlag&128?f.suspense.next():h(f.anchor||f.el),V=(f,p,_)=>{f==null?p._vnode&&Ue(p._vnode,null,null,!0):w(p._vnode||null,f,p,null,null,null,_),Hu(),kf(),p._vnode=f},D={p:w,um:Ue,m:Fe,r:wt,mt:qe,mc:R,pc:Ce,pbc:G,n:T,o:t};let H,ke;return e&&([H,ke]=e(D)),{render:V,hydrate:H,createApp:Rg(V,H)}}function us({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function qf(t,e,n=!1){const s=t.children,i=e.children;if(Q(s)&&Q(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Vn(i[r]),a.el=o.el),n||qf(o,a)),a.type===oa&&(a.el=o.el)}}function Ug(t){const e=t.slice(),n=[0];let s,i,r,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}const Vg=t=>t.__isTeleport,_e=Symbol.for("v-fgt"),oa=Symbol.for("v-txt"),zt=Symbol.for("v-cmt"),ro=Symbol.for("v-stc"),Yi=[];let Yt=null;function v(t=!1){Yi.push(Yt=t?null:[])}function Bg(){Yi.pop(),Yt=Yi[Yi.length-1]||null}let pr=1;function td(t){pr+=t}function Gf(t){return t.dynamicChildren=pr>0?Yt||Ys:null,Bg(),pr>0&&Yt&&Yt.push(t),t}function C(t,e,n,s,i,r){return Gf(y(t,e,n,s,i,r,!0))}function Pe(t,e,n,s,i){return Gf(E(t,e,n,s,i,!0))}function yo(t){return t?t.__v_isVNode===!0:!1}function gs(t,e){return t.type===e.type&&t.key===e.key}const aa="__vInternal",Kf=({key:t})=>t??null,oo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Je(t)||Ye(t)||oe(t)?{i:dt,r:t,k:e,f:!!n}:t:null);function y(t,e=null,n=null,s=0,i=null,r=t===_e?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Kf(e),ref:e&&oo(e),scopeId:na,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:dt};return a?(wc(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=Je(n)?8:16),pr>0&&!o&&Yt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Yt.push(l),l}const E=zg;function zg(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===Df)&&(t=zt),yo(t)){const a=ns(t,e,!0);return n&&wc(a,n),pr>0&&!r&&Yt&&(a.shapeFlag&6?Yt[Yt.indexOf(t)]=a:Yt.push(a)),a.patchFlag|=-2,a}if(Jg(t)&&(t=t.__vccOpts),e){e=Hg(e);let{class:a,style:l}=e;a&&!Je(a)&&(e.class=ht(a)),He(l)&&(yf(l)&&!Q(l)&&(l=Xe({},l)),e.style=Ht(l))}const o=Je(t)?1:og(t)?128:Vg(t)?64:He(t)?4:oe(t)?2:0;return y(t,e,n,s,i,o,r,!0)}function Hg(t){return t?yf(t)||aa in t?Xe({},t):t:null}function ns(t,e,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=t,a=e?Cc(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Kf(a),ref:e&&e.ref?n&&i?Q(i)?i.concat(oo(e)):[i,oo(e)]:oo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_e?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ns(t.ssContent),ssFallback:t.ssFallback&&ns(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function vo(t=" ",e=0){return E(oa,null,t,e)}function je(t="",e=!1){return e?(v(),Pe(zt,null,t)):E(zt,null,t)}function cn(t){return t==null||typeof t=="boolean"?E(zt):Q(t)?E(_e,null,t.slice()):typeof t=="object"?Vn(t):E(oa,null,String(t))}function Vn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ns(t)}function wc(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Q(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),wc(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(aa in e)?e._ctx=dt:i===3&&dt&&(dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else oe(e)?(e={default:e,_ctx:dt},n=32):(e=String(e),s&64?(n=16,e=[vo(e)]):n=8);t.children=e,t.shapeFlag|=n}function Cc(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=ht([e.class,s.class]));else if(i==="style")e.style=Ht([e.style,s.style]);else if(Ko(i)){const r=e[i],o=s[i];o&&r!==o&&!(Q(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function on(t,e,n,s=null){Bt(t,e,7,[n,s])}const Wg=Vf();let jg=0;function qg(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||Wg,r={uid:jg++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new nf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zf(s,i),emitsOptions:Sf(s,i),emit:null,emitted:null,propsDefaults:ze,inheritAttrs:s.inheritAttrs,ctx:ze,data:ze,props:ze,attrs:ze,slots:ze,refs:ze,setupState:ze,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=tg.bind(null,r),t.ce&&t.ce(r),r}let it=null;const bc=()=>it||dt;let Ec,Us,nd="__VUE_INSTANCE_SETTERS__";(Us=ul()[nd])||(Us=ul()[nd]=[]),Us.push(t=>it=t),Ec=t=>{Us.length>1?Us.forEach(e=>e(t)):Us[0](t)};const oi=t=>{Ec(t),t.scope.on()},ks=()=>{it&&it.scope.off(),Ec(null)};function Yf(t){return t.vnode.shapeFlag&4}let mr=!1;function Gg(t,e=!1){mr=e;const{props:n,children:s}=t.vnode,i=Yf(t);Ag(t,n,i,e),Ng(t,s);const r=i?Kg(t,e):void 0;return mr=!1,r}function Kg(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Zo(new Proxy(t.ctx,Eg));const{setup:s}=n;if(s){const i=t.setupContext=s.length>1?Qg(t):null;oi(t),yi();const r=Kn(s,t,0,[t.props,i]);if(vi(),ks(),Xh(r)){if(r.then(ks,ks),e)return r.then(o=>{sd(t,o,e)}).catch(o=>{ea(o,t,0)});t.asyncDep=r}else sd(t,r,e)}else Qf(t,e)}function sd(t,e,n){oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:He(e)&&(t.setupState=bf(e)),Qf(t,n)}let id;function Qf(t,e,n){const s=t.type;if(!t.render){if(!e&&id&&!s.render){const i=s.template||yc(t).template;if(i){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=s,c=Xe(Xe({isCustomElement:r,delimiters:a},o),l);s.render=id(i,c)}}t.render=s.render||Jt}oi(t),yi(),Tg(t),vi(),ks()}function Yg(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Pt(t,"get","$attrs"),e[n]}}))}function Qg(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Yg(t)},slots:t.slots,emit:t.emit,expose:e}}function la(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(bf(Zo(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ki)return Ki[n](t)},has(e,n){return n in e||n in Ki}}))}function Xg(t,e=!0){return oe(t)?t.displayName||t.name:t.name||e&&t.__name}function Jg(t){return oe(t)&&"__vccOpts"in t}const Ne=(t,e)=>Y0(t,e,mr);function Tc(t,e,n){const s=arguments.length;return s===2?He(e)&&!Q(e)?yo(e)?E(t,null,[e]):E(t,e):E(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&yo(n)&&(n=[n]),E(t,e,n))}const Zg=Symbol.for("v-scx"),e_=()=>dn(Zg),t_="3.3.4",n_="http://www.w3.org/2000/svg",_s=typeof document<"u"?document:null,rd=_s&&_s.createElement("template"),s_={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e?_s.createElementNS(n_,t):_s.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>_s.createTextNode(t),createComment:t=>_s.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_s.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{rd.innerHTML=s?`<svg>${t}</svg>`:t;const a=rd.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function i_(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function r_(t,e,n){const s=t.style,i=Je(n);if(n&&!i){if(e&&!Je(e))for(const r in e)n[r]==null&&wl(s,r,"");for(const r in n)wl(s,r,n[r])}else{const r=s.display;i?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=r)}}const od=/\s*!important$/;function wl(t,e,n){if(Q(n))n.forEach(s=>wl(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=o_(t,e);od.test(n)?t.setProperty(_i(s),n.replace(od,""),"important"):t[s]=n}}const ad=["Webkit","Moz","ms"],La={};function o_(t,e){const n=La[e];if(n)return n;let s=pn(e);if(s!=="filter"&&s in t)return La[e]=s;s=Xo(s);for(let i=0;i<ad.length;i++){const r=ad[i]+s;if(r in t)return La[e]=r}return e}const ld="http://www.w3.org/1999/xlink";function a_(t,e,n,s,i){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(ld,e.slice(6,e.length)):t.setAttributeNS(ld,e,n);else{const r=h0(e);n==null||r&&!ef(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function l_(t,e,n,s,i,r,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,i,r),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const c=a==="OPTION"?t.getAttribute("value"):t.value,u=n??"";c!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=ef(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Hs(t,e,n,s){t.addEventListener(e,n,s)}function c_(t,e,n,s){t.removeEventListener(e,n,s)}function u_(t,e,n,s,i=null){const r=t._vei||(t._vei={}),o=r[e];if(s&&o)o.value=s;else{const[a,l]=d_(e);if(s){const c=r[e]=p_(s,i);Hs(t,a,c,l)}else o&&(c_(t,a,o,l),r[e]=void 0)}}const cd=/(?:Once|Passive|Capture)$/;function d_(t){let e;if(cd.test(t)){e={};let s;for(;s=t.match(cd);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):_i(t.slice(2)),e]}let Na=0;const h_=Promise.resolve(),f_=()=>Na||(h_.then(()=>Na=0),Na=Date.now());function p_(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Bt(m_(s,n.value),e,5,[s])};return n.value=t,n.attached=f_(),n}function m_(t,e){if(Q(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const ud=/^on[a-z]/,g_=(t,e,n,s,i=!1,r,o,a,l)=>{e==="class"?i_(t,s,i):e==="style"?r_(t,n,s):Ko(e)?tc(e)||u_(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):__(t,e,s,i))?l_(t,e,s,r,o,a,l):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),a_(t,e,s,i))};function __(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&ud.test(e)&&oe(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||ud.test(e)&&Je(n)?!1:e in t}function wi(t){const e=bc();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(r=>bl(r,i))},s=()=>{const i=t(e.proxy);Cl(e.subTree,i),n(i)};lg(s),dr(()=>{const i=new MutationObserver(s);i.observe(e.subTree.el.parentNode,{childList:!0}),hr(()=>i.disconnect())})}function Cl(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Cl(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)bl(t.el,e);else if(t.type===_e)t.children.forEach(n=>Cl(n,e));else if(t.type===ro){let{el:n,anchor:s}=t;for(;n&&(bl(n,e),n!==s);)n=n.nextSibling}}function bl(t,e){if(t.nodeType===1){const n=t.style;for(const s in e)n.setProperty(`--${s}`,e[s])}}const Ln="transition",Oi="animation",sn=(t,{slots:e})=>Tc(dg,Jf(t),e);sn.displayName="Transition";const Xf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},y_=sn.props=Xe({},Rf,Xf),ds=(t,e=[])=>{Q(t)?t.forEach(n=>n(...e)):t&&t(...e)},dd=t=>t?Q(t)?t.some(e=>e.length>1):t.length>1:!1;function Jf(t){const e={};for(const I in t)I in Xf||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,g=v_(i),w=g&&g[0],M=g&&g[1],{onBeforeEnter:P,onEnter:L,onEnterCancelled:z,onLeave:$,onLeaveCancelled:se,onBeforeAppear:ve=P,onAppear:q=L,onAppearCancelled:R=z}=e,U=(I,Z,qe)=>{$n(I,Z?u:a),$n(I,Z?c:o),qe&&qe()},G=(I,Z)=>{I._isLeaving=!1,$n(I,d),$n(I,m),$n(I,h),Z&&Z()},fe=I=>(Z,qe)=>{const nt=I?q:L,ce=()=>U(Z,I,qe);ds(nt,[Z,ce]),hd(()=>{$n(Z,I?l:r),_n(Z,I?u:a),dd(nt)||fd(Z,s,w,ce)})};return Xe(e,{onBeforeEnter(I){ds(P,[I]),_n(I,r),_n(I,o)},onBeforeAppear(I){ds(ve,[I]),_n(I,l),_n(I,c)},onEnter:fe(!1),onAppear:fe(!0),onLeave(I,Z){I._isLeaving=!0;const qe=()=>G(I,Z);_n(I,d),e1(),_n(I,h),hd(()=>{I._isLeaving&&($n(I,d),_n(I,m),dd($)||fd(I,s,M,qe))}),ds($,[I,qe])},onEnterCancelled(I){U(I,!1),ds(z,[I])},onAppearCancelled(I){U(I,!0),ds(R,[I])},onLeaveCancelled(I){G(I),ds(se,[I])}})}function v_(t){if(t==null)return null;if(He(t))return[Da(t.enter),Da(t.leave)];{const e=Da(t);return[e,e]}}function Da(t){return o0(t)}function _n(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function $n(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function hd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let w_=0;function fd(t,e,n,s){const i=t._endId=++w_,r=()=>{i===t._endId&&s()};if(n)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=Zf(t,e);if(!o)return s();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,h),r()},h=m=>{m.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,h)}function Zf(t,e){const n=window.getComputedStyle(t),s=g=>(n[g]||"").split(", "),i=s(`${Ln}Delay`),r=s(`${Ln}Duration`),o=pd(i,r),a=s(`${Oi}Delay`),l=s(`${Oi}Duration`),c=pd(a,l);let u=null,d=0,h=0;e===Ln?o>0&&(u=Ln,d=o,h=r.length):e===Oi?c>0&&(u=Oi,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?Ln:Oi:null,h=u?u===Ln?r.length:l.length:0);const m=u===Ln&&/\b(transform|all)(,|$)/.test(s(`${Ln}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:m}}function pd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>md(n)+md(t[s])))}function md(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function e1(){return document.body.offsetHeight}const t1=new WeakMap,n1=new WeakMap,s1={name:"TransitionGroup",props:Xe({},y_,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=bc(),s=Pf();let i,r;return Lf(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!I_(i[0].el,n.vnode.el,o))return;i.forEach(E_),i.forEach(T_);const a=i.filter(k_);e1(),a.forEach(l=>{const c=l.el,u=c.style;_n(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c._moveCb=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c._moveCb=null,$n(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=ye(t),a=Jf(o);let l=o.tag||_e;i=r,r=e.default?gc(e.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&ur(u,cr(u,a,s,n))}if(i)for(let c=0;c<i.length;c++){const u=i[c];ur(u,cr(u,a,s,n)),t1.set(u,u.el.getBoundingClientRect())}return E(l,null,r)}}},C_=t=>delete t.mode;s1.props;const b_=s1;function E_(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function T_(t){n1.set(t,t.el.getBoundingClientRect())}function k_(t){const e=t1.get(t),n=n1.get(t),s=e.left-n.left,i=e.top-n.top;if(s||i){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${i}px)`,r.transitionDuration="0s",t}}function I_(t,e,n){const s=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&s.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&s.classList.add(o)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:r}=Zf(s);return i.removeChild(s),r}const gd=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Q(e)?n=>so(e,n):e};function S_(t){t.target.composing=!0}function _d(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const El={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t._assign=gd(i);const r=s||i.props&&i.props.type==="number";Hs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=cl(a)),t._assign(a)}),n&&Hs(t,"change",()=>{t.value=t.value.trim()}),e||(Hs(t,"compositionstart",S_),Hs(t,"compositionend",_d),Hs(t,"change",_d))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:i}},r){if(t._assign=gd(r),t.composing||document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===e||(i||t.type==="number")&&cl(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},x_=["ctrl","shift","alt","meta"],P_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>x_.some(n=>t[`${n}Key`]&&!e.includes(n))},$a=(t,e)=>(n,...s)=>{for(let i=0;i<e.length;i++){const r=P_[e[i]];if(r&&r(n,e))return}return t(n,...s)},ca={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Li(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Li(t,!0),s.enter(t)):s.leave(t,()=>{Li(t,!1)}):Li(t,e))},beforeUnmount(t,{value:e}){Li(t,e)}};function Li(t,e){t.style.display=e?t._vod:"none"}const R_=Xe({patchProp:g_},s_);let yd;function M_(){return yd||(yd=$g(R_))}const A_=(...t)=>{const e=M_().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=O_(s);if(!i)return;const r=e._component;!oe(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function O_(t){return Je(t)?document.querySelector(t):t}var L_=!1;/*!
  * pinia v2.1.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let i1;const Ar=t=>i1=t,r1=Symbol();function Tl(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Qi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Qi||(Qi={}));function N_(){const t=sf(!0),e=t.run(()=>Re({}));let n=[],s=[];const i=Zo({install(r){Ar(i),i._a=r,r.provide(r1,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return!this._a&&!L_?s.push(r):n.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const o1=()=>{};function vd(t,e,n,s=o1){t.push(e);const i=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),s())};return!n&&rf()&&p0(i),i}function Vs(t,...e){t.slice().forEach(n=>{n(...e)})}const D_=t=>t();function kl(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,s)=>t.set(s,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],i=t[n];Tl(i)&&Tl(s)&&t.hasOwnProperty(n)&&!Ye(s)&&!Gn(s)?t[n]=kl(i,s):t[n]=s}return t}const $_=Symbol();function F_(t){return!Tl(t)||!t.hasOwnProperty($_)}const{assign:Fn}=Object;function U_(t){return!!(Ye(t)&&t.effect)}function V_(t,e,n,s){const{state:i,actions:r,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const u=j0(n.state.value[t]);return Fn(u,r,Object.keys(o||{}).reduce((d,h)=>(d[h]=Zo(Ne(()=>{Ar(n);const m=n._s.get(t);return o[h].call(m,m)})),d),{}))}return l=a1(t,c,e,n,s,!0),l}function a1(t,e,n={},s,i,r){let o;const a=Fn({actions:{}},n),l={deep:!0};let c,u,d=[],h=[],m;const g=s.state.value[t];!r&&!g&&(s.state.value[t]={}),Re({});let w;function M(R){let U;c=u=!1,typeof R=="function"?(R(s.state.value[t]),U={type:Qi.patchFunction,storeId:t,events:m}):(kl(s.state.value[t],R),U={type:Qi.patchObject,payload:R,storeId:t,events:m});const G=w=Symbol();fc().then(()=>{w===G&&(c=!0)}),u=!0,Vs(d,U,s.state.value[t])}const P=r?function(){const{state:U}=n,G=U?U():{};this.$patch(fe=>{Fn(fe,G)})}:o1;function L(){o.stop(),d=[],h=[],s._s.delete(t)}function z(R,U){return function(){Ar(s);const G=Array.from(arguments),fe=[],I=[];function Z(ce){fe.push(ce)}function qe(ce){I.push(ce)}Vs(h,{args:G,name:R,store:se,after:Z,onError:qe});let nt;try{nt=U.apply(this&&this.$id===t?this:se,G)}catch(ce){throw Vs(I,ce),ce}return nt instanceof Promise?nt.then(ce=>(Vs(fe,ce),ce)).catch(ce=>(Vs(I,ce),Promise.reject(ce))):(Vs(fe,nt),nt)}}const $={_p:s,$id:t,$onAction:vd.bind(null,h),$patch:M,$reset:P,$subscribe(R,U={}){const G=vd(d,R,U.detached,()=>fe()),fe=o.run(()=>En(()=>s.state.value[t],I=>{(U.flush==="sync"?u:c)&&R({storeId:t,type:Qi.direct,events:m},I)},Fn({},l,U)));return G},$dispose:L},se=Mr($);s._s.set(t,se);const ve=s._a&&s._a.runWithContext||D_,q=s._e.run(()=>(o=sf(),ve(()=>o.run(e))));for(const R in q){const U=q[R];if(Ye(U)&&!U_(U)||Gn(U))r||(g&&F_(U)&&(Ye(U)?U.value=g[R]:kl(U,g[R])),s.state.value[t][R]=U);else if(typeof U=="function"){const G=z(R,U);q[R]=G,a.actions[R]=U}}return Fn(se,q),Fn(ye(se),q),Object.defineProperty(se,"$state",{get:()=>s.state.value[t],set:R=>{M(U=>{Fn(U,R)})}}),s._p.forEach(R=>{Fn(se,o.run(()=>R({store:se,app:s._a,pinia:s,options:a})))}),g&&r&&n.hydrate&&n.hydrate(se.$state,g),c=!0,u=!0,se}function B_(t,e,n){let s,i;const r=typeof e=="function";typeof t=="string"?(s=t,i=r?n:e):(i=t,s=t.id);function o(a,l){const c=Mg();return a=a||(c?dn(r1,null):null),a&&Ar(a),a=i1,a._s.has(s)||(r?a1(s,e,i,a):V_(s,i,a)),a._s.get(s)}return o.$id=s,o}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ws=typeof window<"u";function z_(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const We=Object.assign;function Fa(t,e){const n={};for(const s in e){const i=e[s];n[s]=tn(i)?i.map(t):t(i)}return n}const Xi=()=>{},tn=Array.isArray,H_=/\/$/,W_=t=>t.replace(H_,"");function Ua(t,e,n="/"){let s,i={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),i=t(r)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=K_(s??e,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:o}}function j_(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function q_(t,e,n){const s=e.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&ai(e.matched[s],n.matched[i])&&l1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ai(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function l1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!G_(t[n],e[n]))return!1;return!0}function G_(t,e){return tn(t)?wd(t,e):tn(e)?wd(e,t):t===e}function wd(t,e){return tn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function K_(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o-(o===s.length?1:0)).join("/")}var gr;(function(t){t.pop="pop",t.push="push"})(gr||(gr={}));var wo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(wo||(wo={}));const Va="";function Y_(t){if(!t)if(Ws){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),W_(t)}const Q_=/^[^#]+#/;function X_(t,e){return t.replace(Q_,"#")+e}function J_(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Z_=()=>({left:window.pageXOffset,top:window.pageYOffset});function ey(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=J_(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Cd(t,e){return(history.state?history.state.position-e:-1)+t}const Il=new Map;function ty(t,e){Il.set(t,e)}function ny(t){const e=Il.get(t);return Il.delete(t),e}function sy(t=""){let e=[],n=[Va],s=0;t=Y_(t);function i(a){s++,s===n.length||n.splice(s),n.push(a)}function r(a,l,{direction:c,delta:u}){const d={direction:c,delta:u,type:gr.pop};for(const h of e)h(a,l,d)}const o={location:Va,state:{},base:t,createHref:X_.bind(null,t),replace(a){n.splice(s--,1),i(a)},push(a,l){i(a)},listen(a){return e.push(a),()=>{const l=e.indexOf(a);l>-1&&e.splice(l,1)}},destroy(){e=[],n=[Va],s=0},go(a,l=!0){const c=this.location,u=a<0?wo.back:wo.forward;s=Math.max(0,Math.min(s+a,n.length-1)),l&&r(this.location,c,{direction:u,delta:a})}};return Object.defineProperty(o,"location",{enumerable:!0,get:()=>n[s]}),o}function iy(t){return typeof t=="string"||t&&typeof t=="object"}function c1(t){return typeof t=="string"||typeof t=="symbol"}const Nn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},u1=Symbol("");var bd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(bd||(bd={}));function li(t,e){return We(new Error,{type:t,[u1]:!0},e)}function gn(t,e){return t instanceof Error&&u1 in t&&(e==null||!!(t.type&e))}const Ed="[^/]+?",ry={sensitive:!1,strict:!1,start:!0,end:!0},oy=/[.+*?^${}()[\]/\\]/g;function ay(t,e){const n=We({},ry,e),s=[];let i=n.start?"^":"";const r=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const h=c[d];let m=40+(n.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(oy,"\\$&"),m+=40;else if(h.type===1){const{value:g,repeatable:w,optional:M,regexp:P}=h;r.push({name:g,repeatable:w,optional:M});const L=P||Ed;if(L!==Ed){m+=10;try{new RegExp(`(${L})`)}catch($){throw new Error(`Invalid custom RegExp for param "${g}" (${L}): `+$.message)}}let z=w?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;d||(z=M&&c.length<2?`(?:/${z})`:"/"+z),M&&(z+="?"),i+=z,m+=20,M&&(m+=-8),w&&(m+=-20),L===".*"&&(m+=-50)}u.push(m)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",g=r[h-1];d[g.name]=m&&g.repeatable?m.split("/"):m}return d}function l(c){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const m of h)if(m.type===0)u+=m.value;else if(m.type===1){const{value:g,repeatable:w,optional:M}=m,P=g in c?c[g]:"";if(tn(P)&&!w)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const L=tn(P)?P.join("/"):P;if(!L)if(M)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);u+=L}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function ly(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function cy(t,e){let n=0;const s=t.score,i=e.score;for(;n<s.length&&n<i.length;){const r=ly(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Td(s))return 1;if(Td(i))return-1}return i.length-s.length}function Td(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const uy={type:0,value:""},dy=/[a-zA-Z0-9_]/;function hy(t){if(!t)return[[]];if(t==="/")return[[uy]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):h();break;case 4:h(),n=s;break;case 1:l==="("?n=2:dy.test(l)?h():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function fy(t,e,n){const s=ay(hy(t.path),n),i=We(s,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function py(t,e){const n=[],s=new Map;e=Sd({strict:!1,end:!0,sensitive:!1},e);function i(u){return s.get(u)}function r(u,d,h){const m=!h,g=my(u);g.aliasOf=h&&h.record;const w=Sd(e,u),M=[g];if("alias"in u){const z=typeof u.alias=="string"?[u.alias]:u.alias;for(const $ of z)M.push(We({},g,{components:h?h.record.components:g.components,path:$,aliasOf:h?h.record:g}))}let P,L;for(const z of M){const{path:$}=z;if(d&&$[0]!=="/"){const se=d.record.path,ve=se[se.length-1]==="/"?"":"/";z.path=d.record.path+($&&ve+$)}if(P=fy(z,d,w),h?h.alias.push(P):(L=L||P,L!==P&&L.alias.push(P),m&&u.name&&!Id(P)&&o(u.name)),g.children){const se=g.children;for(let ve=0;ve<se.length;ve++)r(se[ve],P,h&&h.children[ve])}h=h||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&l(P)}return L?()=>{o(L)}:Xi}function o(u){if(c1(u)){const d=s.get(u);d&&(s.delete(u),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(u);d>-1&&(n.splice(d,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let d=0;for(;d<n.length&&cy(u,n[d])>=0&&(u.record.path!==n[d].record.path||!d1(u,n[d]));)d++;n.splice(d,0,u),u.record.name&&!Id(u)&&s.set(u.record.name,u)}function c(u,d){let h,m={},g,w;if("name"in u&&u.name){if(h=s.get(u.name),!h)throw li(1,{location:u});w=h.record.name,m=We(kd(d.params,h.keys.filter(L=>!L.optional).map(L=>L.name)),u.params&&kd(u.params,h.keys.map(L=>L.name))),g=h.stringify(m)}else if("path"in u)g=u.path,h=n.find(L=>L.re.test(g)),h&&(m=h.parse(g),w=h.record.name);else{if(h=d.name?s.get(d.name):n.find(L=>L.re.test(d.path)),!h)throw li(1,{location:u,currentLocation:d});w=h.record.name,m=We({},d.params,u.params),g=h.stringify(m)}const M=[];let P=h;for(;P;)M.unshift(P.record),P=P.parent;return{name:w,path:g,params:m,matched:M,meta:_y(M)}}return t.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function kd(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function my(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:gy(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function gy(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Id(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _y(t){return t.reduce((e,n)=>We(e,n.meta),{})}function Sd(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function d1(t,e){return e.children.some(n=>n===t||d1(t,n))}const h1=/#/g,yy=/&/g,vy=/\//g,wy=/=/g,Cy=/\?/g,f1=/\+/g,by=/%5B/g,Ey=/%5D/g,p1=/%5E/g,Ty=/%60/g,m1=/%7B/g,ky=/%7C/g,g1=/%7D/g,Iy=/%20/g;function kc(t){return encodeURI(""+t).replace(ky,"|").replace(by,"[").replace(Ey,"]")}function Sy(t){return kc(t).replace(m1,"{").replace(g1,"}").replace(p1,"^")}function Sl(t){return kc(t).replace(f1,"%2B").replace(Iy,"+").replace(h1,"%23").replace(yy,"%26").replace(Ty,"`").replace(m1,"{").replace(g1,"}").replace(p1,"^")}function xy(t){return Sl(t).replace(wy,"%3D")}function Py(t){return kc(t).replace(h1,"%23").replace(Cy,"%3F")}function Ry(t){return t==null?"":Py(t).replace(vy,"%2F")}function Co(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function My(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(f1," "),o=r.indexOf("="),a=Co(o<0?r:r.slice(0,o)),l=o<0?null:Co(r.slice(o+1));if(a in e){let c=e[a];tn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function xd(t){let e="";for(let n in t){const s=t[n];if(n=xy(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(tn(s)?s.map(r=>r&&Sl(r)):[s&&Sl(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function Ay(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=tn(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const Oy=Symbol(""),Pd=Symbol(""),Ic=Symbol(""),_1=Symbol(""),xl=Symbol("");function Ni(){let t=[];function e(s){return t.push(s),()=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Bn(t,e,n,s,i){const r=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const l=d=>{d===!1?a(li(4,{from:n,to:e})):d instanceof Error?a(d):iy(d)?a(li(2,{from:e,to:d})):(r&&s.enterCallbacks[i]===r&&typeof d=="function"&&r.push(d),o())},c=t.call(s&&s.instances[i],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(d=>a(d))})}function Ba(t,e,n,s){const i=[];for(const r of t)for(const o in r.components){let a=r.components[o];if(!(e!=="beforeRouteEnter"&&!r.instances[o]))if(Ly(a)){const c=(a.__vccOpts||a)[e];c&&i.push(Bn(c,n,s,r,o))}else{let l=a();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=z_(c)?c.default:c;r.components[o]=u;const h=(u.__vccOpts||u)[e];return h&&Bn(h,n,s,r,o)()}))}}return i}function Ly(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Rd(t){const e=dn(Ic),n=dn(_1),s=Ne(()=>e.resolve(me(t.to))),i=Ne(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const h=d.findIndex(ai.bind(null,u));if(h>-1)return h;const m=Md(l[c-2]);return c>1&&Md(u)===m&&d[d.length-1].path!==m?d.findIndex(ai.bind(null,l[c-2])):h}),r=Ne(()=>i.value>-1&&Fy(n.params,s.value.params)),o=Ne(()=>i.value>-1&&i.value===n.matched.length-1&&l1(n.params,s.value.params));function a(l={}){return $y(l)?e[me(t.replace)?"replace":"push"](me(t.to)).catch(Xi):Promise.resolve()}return{route:s,href:Ne(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}const Ny=Af({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Rd,setup(t,{slots:e}){const n=Mr(Rd(t)),{options:s}=dn(Ic),i=Ne(()=>({[Ad(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Ad(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:Tc("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),Dy=Ny;function $y(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Fy(t,e){for(const n in e){const s=e[n],i=t[n];if(typeof s=="string"){if(s!==i)return!1}else if(!tn(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function Md(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ad=(t,e,n)=>t??e??n,Uy=Af({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=dn(xl),i=Ne(()=>t.route||s.value),r=dn(Pd,0),o=Ne(()=>{let c=me(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Ne(()=>i.value.matched[o.value]);io(Pd,Ne(()=>o.value+1)),io(Oy,a),io(xl,i);const l=Re();return En(()=>[l.value,a.value,t.name],([c,u,d],[h,m,g])=>{u&&(u.instances[d]=c,m&&m!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!ai(u,m)||!h)&&(u.enterCallbacks[d]||[]).forEach(w=>w(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,d=a.value,h=d&&d.components[u];if(!h)return Od(n.default,{Component:h,route:c});const m=d.props[u],g=m?m===!0?c.params:typeof m=="function"?m(c):m:null,M=Tc(h,We({},g,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Od(n.default,{Component:M,route:c})||M}}});function Od(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const y1=Uy;function Vy(t){const e=py(t.routes,t),n=t.parseQuery||My,s=t.stringifyQuery||xd,i=t.history,r=Ni(),o=Ni(),a=Ni(),l=z0(Nn);let c=Nn;Ws&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Fa.bind(null,T=>""+T),d=Fa.bind(null,Ry),h=Fa.bind(null,Co);function m(T,V){let D,H;return c1(T)?(D=e.getRecordMatcher(T),H=V):H=T,e.addRoute(H,D)}function g(T){const V=e.getRecordMatcher(T);V&&e.removeRoute(V)}function w(){return e.getRoutes().map(T=>T.record)}function M(T){return!!e.getRecordMatcher(T)}function P(T,V){if(V=We({},V||l.value),typeof T=="string"){const _=Ua(n,T,V.path),b=e.resolve({path:_.path},V),k=i.createHref(_.fullPath);return We(_,b,{params:h(b.params),hash:Co(_.hash),redirectedFrom:void 0,href:k})}let D;if("path"in T)D=We({},T,{path:Ua(n,T.path,V.path).path});else{const _=We({},T.params);for(const b in _)_[b]==null&&delete _[b];D=We({},T,{params:d(_)}),V.params=d(V.params)}const H=e.resolve(D,V),ke=T.hash||"";H.params=u(h(H.params));const f=j_(s,We({},T,{hash:Sy(ke),path:H.path})),p=i.createHref(f);return We({fullPath:f,hash:ke,query:s===xd?Ay(T.query):T.query||{}},H,{redirectedFrom:void 0,href:p})}function L(T){return typeof T=="string"?Ua(n,T,l.value.path):We({},T)}function z(T,V){if(c!==T)return li(8,{from:V,to:T})}function $(T){return q(T)}function se(T){return $(We(L(T),{replace:!0}))}function ve(T){const V=T.matched[T.matched.length-1];if(V&&V.redirect){const{redirect:D}=V;let H=typeof D=="function"?D(T):D;return typeof H=="string"&&(H=H.includes("?")||H.includes("#")?H=L(H):{path:H},H.params={}),We({query:T.query,hash:T.hash,params:"path"in H?{}:T.params},H)}}function q(T,V){const D=c=P(T),H=l.value,ke=T.state,f=T.force,p=T.replace===!0,_=ve(D);if(_)return q(We(L(_),{state:typeof _=="object"?We({},ke,_.state):ke,force:f,replace:p}),V||D);const b=D;b.redirectedFrom=V;let k;return!f&&q_(s,H,D)&&(k=li(16,{to:b,from:H}),Fe(H,H,!0,!1)),(k?Promise.resolve(k):G(b,H)).catch(S=>gn(S)?gn(S,2)?S:$e(S):Ce(S,b,H)).then(S=>{if(S){if(gn(S,2))return q(We({replace:p},L(S.to),{state:typeof S.to=="object"?We({},ke,S.to.state):ke,force:f}),V||b)}else S=I(b,H,!0,p,ke);return fe(b,H,S),S})}function R(T,V){const D=z(T,V);return D?Promise.reject(D):Promise.resolve()}function U(T){const V=Ct.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(T):T()}function G(T,V){let D;const[H,ke,f]=By(T,V);D=Ba(H.reverse(),"beforeRouteLeave",T,V);for(const _ of H)_.leaveGuards.forEach(b=>{D.push(Bn(b,T,V))});const p=R.bind(null,T,V);return D.push(p),Ke(D).then(()=>{D=[];for(const _ of r.list())D.push(Bn(_,T,V));return D.push(p),Ke(D)}).then(()=>{D=Ba(ke,"beforeRouteUpdate",T,V);for(const _ of ke)_.updateGuards.forEach(b=>{D.push(Bn(b,T,V))});return D.push(p),Ke(D)}).then(()=>{D=[];for(const _ of f)if(_.beforeEnter)if(tn(_.beforeEnter))for(const b of _.beforeEnter)D.push(Bn(b,T,V));else D.push(Bn(_.beforeEnter,T,V));return D.push(p),Ke(D)}).then(()=>(T.matched.forEach(_=>_.enterCallbacks={}),D=Ba(f,"beforeRouteEnter",T,V),D.push(p),Ke(D))).then(()=>{D=[];for(const _ of o.list())D.push(Bn(_,T,V));return D.push(p),Ke(D)}).catch(_=>gn(_,8)?_:Promise.reject(_))}function fe(T,V,D){a.list().forEach(H=>U(()=>H(T,V,D)))}function I(T,V,D,H,ke){const f=z(T,V);if(f)return f;const p=V===Nn,_=Ws?history.state:{};D&&(H||p?i.replace(T.fullPath,We({scroll:p&&_&&_.scroll},ke)):i.push(T.fullPath,ke)),l.value=T,Fe(T,V,D,p),$e()}let Z;function qe(){Z||(Z=i.listen((T,V,D)=>{if(!pt.listening)return;const H=P(T),ke=ve(H);if(ke){q(We(ke,{replace:!0}),H).catch(Xi);return}c=H;const f=l.value;Ws&&ty(Cd(f.fullPath,D.delta),Z_()),G(H,f).catch(p=>gn(p,12)?p:gn(p,2)?(q(p.to,H).then(_=>{gn(_,20)&&!D.delta&&D.type===gr.pop&&i.go(-1,!1)}).catch(Xi),Promise.reject()):(D.delta&&i.go(-D.delta,!1),Ce(p,H,f))).then(p=>{p=p||I(H,f,!1),p&&(D.delta&&!gn(p,8)?i.go(-D.delta,!1):D.type===gr.pop&&gn(p,20)&&i.go(-1,!1)),fe(H,f,p)}).catch(Xi)}))}let nt=Ni(),ce=Ni(),Te;function Ce(T,V,D){$e(T);const H=ce.list();return H.length?H.forEach(ke=>ke(T,V,D)):console.error(T),Promise.reject(T)}function At(){return Te&&l.value!==Nn?Promise.resolve():new Promise((T,V)=>{nt.add([T,V])})}function $e(T){return Te||(Te=!T,qe(),nt.list().forEach(([V,D])=>T?D(T):V()),nt.reset()),T}function Fe(T,V,D,H){const{scrollBehavior:ke}=t;if(!Ws||!ke)return Promise.resolve();const f=!D&&ny(Cd(T.fullPath,0))||(H||!D)&&history.state&&history.state.scroll||null;return fc().then(()=>ke(T,V,f)).then(p=>p&&ey(p)).catch(p=>Ce(p,T,V))}const Ue=T=>i.go(T);let wt;const Ct=new Set,pt={currentRoute:l,listening:!0,addRoute:m,removeRoute:g,hasRoute:M,getRoutes:w,resolve:P,options:t,push:$,replace:se,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ce.add,isReady:At,install(T){const V=this;T.component("RouterLink",Dy),T.component("RouterView",y1),T.config.globalProperties.$router=V,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>me(l)}),Ws&&!wt&&l.value===Nn&&(wt=!0,$(i.location).catch(ke=>{}));const D={};for(const ke in Nn)Object.defineProperty(D,ke,{get:()=>l.value[ke],enumerable:!0});T.provide(Ic,V),T.provide(_1,gf(D)),T.provide(xl,l);const H=T.unmount;Ct.add(T),T.unmount=function(){Ct.delete(T),Ct.size<1&&(c=Nn,Z&&Z(),Z=null,l.value=Nn,wt=!1,Te=!1),H()}}};function Ke(T){return T.reduce((V,D)=>V.then(()=>U(D)),Promise.resolve())}return pt}function By(t,e){const n=[],s=[],i=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(c=>ai(c,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>ai(c,l))||i.push(l))}return[n,s,i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=function(t,e){if(!t)throw Ci(e)},Ci=function(t){return new Error("Firebase Database ("+v1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zy=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},Sc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let h=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(h=64)),s.push(n[u],n[d],n[h],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zy(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||a==null||c==null||d==null)throw new Hy;const h=r<<2|a>>4;if(s.push(h),c!==64){const m=a<<4&240|c>>2;if(s.push(m),d!==64){const g=c<<6&192|d;s.push(g)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Hy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C1=function(t){const e=w1(t);return Sc.encodeByteArray(e,!0)},bo=function(t){return C1(t).replace(/\./g,"")},Eo=function(t){try{return Sc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t){return b1(void 0,t)}function b1(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!jy(n)||(t[n]=b1(t[n],e[n]));return t}function jy(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=()=>qy().__FIREBASE_DEFAULTS__,Ky=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Yy=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Eo(t[1]);return e&&JSON.parse(e)},xc=()=>{try{return Gy()||Ky()||Yy()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E1=t=>{var e,n;return(n=(e=xc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Qy=t=>{const e=E1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},T1=()=>{var t;return(t=xc())===null||t===void 0?void 0:t.config},k1=t=>{var e;return(e=xc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[bo(JSON.stringify(n)),bo(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function Jy(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zy(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S1(){return v1.NODE_ADMIN===!0}function ev(){try{return typeof indexedDB=="object"}catch{return!1}}function tv(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="FirebaseError";class as extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=nv,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Or.prototype.create)}}class Or{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?sv(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new as(i,a,s)}}function sv(t,e){return t.replace(iv,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const iv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t){return JSON.parse(t)}function rt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=function(t){let e={},n={},s={},i="";try{const r=t.split(".");e=_r(Eo(r[0])||""),n=_r(Eo(r[1])||""),i=r[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:i}},rv=function(t){const e=x1(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ov=function(t){const e=x1(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ci(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Pl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function To(t,e,n){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=e.call(n,t[i],i,t));return s}function ko(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(Ld(r)&&Ld(o)){if(!ko(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Ld(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Hi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function Wi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):d<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+s[d]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let i=0;const r=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=s;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(r[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<n;)if(r[o]=e[i],++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let r=24;r>=0;r-=8)e[s]=this.chain_[i]>>r&255,++s;return e}}function lv(t,e){const n=new cv(t,e);return n.subscribe.bind(n)}class cv{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");uv(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=za),i.error===void 0&&(i.error=za),i.complete===void 0&&(i.complete=za);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uv(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function za(){}function Rc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);if(i>=55296&&i<=56319){const r=i-55296;s++,O(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;i=65536+(r<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},da=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new ua;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pv(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fv(t){return t===hs?void 0:t}function pv(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const gv={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},_v=xe.INFO,yv={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},vv=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=yv[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mc{constructor(e){this.name=e,this._logLevel=_v,this._logHandler=vv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const wv=(t,e)=>e.some(n=>t instanceof n);let Nd,Dd;function Cv(){return Nd||(Nd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bv(){return Dd||(Dd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P1=new WeakMap,Rl=new WeakMap,R1=new WeakMap,Ha=new WeakMap,Ac=new WeakMap;function Ev(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Yn(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&P1.set(n,t)}).catch(()=>{}),Ac.set(e,t),e}function Tv(t){if(Rl.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Rl.set(t,e)}let Ml={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kv(t){Ml=t(Ml)}function Iv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Wa(this),e,...n);return R1.set(s,e.sort?e.sort():[e]),Yn(s)}:bv().includes(t)?function(...e){return t.apply(Wa(this),e),Yn(P1.get(this))}:function(...e){return Yn(t.apply(Wa(this),e))}}function Sv(t){return typeof t=="function"?Iv(t):(t instanceof IDBTransaction&&Tv(t),wv(t,Cv())?new Proxy(t,Ml):t)}function Yn(t){if(t instanceof IDBRequest)return Ev(t);if(Ha.has(t))return Ha.get(t);const e=Sv(t);return e!==t&&(Ha.set(t,e),Ac.set(e,t)),e}const Wa=t=>Ac.get(t);function xv(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=Yn(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Yn(o.result),l.oldVersion,l.newVersion,Yn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Pv=["get","getKey","getAll","getAllKeys","count"],Rv=["put","add","delete","clear"],ja=new Map;function $d(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ja.get(e))return ja.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=Rv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Pv.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return ja.set(e,r),r}kv(t=>({...t,get:(e,n,s)=>$d(e,n)||t.get(e,n,s),has:(e,n)=>!!$d(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Av(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Av(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Al="@firebase/app",Fd="0.9.28";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Mc("@firebase/app"),Ov="@firebase/app-compat",Lv="@firebase/analytics-compat",Nv="@firebase/analytics",Dv="@firebase/app-check-compat",$v="@firebase/app-check",Fv="@firebase/auth",Uv="@firebase/auth-compat",Vv="@firebase/database",Bv="@firebase/database-compat",zv="@firebase/functions",Hv="@firebase/functions-compat",Wv="@firebase/installations",jv="@firebase/installations-compat",qv="@firebase/messaging",Gv="@firebase/messaging-compat",Kv="@firebase/performance",Yv="@firebase/performance-compat",Qv="@firebase/remote-config",Xv="@firebase/remote-config-compat",Jv="@firebase/storage",Zv="@firebase/storage-compat",e2="@firebase/firestore",t2="@firebase/firestore-compat",n2="firebase",s2="10.8.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="[DEFAULT]",i2={[Al]:"fire-core",[Ov]:"fire-core-compat",[Nv]:"fire-analytics",[Lv]:"fire-analytics-compat",[$v]:"fire-app-check",[Dv]:"fire-app-check-compat",[Fv]:"fire-auth",[Uv]:"fire-auth-compat",[Vv]:"fire-rtdb",[Bv]:"fire-rtdb-compat",[zv]:"fire-fn",[Hv]:"fire-fn-compat",[Wv]:"fire-iid",[jv]:"fire-iid-compat",[qv]:"fire-fcm",[Gv]:"fire-fcm-compat",[Kv]:"fire-perf",[Yv]:"fire-perf-compat",[Qv]:"fire-rc",[Xv]:"fire-rc-compat",[Jv]:"fire-gcs",[Zv]:"fire-gcs-compat",[e2]:"fire-fst",[t2]:"fire-fst-compat","fire-js":"fire-js",[n2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new Map,Ll=new Map;function r2(t,e){try{t.container.addComponent(e)}catch(n){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ui(t){const e=t.name;if(Ll.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;Ll.set(e,t);for(const n of Io.values())r2(n,t);return!0}function Oc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Qn=new Or("app","Firebase",o2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=s2;function M1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ol,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw Qn.create("bad-app-name",{appName:String(i)});if(n||(n=T1()),!n)throw Qn.create("no-options");const r=Io.get(i);if(r){if(ko(n,r.options)&&ko(s,r.config))return r;throw Qn.create("duplicate-app",{appName:i})}const o=new mv(i);for(const l of Ll.values())o.addComponent(l);const a=new a2(n,s,o);return Io.set(i,a),a}function A1(t=Ol){const e=Io.get(t);if(!e&&t===Ol&&T1())return M1();if(!e)throw Qn.create("no-app",{appName:t});return e}function Xn(t,e,n){var s;let i=(s=i2[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(a.join(" "));return}ui(new Ps(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="firebase-heartbeat-database",c2=1,yr="firebase-heartbeat-store";let qa=null;function O1(){return qa||(qa=xv(l2,c2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yr)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),qa}async function u2(t){try{const n=(await O1()).transaction(yr),s=await n.objectStore(yr).get(L1(t));return await n.done,s}catch(e){if(e instanceof as)Rs.warn(e.message);else{const n=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rs.warn(n.message)}}}async function Ud(t,e){try{const s=(await O1()).transaction(yr,"readwrite");await s.objectStore(yr).put(e,L1(t)),await s.done}catch(n){if(n instanceof as)Rs.warn(n.message);else{const s=Qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rs.warn(s.message)}}}function L1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=1024,h2=30*24*60*60*1e3;class f2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Vd();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=h2}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vd(),{heartbeatsToSend:s,unsentEntries:i}=p2(this._heartbeatsCache.heartbeats),r=bo(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Vd(){return new Date().toISOString().substring(0,10)}function p2(t,e=d2){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Bd(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bd(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class m2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ev()?tv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ud(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ud(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Bd(t){return bo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){ui(new Ps("platform-logger",e=>new Mv(e),"PRIVATE")),ui(new Ps("heartbeat",e=>new f2(e),"PRIVATE")),Xn(Al,Fd,t),Xn(Al,Fd,"esm2017"),Xn("fire-js","")}g2("");var _2="firebase",y2="10.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(_2,y2,"app");const v2={apiKey:"AIzaSyAbUbveOjn6VMB1QaAZHIR2hYxFfEbQ2Qo",authDomain:"artridge-website.firebaseapp.com",databaseURL:"https://artridge-website.firebaseio.com",projectId:"artridge-website",storageBucket:"artridge-website.appspot.com",messagingSenderId:"554359864126",appId:"1:554359864126:web:56901925bba81278fb0a6f",measurementId:"G-0KJBNGLJL4"},N1=M1(v2);function Lc(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function D1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w2=D1,$1=new Or("auth","Firebase",D1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new Mc("@firebase/auth");function C2(t,...e){So.logLevel<=xe.WARN&&So.warn(`Auth (${Ei}): ${t}`,...e)}function ao(t,...e){So.logLevel<=xe.ERROR&&So.error(`Auth (${Ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t,...e){throw Nc(t,...e)}function hn(t,...e){return Nc(t,...e)}function b2(t,e,n){const s=Object.assign(Object.assign({},w2()),{[e]:n});return new Or("auth","Firebase",s).create(e,{appName:t.name})}function Nc(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return $1.create(t,...e)}function te(t,e,...n){if(!t)throw Nc(e,...n)}function wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ao(e),new Error(e)}function In(t,e){t||wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function E2(){return zd()==="http:"||zd()==="https:"}function zd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E2()||Jy()||"connection"in navigator)?navigator.onLine:!0}function k2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){this.shortDelay=e,this.longDelay=n,In(n>e,"Short delay should be less than long delay!"),this.isMobile=Pc()||I1()}get(){return T2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t,e){In(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Lr(3e4,6e4);function Ns(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ls(t,e,n,s,i={}){return U1(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const a=bi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),F1.fetch()(V1(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},r))})}async function U1(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},I2),e);try{const i=new P2(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Jr(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jr(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jr(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jr(t,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw b2(t,u,c);nn(t,u)}}catch(i){if(i instanceof as)throw i;nn(t,"network-request-failed",{message:String(i)})}}async function ha(t,e,n,s,i={}){const r=await ls(t,e,n,s,i);return"mfaPendingCredential"in r&&nn(t,"multi-factor-auth-required",{_serverResponse:r}),r}function V1(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?Dc(t.config,i):`${t.config.apiScheme}://${i}`}function x2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class P2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hn(this.auth,"network-request-failed")),S2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jr(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=hn(t,e,s);return i.customData._tokenResponse=n,i}function Hd(t){return t!==void 0&&t.enterprise!==void 0}class R2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return x2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function M2(t,e){return ls(t,"GET","/v2/recaptchaConfig",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(t,e){return ls(t,"POST","/v1/accounts:delete",e)}async function O2(t,e){return ls(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function L2(t,e=!1){const n=Mt(t),s=await n.getIdToken(e),i=$c(s);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Ji(Ga(i.auth_time)),issuedAtTime:Ji(Ga(i.iat)),expirationTime:Ji(Ga(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Ga(t){return Number(t)*1e3}function $c(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return ao("JWT malformed, contained fewer than 3 sections"),null;try{const i=Eo(n);return i?JSON.parse(i):(ao("Failed to decode base64 JWT payload"),null)}catch(i){return ao("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function N2(t){const e=$c(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vr(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof as&&D2(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function D2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ji(this.lastLoginAt),this.creationTime=Ji(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t){var e;const n=t.auth,s=await t.getIdToken(),i=await vr(t,O2(n,{idToken:s}));te(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?V2(r.providerUserInfo):[],a=U2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new B1(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function F2(t){const e=Mt(t);await xo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function U2(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function V2(t){return t.map(e=>{var{providerId:n}=e,s=Lc(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(t,e){const n=await U1(t,{},async()=>{const s=bi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=V1(t,i,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",F1.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function z2(t,e){return ls(t,"POST","/v2/accounts:revokeToken",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return te(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await B2(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new wr;return s&&(te(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(te(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wr,this.toJSON())}_performRefresh(){return wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Is{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,r=Lc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new B1(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await vr(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return L2(this,e)}reload(){return F2(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await xo(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await vr(this,A2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,r,o,a,l,c,u;const d=(s=n.displayName)!==null&&s!==void 0?s:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,m=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,P=(c=n.createdAt)!==null&&c!==void 0?c:void 0,L=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:z,emailVerified:$,isAnonymous:se,providerData:ve,stsTokenManager:q}=n;te(z&&q,e,"internal-error");const R=wr.fromJSON(this.name,q);te(typeof z=="string",e,"internal-error"),Dn(d,e.name),Dn(h,e.name),te(typeof $=="boolean",e,"internal-error"),te(typeof se=="boolean",e,"internal-error"),Dn(m,e.name),Dn(g,e.name),Dn(w,e.name),Dn(M,e.name),Dn(P,e.name),Dn(L,e.name);const U=new Is({uid:z,auth:e,email:h,emailVerified:$,displayName:d,isAnonymous:se,photoURL:g,phoneNumber:m,tenantId:w,stsTokenManager:R,createdAt:P,lastLoginAt:L});return ve&&Array.isArray(ve)&&(U.providerData=ve.map(G=>Object.assign({},G))),M&&(U._redirectEventId=M),U}static async _fromIdTokenResponse(e,n,s=!1){const i=new wr;i.updateFromServerResponse(n);const r=new Is({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await xo(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new Map;function Cn(t){In(t instanceof Function,"Expected a class definition");let e=Wd.get(t);return e?(In(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wd.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}z1.type="NONE";const jd=z1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t,e,n){return`firebase:${t}:${e}:${n}`}class Js{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=lo(this.userKey,i.apiKey,r),this.fullPersistenceKey=lo("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Js(Cn(jd),e,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||Cn(jd);const o=lo(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Is._fromJSON(e,u);c!==r&&(a=d),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Js(r,e,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Js(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G1(e))return"Blackberry";if(K1(e))return"Webos";if(Fc(e))return"Safari";if((e.includes("chrome/")||W1(e))&&!e.includes("edge/"))return"Chrome";if(q1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function H1(t=vt()){return/firefox\//i.test(t)}function Fc(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W1(t=vt()){return/crios\//i.test(t)}function j1(t=vt()){return/iemobile/i.test(t)}function q1(t=vt()){return/android/i.test(t)}function G1(t=vt()){return/blackberry/i.test(t)}function K1(t=vt()){return/webos/i.test(t)}function fa(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function H2(t=vt()){var e;return fa(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function W2(){return Zy()&&document.documentMode===10}function Y1(t=vt()){return fa(t)||q1(t)||K1(t)||G1(t)||/windows phone/i.test(t)||j1(t)}function j2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e=[]){let n;switch(t){case"Browser":n=qd(vt());break;case"Worker":n=`${qd(vt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ei}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(t,e={}){return ls(t,"GET","/v2/passwordPolicy",Ns(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=6;class Y2{constructor(e){var n,s,i,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:K2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gd(this),this.idTokenSubscription=new Gd(this),this.beforeStateQueue=new q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cn(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await Js.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=k2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Mt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Cn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G2(this),n=new Y2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Or("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await z2(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Js.create(this,[Cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&C2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ti(t){return Mt(t)}class Gd{constructor(e){this.auth=e,this.observer=null,this.addObserver=lv(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X2(t){pa=t}function X1(t){return pa.loadJS(t)}function J2(){return pa.recaptchaEnterpriseScript}function Z2(){return pa.gapiScript}function ew(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const tw="recaptcha-enterprise",nw="NO_RECAPTCHA";class sw{constructor(e){this.type=tw,this.auth=Ti(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{M2(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new R2(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;Hd(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(nw)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&Hd(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=J2();l.length!==0&&(l+=a),X1(l).then(()=>{i(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Kd(t,e,n,s=!1){const i=new sw(t);let r;try{r=await i.verify(n)}catch{r=await i.verify(n,!0)}const o=Object.assign({},e);return s?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yd(t,e,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Kd(t,e,n,n==="getOobCode");return s(t,r)}else return s(t,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Kd(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e){const n=Oc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(ko(r,e??{}))return i;nn(i,"already-initialized")}return n.initialize({options:e})}function iw(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Cn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function rw(t,e,n){const s=Ti(t);te(s._canInitEmulator,s,"emulator-config-failed"),te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),r=Z1(e),{host:o,port:a}=ow(e),l=a===null?"":`:${a}`;s.config.emulator={url:`${r}//${o}${l}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||aw()}function Z1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ow(t){const e=Z1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Qd(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Qd(o)}}}function Qd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aw(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wn("not implemented")}_getIdTokenResponse(e){return wn("not implemented")}_linkToIdToken(e,n){return wn("not implemented")}_getReauthenticationResolver(e){return wn("not implemented")}}async function lw(t,e){return ls(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(t,e){return ha(t,"POST","/v1/accounts:signInWithPassword",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uw(t,e){return ha(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}async function dw(t,e){return ha(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Uc{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Cr(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Cr(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yd(e,n,"signInWithPassword",cw);case"emailLink":return uw(e,{email:this._email,oobCode:this._password});default:nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yd(e,s,"signUpPassword",lw);case"emailLink":return dw(e,{idToken:n,email:this._email,oobCode:this._password});default:nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,e){return ha(t,"POST","/v1/accounts:signInWithIdp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="http://localhost";class Ms extends Uc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,r=Lc(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Ms(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zs(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Zs(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zs(e,n)}buildRequest(){const e={requestUri:hw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pw(t){const e=Hi(Wi(t)).link,n=e?Hi(Wi(e)).deep_link_id:null,s=Hi(Wi(t)).deep_link_id;return(s?Hi(Wi(s)).link:null)||s||n||e||t}class Vc{constructor(e){var n,s,i,r,o,a;const l=Hi(Wi(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(s=l.oobCode)!==null&&s!==void 0?s:null,d=fw((i=l.mode)!==null&&i!==void 0?i:null);te(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=pw(e);try{return new Vc(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.providerId=ki.PROVIDER_ID}static credential(e,n){return Cr._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Vc.parseLink(n);return te(s,"argument-error"),Cr._fromEmailAndCode(e,s.code,s.tenantId)}}ki.PROVIDER_ID="password";ki.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ki.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends ep{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Nr{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zn.credential(e.oauthAccessToken)}catch{return null}}}zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";zn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Nr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Hn.credential(n,s)}catch{return null}}}Hn.GOOGLE_SIGN_IN_METHOD="google.com";Hn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Nr{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wn.credential(e.oauthAccessToken)}catch{return null}}}Wn.GITHUB_SIGN_IN_METHOD="github.com";Wn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends Nr{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return jn.credential(n,s)}catch{return null}}}jn.TWITTER_SIGN_IN_METHOD="twitter.com";jn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await Is._fromIdTokenResponse(e,s,i),o=Xd(s);return new di({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Xd(s);return new di({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Xd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends as{constructor(e,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Po.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Po(e,n,s,i)}}function tp(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Po._fromErrorAndOperation(t,r,e,s):r})}async function mw(t,e,n=!1){const s=await vr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return di._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(t,e,n=!1){const{auth:s}=t,i="reauthenticate";try{const r=await vr(t,tp(s,i,e,t),n);te(r.idToken,s,"internal-error");const o=$c(r.idToken);te(o,s,"internal-error");const{sub:a}=o;return te(t.uid===a,s,"user-mismatch"),di._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&nn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(t,e,n=!1){const s="signIn",i=await tp(t,s,e),r=await di._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}async function _w(t,e){return np(Ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(t){const e=Ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function vw(t,e,n){return _w(Mt(t),ki.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&yw(t),s})}function ww(t,e,n,s){return Mt(t).onIdTokenChanged(e,n,s)}function Cw(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function bw(t,e,n,s){return Mt(t).onAuthStateChanged(e,n,s)}const Ro="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ro,"1"),this.storage.removeItem(Ro),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(){const t=vt();return Fc(t)||fa(t)}const Tw=1e3,kw=10;class ip extends sp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Ew()&&j2(),this.fallbackToPolling=Y1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(s);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(s,e.newValue):this.storage.removeItem(s);else if(this.localCache[s]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);W2()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kw):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Tw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ip.type="LOCAL";const Iw=ip;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends sp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rp.type="SESSION";const op=rp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new ma(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await Sw(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ma.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Bc("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(h.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return window}function Pw(t){fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function Rw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mw(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Aw(){return ap()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="firebaseLocalStorageDb",Ow=1,Mo="firebaseLocalStorage",cp="fbase_key";class Dr{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ga(t,e){return t.transaction([Mo],e?"readwrite":"readonly").objectStore(Mo)}function Lw(){const t=indexedDB.deleteDatabase(lp);return new Dr(t).toPromise()}function Dl(){const t=indexedDB.open(lp,Ow);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Mo,{keyPath:cp})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Mo)?e(s):(s.close(),await Lw(),e(await Dl()))})})}async function Jd(t,e,n){const s=ga(t,!0).put({[cp]:e,value:n});return new Dr(s).toPromise()}async function Nw(t,e){const n=ga(t,!1).get(e),s=await new Dr(n).toPromise();return s===void 0?null:s.value}function Zd(t,e){const n=ga(t,!0).delete(e);return new Dr(n).toPromise()}const Dw=800,$w=3;class up{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dl(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>$w)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ap()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ma._getInstance(Aw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Rw(),!this.activeServiceWorker)return;this.sender=new xw(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dl();return await Jd(e,Ro,"1"),await Zd(e,Ro),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Jd(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Nw(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=ga(i,!1).getAll();return new Dr(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}up.type="LOCAL";const dp=up;new Lr(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e){return e?Cn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Uc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Uw(t){return np(t.auth,new zc(t),t.bypassAuthState)}function Vw(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),gw(n,new zc(t),t.bypassAuthState)}async function Bw(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),mw(n,new zc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Uw;case"linkViaPopup":case"linkViaRedirect":return Bw;case"reauthViaPopup":case"reauthViaRedirect":return Vw;default:nn(this.auth,"internal-error")}}resolve(e){In(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){In(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new Lr(2e3,1e4);class js extends hp{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,js.currentPopupAction&&js.currentPopupAction.cancel(),js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){In(this.filter.length===1,"Popup operations only handle one event");const e=Bc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zw.get())};e()}}js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="pendingRedirect",co=new Map;class Ww extends hp{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=co.get(this.auth._key());if(!e){try{const s=await jw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}co.set(this.auth._key(),e)}return this.bypassAuthState||co.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jw(t,e){const n=Kw(e),s=Gw(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function qw(t,e){co.set(t._key(),e)}function Gw(t){return Cn(t._redirectPersistence)}function Kw(t){return lo(Hw,t.config.apiKey,t.name)}async function Yw(t,e,n=!1){const s=Ti(t),i=Fw(s,e),o=await new Ww(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=10*60*1e3;class Xw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Jw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!fp(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qw&&this.cachedEventUids.clear(),this.cachedEventUids.has(eh(e))}saveEventToCache(e){this.cachedEventUids.add(eh(e)),this.lastProcessedEventTime=Date.now()}}function eh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fp({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Jw(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fp(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(t,e={}){return ls(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tC=/^https?/;async function nC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Zw(t);for(const n of e)try{if(sC(n))return}catch{}nn(t,"unauthorized-domain")}function sC(t){const e=Nl(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!tC.test(n))return!1;if(eC.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new Lr(3e4,6e4);function th(){const t=fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rC(t){return new Promise((e,n)=>{var s,i,r;function o(){th(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{th(),n(hn(t,"network-request-failed"))},timeout:iC.get()})}if(!((i=(s=fn().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((r=fn().gapi)===null||r===void 0)&&r.load)o();else{const a=ew("iframefcb");return fn()[a]=()=>{gapi.load?o():n(hn(t,"network-request-failed"))},X1(`${Z2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw uo=null,e})}let uo=null;function oC(t){return uo=uo||rC(t),uo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Lr(5e3,15e3),lC="__/auth/iframe",cC="emulator/auth/iframe",uC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dc(e,cC):`https://${t.config.authDomain}/${lC}`,s={apiKey:e.apiKey,appName:t.name,v:Ei},i=dC.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${bi(s).slice(1)}`}async function fC(t){const e=await oC(t),n=fn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:hC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uC,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),a=fn().setTimeout(()=>{r(o)},aC.get());function l(){fn().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mC=500,gC=600,_C="_blank",yC="http://localhost";class nh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vC(t,e,n,s=mC,i=gC){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},pC),{width:s.toString(),height:i.toString(),top:r,left:o}),c=vt().toLowerCase();n&&(a=W1(c)?_C:n),H1(c)&&(e=e||yC,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(H2(c)&&a!=="_self")return wC(e||"",a),new nh(null);const d=window.open(e||"",a,u);te(d,t,"popup-blocked");try{d.focus()}catch{}return new nh(d)}function wC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="__/auth/handler",bC="emulator/auth/handler",EC=encodeURIComponent("fac");async function sh(t,e,n,s,i,r){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ei,eventId:i};if(e instanceof ep){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Pl(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(r||{}))o[u]=d}if(e instanceof Nr){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${EC}=${encodeURIComponent(l)}`:"";return`${TC(t)}?${bi(a).slice(1)}${c}`}function TC({config:t}){return t.emulator?Dc(t,bC):`https://${t.authDomain}/${CC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="webStorageSupport";class kC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=op,this._completeRedirectFn=Yw,this._overrideRedirectResult=qw}async _openPopup(e,n,s,i){var r;In((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await sh(e,n,s,Nl(),i);return vC(e,o,Bc())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await sh(e,n,s,Nl(),i);return Pw(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(In(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await fC(e),s=new Xw(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ka,{type:Ka},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[Ka];o!==void 0&&n(!!o),nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y1()||Fc()||fa()}}const IC=kC;var ih="@firebase/auth",rh="1.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PC(t){ui(new Ps("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q1(t)},c=new Q2(s,i,r,l);return iw(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ui(new Ps("auth-internal",e=>{const n=Ti(e.getProvider("auth").getImmediate());return(s=>new SC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(ih,rh,xC(t)),Xn(ih,rh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=5*60,MC=k1("authIdTokenMaxAge")||RC;let oh=null;const AC=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>MC)return;const i=n==null?void 0:n.token;oh!==i&&(oh=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function OC(t=A1()){const e=Oc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=J1(t,{popupRedirectResolver:IC,persistence:[dp,Iw,op]}),s=k1("authTokenSyncURL");if(s){const r=AC(s);Cw(n,r,()=>r(n.currentUser)),ww(n,o=>r(o))}const i=E1("auth");return i&&rw(n,`http://${i}`),n}function LC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}X2({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=hn("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",LC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PC("Browser");/*! Capacitor: https://capacitorjs.com/ - MIT License */const NC=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},s=(r,o)=>{n.platforms.set(r,o)},i=r=>{n.platforms.has(r)&&(n.currentPlatform=n.platforms.get(r))};return n.addPlatform=s,n.setPlatform=i,n},DC=t=>t.CapacitorPlatforms=NC(t),pp=DC(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});pp.addPlatform;pp.setPlatform;var hi;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(hi||(hi={}));class Ya extends Error{constructor(e,n,s){super(e),this.message=e,this.code=n,this.data=s}}const $C=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},FC=t=>{var e,n,s,i,r;const o=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},l=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,u=()=>o!==null?o.name:$C(t),d=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||u,h=()=>d()!=="web",m=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||h,g=q=>{const R=$.get(q);return!!(R!=null&&R.platforms.has(d())||P(q))},w=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||g,M=q=>{var R;return(R=a.PluginHeaders)===null||R===void 0?void 0:R.find(U=>U.name===q)},P=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||M,L=q=>t.console.error(q),z=(q,R,U)=>Promise.reject(`${U} does not have an implementation of "${R}".`),$=new Map,se=(q,R={})=>{const U=$.get(q);if(U)return console.warn(`Capacitor plugin "${q}" already registered. Cannot register plugins twice.`),U.proxy;const G=d(),fe=P(q);let I;const Z=async()=>(!I&&G in R?I=typeof R[G]=="function"?I=await R[G]():I=R[G]:o!==null&&!I&&"web"in R&&(I=typeof R.web=="function"?I=await R.web():I=R.web),I),qe=($e,Fe)=>{var Ue,wt;if(fe){const Ct=fe==null?void 0:fe.methods.find(pt=>Fe===pt.name);if(Ct)return Ct.rtype==="promise"?pt=>a.nativePromise(q,Fe.toString(),pt):(pt,Ke)=>a.nativeCallback(q,Fe.toString(),pt,Ke);if($e)return(Ue=$e[Fe])===null||Ue===void 0?void 0:Ue.bind($e)}else{if($e)return(wt=$e[Fe])===null||wt===void 0?void 0:wt.bind($e);throw new Ya(`"${q}" plugin is not implemented on ${G}`,hi.Unimplemented)}},nt=$e=>{let Fe;const Ue=(...wt)=>{const Ct=Z().then(pt=>{const Ke=qe(pt,$e);if(Ke){const T=Ke(...wt);return Fe=T==null?void 0:T.remove,T}else throw new Ya(`"${q}.${$e}()" is not implemented on ${G}`,hi.Unimplemented)});return $e==="addListener"&&(Ct.remove=async()=>Fe()),Ct};return Ue.toString=()=>`${$e.toString()}() { [capacitor code] }`,Object.defineProperty(Ue,"name",{value:$e,writable:!1,configurable:!1}),Ue},ce=nt("addListener"),Te=nt("removeListener"),Ce=($e,Fe)=>{const Ue=ce({eventName:$e},Fe),wt=async()=>{const pt=await Ue;Te({eventName:$e,callbackId:pt},Fe)},Ct=new Promise(pt=>Ue.then(()=>pt({remove:wt})));return Ct.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await wt()},Ct},At=new Proxy({},{get($e,Fe){switch(Fe){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return fe?Ce:ce;case"removeListener":return Te;default:return nt(Fe)}}});return l[q]=At,$.set(q,{name:q,proxy:At,platforms:new Set([...Object.keys(R),...fe?[G]:[]])}),At},ve=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||se;return a.convertFileSrc||(a.convertFileSrc=q=>q),a.getPlatform=d,a.handleError=L,a.isNativePlatform=m,a.isPluginAvailable=w,a.pluginMethodNoop=z,a.registerPlugin=ve,a.Exception=Ya,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},UC=t=>t.Capacitor=FC(t),br=UC(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),mp=br.registerPlugin;br.Plugins;class gp{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const r=async()=>this.removeListener(e,n),o=Promise.resolve({remove:r});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()}}),o}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const s=this.listeners[e];s&&s.forEach(i=>i(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(e="not implemented"){return new br.Exception(e,hi.Unimplemented)}unavailable(e="not available"){return new br.Exception(e,hi.Unavailable)}async removeListener(e,n){const s=this.listeners[e];if(!s)return;const i=s.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const ah=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),lh=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class VC extends gp{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[i,r]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=lh(i).trim(),r=lh(r).trim(),n[i]=r}),n}async setCookie(e){try{const n=ah(e.key),s=ah(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${s||""}${i}; path=${r}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}mp("CapacitorCookies",{web:()=>new VC});const BC=async t=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const i=s.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},s.onerror=i=>n(i),s.readAsDataURL(t)}),zC=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,r,o)=>(i[r]=t[e[o]],i),{})},HC=(t,e=!0)=>t?Object.entries(t).reduce((s,i)=>{const[r,o]=i;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${r}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${r}=${a}`),`${s}&${l}`},"").substr(1):null,WC=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=zC(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))r.set(o,a);n.body=r.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{r.append(l,a)});else for(const a of Object.keys(t.data))r.append(a,t.data[a]);n.body=r;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class jC extends gp{async request(e){const n=WC(e,e.webFetchExtra),s=HC(e.params,e.shouldEncodeUrlParams),i=s?`${e.url}?${s}`:e.url,r=await fetch(i,n),o=r.headers.get("content-type")||"";let{responseType:a="text"}=r.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await r.blob(),l=await BC(c);break;case"json":l=await r.json();break;case"document":case"text":default:l=await r.text()}const u={};return r.headers.forEach((d,h)=>{u[h]=d}),{data:l,headers:u,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}mp("CapacitorHttp",{web:()=>new jC});const qC=()=>br.isNativePlatform()?J1(N1,{persistence:dp}):OC(),_a=qC(),Ao=Re({}),Un=Re({}),Hc=new Re(!1);_a.authStateReady().then(()=>{Hc.value=!0});bw(_a,async t=>{if(t){Ao.value=t,Un.value=await ik(`users/${t.uid}`);for(const{observable:e,path:n}of Dm)if(Un.value["game-data"]&&Un.value["game-data"]["tileswap-naenae"]&&Un.value["game-data"]["tileswap-naenae"][n]){const s=Un.value["game-data"]["tileswap-naenae"][n];typeof s=="object"&&!Array.isArray(s)?e.value={...e.value,...s}:e.value=Un.value["game-data"]["tileswap-naenae"][n]}}else Ao.value={},Un.value={}});const Wc=Ne(()=>Ao.value);Ne(()=>Un.value);const ya=Ne(()=>Object.keys(Ao.value).length>0),GC=async(t,e)=>await vw(_a,t,e),$l=async()=>await _a.signOut(),ch="@firebase/database",uh="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _p="";function KC(t){_p=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),rt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:_r(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Rn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YC(e)}}catch{}return new QC},vs=yp("localStorage"),Fl=yp("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Mc("@firebase/database"),XC=function(){let t=1;return function(){return t++}}(),vp=function(t){const e=dv(t),n=new av;n.update(e);const s=n.digest();return Sc.encodeByteArray(s)},$r=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=$r.apply(null,s):typeof s=="object"?e+=rt(s):e+=s,e+=" "}return e};let Ss=null,dh=!0;const JC=function(t,e){O(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ei.logLevel=xe.VERBOSE,Ss=ei.log.bind(ei),e&&Fl.set("logging_enabled",!0)):typeof t=="function"?Ss=t:(Ss=null,Fl.remove("logging_enabled"))},_t=function(...t){if(dh===!0&&(dh=!1,Ss===null&&Fl.get("logging_enabled")===!0&&JC(!0)),Ss){const e=$r.apply(null,t);Ss(e)}},Fr=function(t){return function(...e){_t(t,...e)}},Ul=function(...t){const e="FIREBASE INTERNAL ERROR: "+$r(...t);ei.error(e)},Sn=function(...t){const e=`FIREBASE FATAL ERROR: ${$r(...t)}`;throw ei.error(e),new Error(e)},xt=function(...t){const e="FIREBASE WARNING: "+$r(...t);ei.warn(e)},ZC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wp=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},eb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},fi="[MIN_NAME]",As="[MAX_NAME]",Ii=function(t,e){if(t===e)return 0;if(t===fi||e===As)return-1;if(e===fi||t===As)return 1;{const n=hh(t),s=hh(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},tb=function(t,e){return t===e?0:t<e?-1:1},Di=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+rt(e))},jc=function(t){if(typeof t!="object"||t===null)return rt(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=rt(e[s]),n+=":",n+=jc(t[e[s]]);return n+="}",n},Cp=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let i=0;i<n;i+=e)i+e>n?s.push(t.substring(i,n)):s.push(t.substring(i,i+e));return s};function Rt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const bp=function(t){O(!wp(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let i,r,o,a,l;t===0?(r=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),r=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},nb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},sb=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ib(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const rb=new RegExp("^-?(0*)\\d{1,10}$"),ob=-2147483648,ab=2147483647,hh=function(t){if(rb.test(t)){const e=Number(t);if(e>=ob&&e<=ab)return e}return null},Si=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xt("Exception was thrown by user callback.",n),e},Math.floor(0))}},lb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zi=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){xt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xt(e)}}class ti{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ti.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="5",Ep="v",Tp="s",kp="r",Ip="f",Sp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xp="ls",Pp="p",Vl="ac",Rp="websocket",Mp="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,s,i,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function db(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Op(t,e,n){O(typeof e=="string","typeof type must == string"),O(typeof n=="object","typeof params must == object");let s;if(e===Rp)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Mp)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);db(t)&&(n.ns=t.namespace);const i=[];return Rt(n,(r,o)=>{i.push(r+"="+o)}),s+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this.counters_={}}incrementCounter(e,n=1){Rn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Wy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa={},Xa={};function Gc(t){const e=t.toString();return Qa[e]||(Qa[e]=new hb),Qa[e]}function fb(t,e){const n=t.toString();return Xa[n]||(Xa[n]=e()),Xa[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&Si(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="start",mb="close",gb="pLPCommand",_b="pRTLPCB",Lp="id",Np="pw",Dp="ser",yb="cb",vb="seg",wb="ts",Cb="d",bb="dframe",$p=1870,Fp=30,Eb=$p-Fp,Tb=25e3,kb=3e4;class qs{constructor(e,n,s,i,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fr(e),this.stats_=Gc(n),this.urlFn=l=>(this.appCheckToken&&(l[Vl]=this.appCheckToken),Op(n,Mp,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new pb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kb)),eb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kc((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===fh)this.id=a,this.password=l;else if(o===mb)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[fh]="t",s[Dp]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[yb]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Ep]=qc,this.transportSessionId&&(s[Tp]=this.transportSessionId),this.lastSessionId&&(s[xp]=this.lastSessionId),this.applicationId&&(s[Pp]=this.applicationId),this.appCheckToken&&(s[Vl]=this.appCheckToken),typeof location<"u"&&location.hostname&&Sp.test(location.hostname)&&(s[kp]=Ip);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qs.forceAllow_=!0}static forceDisallow(){qs.forceDisallow_=!0}static isAvailable(){return qs.forceAllow_?!0:!qs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nb()&&!sb()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=C1(n),i=Cp(s,Eb);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[bb]="t",s[Lp]=e,s[Np]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=rt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Kc{constructor(e,n,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=XC(),window[gb+this.uniqueCallbackIdentifier]=e,window[_b+this.uniqueCallbackIdentifier]=n,this.myIFrame=Kc.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){_t("frame writing exception"),a.stack&&_t(a.stack),_t(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Lp]=this.myID,e[Np]=this.myPW,e[Dp]=this.currentSerial;let n=this.urlFn(e),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Fp+s.length<=$p;){const o=this.pendingSegs.shift();s=s+"&"+vb+i+"="+o.seg+"&"+wb+i+"="+o.ts+"&"+Cb+i+"="+o.d,i++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(s,Math.floor(Tb)),r=()=>{clearTimeout(i),s()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=16384,Sb=45e3;let Oo=null;typeof MozWebSocket<"u"?Oo=MozWebSocket:typeof WebSocket<"u"&&(Oo=WebSocket);class Kt{constructor(e,n,s,i,r,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fr(this.connId),this.stats_=Gc(n),this.connURL=Kt.connectionURL_(n,o,a,i,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,i,r){const o={};return o[Ep]=qc,typeof location<"u"&&location.hostname&&Sp.test(location.hostname)&&(o[kp]=Ip),n&&(o[Tp]=n),s&&(o[xp]=s),i&&(o[Vl]=i),r&&(o[Pp]=r),Op(e,Rp,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vs.set("previous_websocket_failure",!0);try{let s;S1(),this.mySock=new Oo(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Kt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Oo!==null&&!Kt.forceDisallow_}static previouslyFailed(){return vs.isInMemoryStorage||vs.get("previous_websocket_failure")===!0}markConnectionHealthy(){vs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=_r(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(O(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Cp(n,Ib);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Sb))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Kt.responsesRequiredToBeHealthy=2;Kt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[qs,Kt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Kt&&Kt.isAvailable();let s=n&&!Kt.previouslyFailed();if(e.webSocketOnly&&(n||xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Kt];else{const i=this.transports_=[];for(const r of Er.ALL_TRANSPORTS)r&&r.isAvailable()&&i.push(r);Er.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Er.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=6e4,Pb=5e3,Rb=10*1024,Mb=100*1024,Ja="t",ph="d",Ab="s",mh="r",Ob="e",gh="o",_h="a",yh="n",vh="p",Lb="h";class Nb{constructor(e,n,s,i,r,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fr("c:"+this.id+":"),this.transportManager_=new Er(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Mb?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Rb?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ja in e){const n=e[Ja];n===_h?this.upgradeIfSecondaryHealthy_():n===mh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===gh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Di("t",e),s=Di("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:vh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_h,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:yh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Di("t",e),s=Di("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Di(Ja,e);if(ph in e){const s=e[ph];if(n===Lb){const i=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===yh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Ab?this.onConnectionShutdown_(s):n===mh?this.onReset_(s):n===Ob?Ul("Server Error: "+s):n===gh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ul("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),qc!==s&&xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Zi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(xb))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Pb))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:vh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{put(e,n,s,i){}merge(e,n,s,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const i=this.getInitialEvent(e);i&&n.apply(s,i)}off(e,n,s){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===n&&(!s||s===i[r].context)){i.splice(r,1);return}}validateEventType_(e){O(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Vp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Pc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Lo}getInitialEvent(e){return O(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=32,Ch=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function be(){return new Ae("")}function ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ss(t){return t.pieces_.length-t.pieceNum_}function Le(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function Bp(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Db(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function zp(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Hp(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function ot(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Ae)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&n.push(s[i])}return new Ae(n,0)}function de(t){return t.pieceNum_>=t.pieces_.length}function Et(t,e){const n=ge(t),s=ge(e);if(n===null)return e;if(n===s)return Et(Le(t),Le(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Wp(t,e){if(ss(t)!==ss(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Qt(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(ss(t)>ss(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class $b{constructor(e,n){this.errorPrefix_=n,this.parts_=zp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=da(this.parts_[s]);jp(this)}}function Fb(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=da(e),jp(t)}function Ub(t){const e=t.parts_.pop();t.byteLength_-=da(e),t.parts_.length>0&&(t.byteLength_-=1)}function jp(t){if(t.byteLength_>Ch)throw new Error(t.errorPrefix_+"has a key path longer than "+Ch+" bytes ("+t.byteLength_+").");if(t.parts_.length>wh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wh+") or object contains a cycle "+fs(t))}function fs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends Vp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Yc}getInitialEvent(e){return O(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=1e3,Vb=60*5*1e3,bh=30*1e3,Bb=1.3,zb=3e4,Hb="server_kill",Eh=3;class Tn extends Up{constructor(e,n,s,i,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Tn.nextPersistentConnectionId_++,this.log_=Fr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$i,this.maxReconnectDelay_=Vb,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!S1())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Lo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const i=++this.requestNumber_,r={r:i,a:e,b:n};this.log_(rt(r)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[i]=s)}get(e){this.initConnection_();const n=new ua,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,i){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:s};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+s+" for "+i);const r={p:s},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;Tn.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Rn(e,"w")){const s=ci(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ov(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=bh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=rv(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,i=>{const r=i.s,o=i.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,e._queryObject,n)}sendUnlisten_(e,n,s,i){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";i&&(r.q=s,r.t=i),this.sendRequest(o,r)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,i){const r={p:n,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,s,i){this.putInternal("p",e,n,s,i)}merge(e,n,s,i){this.putInternal("m",e,n,s,i)}putInternal(e,n,s,i,r){this.initConnection_();const o={p:n,d:s};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+rt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ul("Unrecognized action received from server: "+rt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$i,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=$i,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zb&&(this.reconnectDelay_=$i),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Bb)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Tn.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},c=function(d){O(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Nb(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{xt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Hb)},r))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&xt(d),l())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Pl(this.interruptReasons_)&&(this.reconnectDelay_=$i,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(r=>jc(r)).join("$"):s="default";const i=this.removeListen_(e,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const s=new Ae(e).toString();let i;if(this.listens.has(s)){const r=this.listens.get(s);i=r.get(n),r.delete(n),r.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(e,n){_t("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Eh&&(this.reconnectDelay_=bh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_t("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Eh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+_p.replace(/\./g,"-")]=1,Pc()?e["framework.cordova"]=1:I1()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Lo.getInstance().currentlyOnline();return Pl(this.interruptReasons_)&&e}}Tn.nextPersistentConnectionId_=0;Tn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new le(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new le(fi,e),i=new le(fi,n);return this.compare(s,i)!==0}minPost(){return le.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zr;class qp extends va{static get __EMPTY_NODE(){return Zr}static set __EMPTY_NODE(e){Zr=e}compare(e,n){return Ii(e.name,n.name)}isDefinedOn(e){throw Ci("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return le.MIN}maxPost(){return new le(As,Zr)}makePost(e,n){return O(typeof e=="string","KeyIndex indexValue must always be a string."),new le(e,Zr)}toString(){return".key"}}const ni=new qp;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,s,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ct{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??ct.RED,this.left=i??St.EMPTY_NODE,this.right=r??St.EMPTY_NODE}copy(e,n,s,i,r){return new ct(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return r<0?i=i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return St.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,i;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ct.RED=!0;ct.BLACK=!1;class Wb{copy(e,n,s,i,r){return this}insert(e,n,s){return new ct(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class St{constructor(e,n=St.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new St(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ct.BLACK,null,null))}remove(e){return new St(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ct.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,i=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new eo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new eo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new eo(this.root_,null,this.comparator_,!0,e)}}St.EMPTY_NODE=new Wb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t,e){return Ii(t.name,e.name)}function Qc(t,e){return Ii(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl;function qb(t){Bl=t}const Gp=function(t){return typeof t=="number"?"number:"+bp(t):"string:"+t},Kp=function(t){if(t.isLeafNode()){const e=t.val();O(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Rn(e,".sv"),"Priority must be a string or number.")}else O(t===Bl||t.isEmpty(),"priority of unexpected type.");O(t===Bl||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th;class lt{constructor(e,n=lt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Kp(this.priorityNode_)}static set __childrenNodeConstructor(e){Th=e}static get __childrenNodeConstructor(){return Th}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new lt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:lt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return de(e)?this:ge(e)===".priority"?this.priorityNode_:lt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:lt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=ge(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(O(s!==".priority"||ss(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,lt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Le(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Gp(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=bp(this.value_):e+=this.value_,this.lazyHash_=vp(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===lt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof lt.__childrenNodeConstructor?-1:(O(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,i=lt.VALUE_TYPE_ORDER.indexOf(n),r=lt.VALUE_TYPE_ORDER.indexOf(s);return O(i>=0,"Unknown leaf type: "+n),O(r>=0,"Unknown leaf type: "+s),i===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}lt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp,Qp;function Gb(t){Yp=t}function Kb(t){Qp=t}class Yb extends va{compare(e,n){const s=e.node.getPriority(),i=n.node.getPriority(),r=s.compareTo(i);return r===0?Ii(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return le.MIN}maxPost(){return new le(As,new lt("[PRIORITY-POST]",Qp))}makePost(e,n){const s=Yp(e);return new le(n,new lt("[PRIORITY-POST]",s))}toString(){return".priority"}}const Ge=new Yb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=Math.log(2);class Xb{constructor(e){const n=r=>parseInt(Math.log(r)/Qb,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=s(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const No=function(t,e,n,s){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new ct(h,d.node,ct.BLACK,null,null);{const m=parseInt(u/2,10)+l,g=i(l,m),w=i(m+1,c);return d=t[m],h=n?n(d):d,new ct(h,d.node,ct.BLACK,g,w)}},r=function(l){let c=null,u=null,d=t.length;const h=function(g,w){const M=d-g,P=d;d-=g;const L=i(M+1,P),z=t[M],$=n?n(z):z;m(new ct($,z.node,w,null,L))},m=function(g){c?(c.left=g,c=g):(u=g,c=g)};for(let g=0;g<l.count;++g){const w=l.nextBitIsOne(),M=Math.pow(2,l.count-(g+1));w?h(M,ct.BLACK):(h(M,ct.BLACK),h(M,ct.RED))}return u},o=new Xb(t.length),a=r(o);return new St(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za;const Bs={};class bn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return O(Bs&&Ge,"ChildrenNode.ts has not been loaded"),Za=Za||new bn({".priority":Bs},{".priority":Ge}),Za}get(e){const n=ci(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof St?n:null}hasIndex(e){return Rn(this.indexSet_,e.toString())}addIndex(e,n){O(e!==ni,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const r=n.getIterator(le.Wrap);let o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),s.push(o),o=r.getNext();let a;i?a=No(s,e.getCompare()):a=Bs;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new bn(u,c)}addToIndexes(e,n){const s=To(this.indexes_,(i,r)=>{const o=ci(this.indexSet_,r);if(O(o,"Missing index implementation for "+r),i===Bs)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(le.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),No(a,o.getCompare())}else return Bs;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new le(e.name,a))),l.insert(e,e.node)}});return new bn(s,this.indexSet_)}removeFromIndexes(e,n){const s=To(this.indexes_,i=>{if(i===Bs)return i;{const r=n.get(e.name);return r?i.remove(new le(e.name,r)):i}});return new bn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fi;class J{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Kp(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Fi||(Fi=new J(new St(Qc),null,bn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fi}updatePriority(e){return this.children_.isEmpty()?this:new J(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Fi:n}}getChild(e){const n=ge(e);return n===null?this:this.getImmediateChild(n).getChild(Le(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(O(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new le(e,n);let i,r;n.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(s,this.children_));const o=i.isEmpty()?Fi:this.priorityNode_;return new J(i,o,r)}}updateChild(e,n){const s=ge(e);if(s===null)return n;{O(ge(e)!==".priority"||ss(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(Le(e),n);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,i=0,r=!0;if(this.forEachChild(Ge,(o,a)=>{n[o]=a.val(e),s++,r&&J.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):r=!1}),!e&&r&&i<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Gp(this.getPriority().val())+":"),this.forEachChild(Ge,(n,s)=>{const i=s.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":vp(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const i=this.resolveIndex_(s);if(i){const r=i.getPredecessorKey(new le(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new le(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new le(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,le.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)<0;)i.getNext(),r=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,le.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)>0;)i.getNext(),r=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ur?-1:0}withIndex(e){if(e===ni||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new J(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ni||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Ge),i=n.getIterator(Ge);let r=s.getNext(),o=i.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=s.getNext(),o=i.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ni?null:this.indexMap_.get(e.toString())}}J.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Jb extends J{constructor(){super(new St(Qc),J.EMPTY_NODE,bn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return J.EMPTY_NODE}isEmpty(){return!1}}const Ur=new Jb;Object.defineProperties(le,{MIN:{value:new le(fi,J.EMPTY_NODE)},MAX:{value:new le(As,Ur)}});qp.__EMPTY_NODE=J.EMPTY_NODE;lt.__childrenNodeConstructor=J;qb(Ur);Kb(Ur);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=!0;function ut(t,e=null){if(t===null)return J.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),O(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new lt(n,ut(e))}if(!(t instanceof Array)&&Zb){const n=[];let s=!1;if(Rt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=ut(a);l.isEmpty()||(s=s||!l.getPriority().isEmpty(),n.push(new le(o,l)))}}),n.length===0)return J.EMPTY_NODE;const r=No(n,jb,o=>o.name,Qc);if(s){const o=No(n,Ge.getCompare());return new J(r,ut(e),new bn({".priority":o},{".priority":Ge}))}else return new J(r,ut(e),bn.Default)}else{let n=J.EMPTY_NODE;return Rt(t,(s,i)=>{if(Rn(t,s)&&s.substring(0,1)!=="."){const r=ut(i);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(s,r))}}),n.updatePriority(ut(e))}}Gb(ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends va{constructor(e){super(),this.indexPath_=e,O(!de(e)&&ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),i=this.extractChild(n.node),r=s.compareTo(i);return r===0?Ii(e.name,n.name):r}makePost(e,n){const s=ut(e),i=J.EMPTY_NODE.updateChild(this.indexPath_,s);return new le(n,i)}maxPost(){const e=J.EMPTY_NODE.updateChild(this.indexPath_,Ur);return new le(As,e)}toString(){return zp(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE extends va{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Ii(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return le.MIN}maxPost(){return le.MAX}makePost(e,n){const s=ut(e);return new le(n,s)}toString(){return".value"}}const nE=new tE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){return{type:"value",snapshotNode:t}}function pi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Tr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function kr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function sE(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.index_=e}updateChild(e,n,s,i,r,o){O(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(s.getChild(i))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(Tr(n,a)):O(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(pi(n,s)):o.trackChildChange(kr(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Ge,(i,r)=>{n.hasChild(i)||s.trackChildChange(Tr(i,r))}),n.isLeafNode()||n.forEachChild(Ge,(i,r)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(r)||s.trackChildChange(kr(i,r,o))}else s.trackChildChange(pi(i,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?J.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.indexedFilter_=new Xc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ir.getStartPost_(e),this.endPost_=Ir.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,i,r,o){return this.matches(new le(n,s))||(s=J.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,i,r,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=J.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(J.EMPTY_NODE);const r=this;return n.forEachChild(Ge,(o,a)=>{r.matches(new le(o,a))||(i=i.updateImmediateChild(o,J.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ir(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,i,r,o){return this.rangedFilter_.matches(new le(n,s))||(s=J.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,i,r,o):this.fullLimitUpdateChild_(e,n,s,r,o)}updateFullNode(e,n,s){let i;if(n.isLeafNode()||n.isEmpty())i=J.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=J.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(J.EMPTY_NODE);let r;this.reverse_?r=i.getReverseIterator(this.index_):r=i.getIterator(this.index_);let o=0;for(;r.hasNext();){const a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,J.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,i,r){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,m)=>d(m,h)}else o=this.index_.getCompare();const a=e;O(a.numChildren()===this.limit_,"");const l=new le(n,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const m=h==null?1:o(h,l);if(u&&!s.isEmpty()&&m>=0)return r!=null&&r.trackChildChange(kr(n,s,d)),a.updateImmediateChild(n,s);{r!=null&&r.trackChildChange(Tr(n,d));const w=a.updateImmediateChild(n,J.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(r!=null&&r.trackChildChange(pi(h.name,h.node)),w.updateImmediateChild(h.name,h.node)):w}}else return s.isEmpty()?e:u&&o(c,l)>=0?(r!=null&&(r.trackChildChange(Tr(c.name,c.node)),r.trackChildChange(pi(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(c.name,J.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fi}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:As}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ge}copy(){const e=new Jc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rE(t){return t.loadsAllData()?new Xc(t.getIndex()):t.hasLimit()?new iE(t):new Ir(t)}function kh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ge?n="$priority":t.index_===nE?n="$value":t.index_===ni?n="$key":(O(t.index_ instanceof eE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=rt(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=rt(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+rt(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=rt(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+rt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Ih(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ge&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Up{constructor(e,n,s,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=Fr("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,s,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=Do.getListenId_(e,s),a={};this.listens_[o]=a;const l=kh(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(r,d,!1,s),ci(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const s=Do.getListenId_(e,n);delete this.listens_[s]}get(e){const n=kh(e._queryParams),s=e._path.toString(),i=new ua;return this.restRequest_(s+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(s,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(n.auth=i.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bi(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=_r(a.responseText)}catch{xt("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&xt("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.rootNode_=J.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){return{value:null,children:new Map}}function Jp(t,e,n){if(de(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=ge(e);t.children.has(s)||t.children.set(s,$o());const i=t.children.get(s);e=Le(e),Jp(i,e,n)}}function zl(t,e,n){t.value!==null?n(e,t.value):aE(t,(s,i)=>{const r=new Ae(e.toString()+"/"+s);zl(i,r,n)})}function aE(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Rt(this.last_,(s,i)=>{n[s]=n[s]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=10*1e3,cE=30*1e3,uE=5*60*1e3;class dE{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new lE(e);const s=Sh+(cE-Sh)*Math.random();Zi(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Rt(e,(i,r)=>{r>0&&Rn(this.statsToReport_,i)&&(n[i]=r,s=!0)}),s&&this.server_.reportStats(n),Zi(this.reportStats_.bind(this),Math.floor(Math.random()*2*uE))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Xt||(Xt={}));function Zp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Zc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function eu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Xt.ACK_USER_WRITE,this.source=Zp()}operationForChild(e){if(de(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new Fo(be(),n,this.revert)}}else return O(ge(this.path)===e,"operationForChild called for unrelated child."),new Fo(Le(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){this.source=e,this.path=n,this.type=Xt.LISTEN_COMPLETE}operationForChild(e){return de(this.path)?new Sr(this.source,be()):new Sr(this.source,Le(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Xt.OVERWRITE}operationForChild(e){return de(this.path)?new Os(this.source,be(),this.snap.getImmediateChild(e)):new Os(this.source,Le(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Xt.MERGE}operationForChild(e){if(de(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new Os(this.source,be(),n.value):new xr(this.source,be(),n)}else return O(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xr(this.source,Le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(de(e))return this.isFullyInitialized()&&!this.filtered_;const n=ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function fE(t,e,n,s){const i=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(sE(o.childName,o.snapshotNode))}),Ui(t,i,"child_removed",e,s,n),Ui(t,i,"child_added",e,s,n),Ui(t,i,"child_moved",r,s,n),Ui(t,i,"child_changed",e,s,n),Ui(t,i,"value",e,s,n),i}function Ui(t,e,n,s,i,r){const o=s.filter(a=>a.type===n);o.sort((a,l)=>mE(t,a,l)),o.forEach(a=>{const l=pE(t,a,r);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function pE(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function mE(t,e,n){if(e.childName==null||n.childName==null)throw Ci("Should only compare child_ events.");const s=new le(e.childName,e.snapshotNode),i=new le(n.childName,n.snapshotNode);return t.index_.compare(s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t,e){return{eventCache:t,serverCache:e}}function er(t,e,n,s){return wa(new is(e,n,s),t.serverCache)}function em(t,e,n,s){return wa(t.eventCache,new is(e,n,s))}function Uo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ls(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el;const gE=()=>(el||(el=new St(tb)),el);class Be{constructor(e,n=gE()){this.value=e,this.children=n}static fromObject(e){let n=new Be(null);return Rt(e,(s,i)=>{n=n.set(new Ae(s),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:be(),value:this.value};if(de(e))return null;{const s=ge(e),i=this.children.get(s);if(i!==null){const r=i.findRootMostMatchingPathAndValue(Le(e),n);return r!=null?{path:ot(new Ae(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(de(e))return this;{const n=ge(e),s=this.children.get(n);return s!==null?s.subtree(Le(e)):new Be(null)}}set(e,n){if(de(e))return new Be(n,this.children);{const s=ge(e),r=(this.children.get(s)||new Be(null)).set(Le(e),n),o=this.children.insert(s,r);return new Be(this.value,o)}}remove(e){if(de(e))return this.children.isEmpty()?new Be(null):new Be(null,this.children);{const n=ge(e),s=this.children.get(n);if(s){const i=s.remove(Le(e));let r;return i.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,i),this.value===null&&r.isEmpty()?new Be(null):new Be(this.value,r)}else return this}}get(e){if(de(e))return this.value;{const n=ge(e),s=this.children.get(n);return s?s.get(Le(e)):null}}setTree(e,n){if(de(e))return n;{const s=ge(e),r=(this.children.get(s)||new Be(null)).setTree(Le(e),n);let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),new Be(this.value,o)}}fold(e){return this.fold_(be(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((i,r)=>{s[i]=r.fold_(ot(e,i),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,be(),n)}findOnPath_(e,n,s){const i=this.value?s(n,this.value):!1;if(i)return i;if(de(e))return null;{const r=ge(e),o=this.children.get(r);return o?o.findOnPath_(Le(e),ot(n,r),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,be(),n)}foreachOnPath_(e,n,s){if(de(e))return this;{this.value&&s(n,this.value);const i=ge(e),r=this.children.get(i);return r?r.foreachOnPath_(Le(e),ot(n,i),s):new Be(null)}}foreach(e){this.foreach_(be(),e)}foreach_(e,n){this.children.inorderTraversal((s,i)=>{i.foreach_(ot(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.writeTree_=e}static empty(){return new Zt(new Be(null))}}function tr(t,e,n){if(de(e))return new Zt(new Be(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const i=s.path;let r=s.value;const o=Et(i,e);return r=r.updateChild(o,n),new Zt(t.writeTree_.set(i,r))}else{const i=new Be(n),r=t.writeTree_.setTree(e,i);return new Zt(r)}}}function xh(t,e,n){let s=t;return Rt(n,(i,r)=>{s=tr(s,ot(e,i),r)}),s}function Ph(t,e){if(de(e))return Zt.empty();{const n=t.writeTree_.setTree(e,new Be(null));return new Zt(n)}}function Hl(t,e){return Ds(t,e)!=null}function Ds(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Et(n.path,e)):null}function Rh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ge,(s,i)=>{e.push(new le(s,i))}):t.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&e.push(new le(s,i.value))}),e}function Jn(t,e){if(de(e))return t;{const n=Ds(t,e);return n!=null?new Zt(new Be(n)):new Zt(t.writeTree_.subtree(e))}}function Wl(t){return t.writeTree_.isEmpty()}function mi(t,e){return tm(be(),t.writeTree_,e)}function tm(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((i,r)=>{i===".priority"?(O(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):n=tm(ot(t,i),r,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(ot(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t,e){return rm(e,t)}function _E(t,e,n,s,i){O(s>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:i}),i&&(t.visibleWrites=tr(t.visibleWrites,e,n)),t.lastWriteId=s}function yE(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function vE(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);O(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let i=s.visible,r=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&wE(a,s.path)?i=!1:Qt(s.path,a.path)&&(r=!0)),o--}if(i){if(r)return CE(t),!0;if(s.snap)t.visibleWrites=Ph(t.visibleWrites,s.path);else{const a=s.children;Rt(a,l=>{t.visibleWrites=Ph(t.visibleWrites,ot(s.path,l))})}return!0}else return!1}function wE(t,e){if(t.snap)return Qt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Qt(ot(t.path,n),e))return!0;return!1}function CE(t){t.visibleWrites=nm(t.allWrites,bE,be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function bE(t){return t.visible}function nm(t,e,n){let s=Zt.empty();for(let i=0;i<t.length;++i){const r=t[i];if(e(r)){const o=r.path;let a;if(r.snap)Qt(n,o)?(a=Et(n,o),s=tr(s,a,r.snap)):Qt(o,n)&&(a=Et(o,n),s=tr(s,be(),r.snap.getChild(a)));else if(r.children){if(Qt(n,o))a=Et(n,o),s=xh(s,a,r.children);else if(Qt(o,n))if(a=Et(o,n),de(a))s=xh(s,be(),r.children);else{const l=ci(r.children,ge(a));if(l){const c=l.getChild(Le(a));s=tr(s,be(),c)}}}else throw Ci("WriteRecord should have .snap or .children")}}return s}function sm(t,e,n,s,i){if(!s&&!i){const r=Ds(t.visibleWrites,e);if(r!=null)return r;{const o=Jn(t.visibleWrites,e);if(Wl(o))return n;if(n==null&&!Hl(o,be()))return null;{const a=n||J.EMPTY_NODE;return mi(o,a)}}}else{const r=Jn(t.visibleWrites,e);if(!i&&Wl(r))return n;if(!i&&n==null&&!Hl(r,be()))return null;{const o=function(c){return(c.visible||i)&&(!s||!~s.indexOf(c.writeId))&&(Qt(c.path,e)||Qt(e,c.path))},a=nm(t.allWrites,o,e),l=n||J.EMPTY_NODE;return mi(a,l)}}}function EE(t,e,n){let s=J.EMPTY_NODE;const i=Ds(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ge,(r,o)=>{s=s.updateImmediateChild(r,o)}),s;if(n){const r=Jn(t.visibleWrites,e);return n.forEachChild(Ge,(o,a)=>{const l=mi(Jn(r,new Ae(o)),a);s=s.updateImmediateChild(o,l)}),Rh(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const r=Jn(t.visibleWrites,e);return Rh(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function TE(t,e,n,s,i){O(s||i,"Either existingEventSnap or existingServerSnap must exist");const r=ot(e,n);if(Hl(t.visibleWrites,r))return null;{const o=Jn(t.visibleWrites,r);return Wl(o)?i.getChild(n):mi(o,i.getChild(n))}}function kE(t,e,n,s){const i=ot(e,n),r=Ds(t.visibleWrites,i);if(r!=null)return r;if(s.isCompleteForChild(n)){const o=Jn(t.visibleWrites,i);return mi(o,s.getNode().getImmediateChild(n))}else return null}function IE(t,e){return Ds(t.visibleWrites,e)}function SE(t,e,n,s,i,r,o){let a;const l=Jn(t.visibleWrites,e),c=Ds(l,be());if(c!=null)a=c;else if(n!=null)a=mi(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=r?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=h.getNext();for(;m&&u.length<i;)d(m,s)!==0&&u.push(m),m=h.getNext();return u}else return[]}function xE(){return{visibleWrites:Zt.empty(),allWrites:[],lastWriteId:-1}}function Vo(t,e,n,s){return sm(t.writeTree,t.treePath,e,n,s)}function tu(t,e){return EE(t.writeTree,t.treePath,e)}function Mh(t,e,n,s){return TE(t.writeTree,t.treePath,e,n,s)}function Bo(t,e){return IE(t.writeTree,ot(t.treePath,e))}function PE(t,e,n,s,i,r){return SE(t.writeTree,t.treePath,e,n,s,i,r)}function nu(t,e,n){return kE(t.writeTree,t.treePath,e,n)}function im(t,e){return rm(ot(t.treePath,e),t.writeTree)}function rm(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;O(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),O(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const r=i.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(s,kr(s,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(s,Tr(s,i.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(s,pi(s,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(s,kr(s,e.snapshotNode,i.oldSnap));else throw Ci("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const om=new ME;class su{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new is(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nu(this.writes_,e,s)}}getChildAfterChild(e,n,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ls(this.viewCache_),r=PE(this.writes_,i,n,1,s,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){return{filter:t}}function OE(t,e){O(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function LE(t,e,n,s,i){const r=new RE;let o,a;if(n.type===Xt.OVERWRITE){const c=n;c.source.fromUser?o=jl(t,e,c.path,c.snap,s,i,r):(O(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!de(c.path),o=zo(t,e,c.path,c.snap,s,i,a,r))}else if(n.type===Xt.MERGE){const c=n;c.source.fromUser?o=DE(t,e,c.path,c.children,s,i,r):(O(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=ql(t,e,c.path,c.children,s,i,a,r))}else if(n.type===Xt.ACK_USER_WRITE){const c=n;c.revert?o=UE(t,e,c.path,s,i,r):o=$E(t,e,c.path,c.affectedTree,s,i,r)}else if(n.type===Xt.LISTEN_COMPLETE)o=FE(t,e,n.path,s,r);else throw Ci("Unknown operation type: "+n.type);const l=r.getChanges();return NE(e,o,l),{viewCache:o,changes:l}}function NE(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=Uo(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&n.push(Xp(Uo(e)))}}function am(t,e,n,s,i,r){const o=e.eventCache;if(Bo(s,n)!=null)return e;{let a,l;if(de(n))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ls(e),u=c instanceof J?c:J.EMPTY_NODE,d=tu(s,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,r)}else{const c=Vo(s,Ls(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=ge(n);if(c===".priority"){O(ss(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=Mh(s,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Le(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=Mh(s,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=nu(s,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,i,r):a=o.getNode()}}return er(e,a,o.isFullyInitialized()||de(n),t.filter.filtersNodes())}}function zo(t,e,n,s,i,r,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(de(n))c=u.updateFullNode(l.getNode(),s,null);else if(u.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);c=u.updateFullNode(l.getNode(),m,null)}else{const m=ge(n);if(!l.isCompleteForPath(n)&&ss(n)>1)return e;const g=Le(n),M=l.getNode().getImmediateChild(m).updateChild(g,s);m===".priority"?c=u.updatePriority(l.getNode(),M):c=u.updateChild(l.getNode(),m,M,g,om,null)}const d=em(e,c,l.isFullyInitialized()||de(n),u.filtersNodes()),h=new su(i,d,r);return am(t,d,n,i,h,a)}function jl(t,e,n,s,i,r,o){const a=e.eventCache;let l,c;const u=new su(i,e,r);if(de(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=er(e,c,!0,t.filter.filtersNodes());else{const d=ge(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),l=er(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Le(n),m=a.getNode().getImmediateChild(d);let g;if(de(h))g=s;else{const w=u.getCompleteChild(d);w!=null?Bp(h)===".priority"&&w.getChild(Hp(h)).isEmpty()?g=w:g=w.updateChild(h,s):g=J.EMPTY_NODE}if(m.equals(g))l=e;else{const w=t.filter.updateChild(a.getNode(),d,g,h,u,o);l=er(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Ah(t,e){return t.eventCache.isCompleteForChild(e)}function DE(t,e,n,s,i,r,o){let a=e;return s.foreach((l,c)=>{const u=ot(n,l);Ah(e,ge(u))&&(a=jl(t,a,u,c,i,r,o))}),s.foreach((l,c)=>{const u=ot(n,l);Ah(e,ge(u))||(a=jl(t,a,u,c,i,r,o))}),a}function Oh(t,e,n){return n.foreach((s,i)=>{e=e.updateChild(s,i)}),e}function ql(t,e,n,s,i,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;de(n)?c=s:c=new Be(null).setTree(n,s);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),g=Oh(t,m,h);l=zo(t,l,new Ae(d),g,i,r,o,a)}}),c.children.inorderTraversal((d,h)=>{const m=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!m){const g=e.serverCache.getNode().getImmediateChild(d),w=Oh(t,g,h);l=zo(t,l,new Ae(d),w,i,r,o,a)}}),l}function $E(t,e,n,s,i,r,o){if(Bo(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(de(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return zo(t,e,n,l.getNode().getChild(n),i,r,a,o);if(de(n)){let c=new Be(null);return l.getNode().forEachChild(ni,(u,d)=>{c=c.set(new Ae(u),d)}),ql(t,e,n,c,i,r,a,o)}else return e}else{let c=new Be(null);return s.foreach((u,d)=>{const h=ot(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),ql(t,e,n,c,i,r,a,o)}}function FE(t,e,n,s,i){const r=e.serverCache,o=em(e,r.getNode(),r.isFullyInitialized()||de(n),r.isFiltered());return am(t,o,n,s,om,i)}function UE(t,e,n,s,i,r){let o;if(Bo(s,n)!=null)return e;{const a=new su(s,e,i),l=e.eventCache.getNode();let c;if(de(n)||ge(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Vo(s,Ls(e));else{const d=e.serverCache.getNode();O(d instanceof J,"serverChildren would be complete if leaf node"),u=tu(s,d)}u=u,c=t.filter.updateFullNode(l,u,r)}else{const u=ge(n);let d=nu(s,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,Le(n),a,r):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,J.EMPTY_NODE,Le(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Vo(s,Ls(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||Bo(s,be())!=null,er(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,i=new Xc(s.getIndex()),r=rE(s);this.processor_=AE(r);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(J.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(J.EMPTY_NODE,a.getNode(),null),u=new is(l,o.isFullyInitialized(),i.filtersNodes()),d=new is(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=wa(d,u),this.eventGenerator_=new hE(this.query_)}get query(){return this.query_}}function BE(t){return t.viewCache_.serverCache.getNode()}function zE(t){return Uo(t.viewCache_)}function HE(t,e){const n=Ls(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!de(e)&&!n.getImmediateChild(ge(e)).isEmpty())?n.getChild(e):null}function Lh(t){return t.eventRegistrations_.length===0}function WE(t,e){t.eventRegistrations_.push(e)}function Nh(t,e,n){const s=[];if(n){O(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,i);o&&s.push(o)})}if(e){let i=[];for(let r=0;r<t.eventRegistrations_.length;++r){const o=t.eventRegistrations_[r];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return s}function Dh(t,e,n,s){e.type===Xt.MERGE&&e.source.queryId!==null&&(O(Ls(t.viewCache_),"We should always have a full cache before handling merges"),O(Uo(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,r=LE(t.processor_,i,e,n,s);return OE(t.processor_,r.viewCache),O(r.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,lm(t,r.changes,r.viewCache.eventCache.getNode(),null)}function jE(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ge,(r,o)=>{s.push(pi(r,o))}),n.isFullyInitialized()&&s.push(Xp(n.getNode())),lm(t,s,n.getNode(),e)}function lm(t,e,n,s){const i=s?[s]:t.eventRegistrations_;return fE(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho;class cm{constructor(){this.views=new Map}}function qE(t){O(!Ho,"__referenceConstructor has already been defined"),Ho=t}function GE(){return O(Ho,"Reference.ts has not been loaded"),Ho}function KE(t){return t.views.size===0}function iu(t,e,n,s){const i=e.source.queryId;if(i!==null){const r=t.views.get(i);return O(r!=null,"SyncTree gave us an op for an invalid query."),Dh(r,e,n,s)}else{let r=[];for(const o of t.views.values())r=r.concat(Dh(o,e,n,s));return r}}function um(t,e,n,s,i){const r=e._queryIdentifier,o=t.views.get(r);if(!o){let a=Vo(n,i?s:null),l=!1;a?l=!0:s instanceof J?(a=tu(n,s),l=!1):(a=J.EMPTY_NODE,l=!1);const c=wa(new is(a,l,!1),new is(s,i,!1));return new VE(e,c)}return o}function YE(t,e,n,s,i,r){const o=um(t,e,s,i,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),WE(o,n),jE(o,n)}function QE(t,e,n,s){const i=e._queryIdentifier,r=[];let o=[];const a=rs(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(Nh(c,n,s)),Lh(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(Nh(l,n,s)),Lh(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!rs(t)&&r.push(new(GE())(e._repo,e._path)),{removed:r,events:o}}function dm(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Zn(t,e){let n=null;for(const s of t.views.values())n=n||HE(s,e);return n}function hm(t,e){if(e._queryParams.loadsAllData())return ba(t);{const s=e._queryIdentifier;return t.views.get(s)}}function fm(t,e){return hm(t,e)!=null}function rs(t){return ba(t)!=null}function ba(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo;function XE(t){O(!Wo,"__referenceConstructor has already been defined"),Wo=t}function JE(){return O(Wo,"Reference.ts has not been loaded"),Wo}let ZE=1;class $h{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Be(null),this.pendingWriteTree_=xE(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pm(t,e,n,s,i){return _E(t.pendingWriteTree_,e,n,s,i),i?Br(t,new Os(Zp(),e,n)):[]}function ws(t,e,n=!1){const s=yE(t.pendingWriteTree_,e);if(vE(t.pendingWriteTree_,e)){let r=new Be(null);return s.snap!=null?r=r.set(be(),!0):Rt(s.children,o=>{r=r.set(new Ae(o),!0)}),Br(t,new Fo(s.path,r,n))}else return[]}function Vr(t,e,n){return Br(t,new Os(Zc(),e,n))}function eT(t,e,n){const s=Be.fromObject(n);return Br(t,new xr(Zc(),e,s))}function tT(t,e){return Br(t,new Sr(Zc(),e))}function nT(t,e,n){const s=ou(t,n);if(s){const i=au(s),r=i.path,o=i.queryId,a=Et(r,e),l=new Sr(eu(o),a);return lu(t,r,l)}else return[]}function mm(t,e,n,s,i=!1){const r=e._path,o=t.syncPointTree_.get(r);let a=[];if(o&&(e._queryIdentifier==="default"||fm(o,e))){const l=QE(o,e,n,s);KE(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(r,(h,m)=>rs(m));if(u&&!d){const h=t.syncPointTree_.subtree(r);if(!h.isEmpty()){const m=oT(h);for(let g=0;g<m.length;++g){const w=m[g],M=w.query,P=vm(t,w);t.listenProvider_.startListening(nr(M),Pr(t,M),P.hashFn,P.onComplete)}}}!d&&c.length>0&&!s&&(u?t.listenProvider_.stopListening(nr(e),null):c.forEach(h=>{const m=t.queryToTagMap.get(Ea(h));t.listenProvider_.stopListening(nr(h),m)}))}aT(t,c)}return a}function gm(t,e,n,s){const i=ou(t,s);if(i!=null){const r=au(i),o=r.path,a=r.queryId,l=Et(o,e),c=new Os(eu(a),l,n);return lu(t,o,c)}else return[]}function sT(t,e,n,s){const i=ou(t,s);if(i){const r=au(i),o=r.path,a=r.queryId,l=Et(o,e),c=Be.fromObject(n),u=new xr(eu(a),l,c);return lu(t,o,u)}else return[]}function iT(t,e,n,s=!1){const i=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,m)=>{const g=Et(h,i);r=r||Zn(m,g),o=o||rs(m)});let a=t.syncPointTree_.get(i);a?(o=o||rs(a),r=r||Zn(a,be())):(a=new cm,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;r!=null?l=!0:(l=!1,r=J.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((m,g)=>{const w=Zn(g,be());w&&(r=r.updateImmediateChild(m,w))}));const c=fm(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=Ea(e);O(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const m=lT();t.queryToTagMap.set(h,m),t.tagToQueryMap.set(m,h)}const u=Ca(t.pendingWriteTree_,i);let d=YE(a,e,n,u,r,l);if(!c&&!o&&!s){const h=hm(a,e);d=d.concat(cT(t,e,h))}return d}function ru(t,e,n){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Et(o,e),c=Zn(a,l);if(c)return c});return sm(i,e,r,n,!0)}function rT(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const d=Et(c,n);s=s||Zn(u,d)});let i=t.syncPointTree_.get(n);i?s=s||Zn(i,be()):(i=new cm,t.syncPointTree_=t.syncPointTree_.set(n,i));const r=s!=null,o=r?new is(s,!0,!1):null,a=Ca(t.pendingWriteTree_,e._path),l=um(i,e,a,r?o.getNode():J.EMPTY_NODE,r);return zE(l)}function Br(t,e){return _m(e,t.syncPointTree_,null,Ca(t.pendingWriteTree_,be()))}function _m(t,e,n,s){if(de(t.path))return ym(t,e,n,s);{const i=e.get(be());n==null&&i!=null&&(n=Zn(i,be()));let r=[];const o=ge(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=im(s,o);r=r.concat(_m(a,l,c,u))}return i&&(r=r.concat(iu(i,t,s,n))),r}}function ym(t,e,n,s){const i=e.get(be());n==null&&i!=null&&(n=Zn(i,be()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=im(s,o),u=t.operationForChild(o);u&&(r=r.concat(ym(u,a,l,c)))}),i&&(r=r.concat(iu(i,t,s,n))),r}function vm(t,e){const n=e.query,s=Pr(t,n);return{hashFn:()=>(BE(e)||J.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return s?nT(t,n._path,s):tT(t,n._path);{const r=ib(i,n);return mm(t,n,null,r)}}}}function Pr(t,e){const n=Ea(e);return t.queryToTagMap.get(n)}function Ea(t){return t._path.toString()+"$"+t._queryIdentifier}function ou(t,e){return t.tagToQueryMap.get(e)}function au(t){const e=t.indexOf("$");return O(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function lu(t,e,n){const s=t.syncPointTree_.get(e);O(s,"Missing sync point for query tag that we're tracking");const i=Ca(t.pendingWriteTree_,e);return iu(s,n,i,null)}function oT(t){return t.fold((e,n,s)=>{if(n&&rs(n))return[ba(n)];{let i=[];return n&&(i=dm(n)),Rt(s,(r,o)=>{i=i.concat(o)}),i}})}function nr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(JE())(t._repo,t._path):t}function aT(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const i=Ea(s),r=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(r)}}}function lT(){return ZE++}function cT(t,e,n){const s=e._path,i=Pr(t,e),r=vm(t,n),o=t.listenProvider_.startListening(nr(e),i,r.hashFn,r.onComplete),a=t.syncPointTree_.subtree(s);if(i)O(!rs(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!de(c)&&u&&rs(u))return[ba(u).query];{let h=[];return u&&(h=h.concat(dm(u).map(m=>m.query))),Rt(d,(m,g)=>{h=h.concat(g)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(nr(u),Pr(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new cu(n)}node(){return this.node_}}class uu{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ot(this.path_,e);return new uu(this.syncTree_,n)}node(){return ru(this.syncTree_,this.path_)}}const uT=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Fh=function(t,e,n){if(!t||typeof t!="object")return t;if(O(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return dT(t[".sv"],e,n);if(typeof t[".sv"]=="object")return hT(t[".sv"],e);O(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},dT=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:O(!1,"Unexpected server value: "+t)}},hT=function(t,e,n){t.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&O(!1,"Unexpected increment value: "+s);const i=e.node();if(O(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const o=i.getValue();return typeof o!="number"?s:o+s},fT=function(t,e,n,s){return du(e,new uu(n,t),s)},wm=function(t,e,n){return du(t,new cu(e),n)};function du(t,e,n){const s=t.getPriority().val(),i=Fh(s,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=Fh(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new lt(a,ut(i)):t}else{const o=t;return r=o,i!==o.getPriority().val()&&(r=r.updatePriority(new lt(i))),o.forEachChild(Ge,(a,l)=>{const c=du(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function fu(t,e){let n=e instanceof Ae?e:new Ae(e),s=t,i=ge(n);for(;i!==null;){const r=ci(s.node.children,i)||{children:{},childCount:0};s=new hu(i,s,r),n=Le(n),i=ge(n)}return s}function xi(t){return t.node.value}function Cm(t,e){t.node.value=e,Gl(t)}function bm(t){return t.node.childCount>0}function pT(t){return xi(t)===void 0&&!bm(t)}function Ta(t,e){Rt(t.node.children,(n,s)=>{e(new hu(n,t,s))})}function Em(t,e,n,s){n&&!s&&e(t),Ta(t,i=>{Em(i,e,!0,s)}),n&&s&&e(t)}function mT(t,e,n){let s=n?t:t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function zr(t){return new Ae(t.parent===null?t.name:zr(t.parent)+"/"+t.name)}function Gl(t){t.parent!==null&&gT(t.parent,t.name,t)}function gT(t,e,n){const s=pT(n),i=Rn(t.node.children,e);s&&i?(delete t.node.children[e],t.node.childCount--,Gl(t)):!s&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Gl(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=/[\[\].#$\/\u0000-\u001F\u007F]/,yT=/[\[\].#$\u0000-\u001F\u007F]/,tl=10*1024*1024,Tm=function(t){return typeof t=="string"&&t.length!==0&&!_T.test(t)},km=function(t){return typeof t=="string"&&t.length!==0&&!yT.test(t)},vT=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),km(t)},wT=function(t,e,n,s){s&&e===void 0||pu(Rc(t,"value"),e,n)},pu=function(t,e,n){const s=n instanceof Ae?new $b(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+fs(s));if(typeof e=="function")throw new Error(t+"contains a function "+fs(s)+" with contents = "+e.toString());if(wp(e))throw new Error(t+"contains "+e.toString()+" "+fs(s));if(typeof e=="string"&&e.length>tl/3&&da(e)>tl)throw new Error(t+"contains a string greater than "+tl+" utf8 bytes "+fs(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,r=!1;if(Rt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!Tm(o)))throw new Error(t+" contains an invalid key ("+o+") "+fs(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Fb(s,o),pu(t,a,s),Ub(s)}),i&&r)throw new Error(t+' contains ".value" child '+fs(s)+" in addition to actual children.")}},Im=function(t,e,n,s){if(!(s&&n===void 0)&&!km(n))throw new Error(Rc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},CT=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Im(t,e,n,s)},Sm=function(t,e){if(ge(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},bT=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Tm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!vT(n))throw new Error(Rc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xm(t,e){let n=null;for(let s=0;s<e.length;s++){const i=e[s],r=i.getPath();n!==null&&!Wp(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(i)}n&&t.eventLists_.push(n)}function mn(t,e,n){xm(t,n),TT(t,s=>Qt(s,e)||Qt(e,s))}function TT(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const i=t.eventLists_[s];if(i){const r=i.path;e(r)?(kT(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function kT(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Ss&&_t("event: "+n.toString()),Si(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="repo_interrupt",ST=25;class xT{constructor(e,n,s,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ET,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$o(),this.transactionQueueTree_=new hu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function PT(t,e,n){if(t.stats_=Gc(t.repoInfo_),t.forceRestClient_||lb())t.server_=new Do(t.repoInfo_,(s,i,r,o)=>{Uh(t,s,i,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Vh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{rt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Tn(t.repoInfo_,e,(s,i,r,o)=>{Uh(t,s,i,r,o)},s=>{Vh(t,s)},s=>{MT(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=fb(t.repoInfo_,()=>new dE(t.stats_,t.server_)),t.infoData_=new oE,t.infoSyncTree_=new $h({startListening:(s,i,r,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=Vr(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),gu(t,"connected",!1),t.serverSyncTree_=new $h({startListening:(s,i,r,o)=>(t.server_.listen(s,r,i,(a,l)=>{const c=o(a,l);mn(t.eventQueue_,s._path,c)}),[]),stopListening:(s,i)=>{t.server_.unlisten(s,i)}})}function RT(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function mu(t){return uT({timestamp:RT(t)})}function Uh(t,e,n,s,i){t.dataUpdateCount++;const r=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(s){const l=To(n,c=>ut(c));o=sT(t.serverSyncTree_,r,l,i)}else{const l=ut(n);o=gm(t.serverSyncTree_,r,l,i)}else if(s){const l=To(n,c=>ut(c));o=eT(t.serverSyncTree_,r,l)}else{const l=ut(n);o=Vr(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=Ia(t,r)),mn(t.eventQueue_,a,o)}function Vh(t,e){gu(t,"connected",e),e===!1&&LT(t)}function MT(t,e){Rt(e,(n,s)=>{gu(t,n,s)})}function gu(t,e,n){const s=new Ae("/.info/"+e),i=ut(n);t.infoData_.updateSnapshot(s,i);const r=Vr(t.infoSyncTree_,s,i);mn(t.eventQueue_,s,r)}function Pm(t){return t.nextWriteId_++}function AT(t,e,n){const s=rT(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(i=>{const r=ut(i).withIndex(e._queryParams.getIndex());iT(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Vr(t.serverSyncTree_,e._path,r);else{const a=Pr(t.serverSyncTree_,e);o=gm(t.serverSyncTree_,e._path,r,a)}return mn(t.eventQueue_,e._path,o),mm(t.serverSyncTree_,e,n,null,!0),r},i=>(ka(t,"get for query "+rt(e)+" failed: "+i),Promise.reject(new Error(i))))}function OT(t,e,n,s,i){ka(t,"set",{path:e.toString(),value:n,priority:s});const r=mu(t),o=ut(n,s),a=ru(t.serverSyncTree_,e),l=wm(o,a,r),c=Pm(t),u=pm(t.serverSyncTree_,e,l,c,!0);xm(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,m)=>{const g=h==="ok";g||xt("set at "+e+" failed: "+h);const w=ws(t.serverSyncTree_,c,!g);mn(t.eventQueue_,e,w),DT(t,i,h,m)});const d=Lm(t,e);Ia(t,d),mn(t.eventQueue_,d,[])}function LT(t){ka(t,"onDisconnectEvents");const e=mu(t),n=$o();zl(t.onDisconnect_,be(),(i,r)=>{const o=fT(i,r,t.serverSyncTree_,e);Jp(n,i,o)});let s=[];zl(n,be(),(i,r)=>{s=s.concat(Vr(t.serverSyncTree_,i,r));const o=Lm(t,i);Ia(t,o)}),t.onDisconnect_=$o(),mn(t.eventQueue_,be(),s)}function NT(t){t.persistentConnection_&&t.persistentConnection_.interrupt(IT)}function ka(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_t(n,...e)}function DT(t,e,n,s){e&&Si(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let r=i;s&&(r+=": "+s);const o=new Error(r);o.code=i,e(o)}})}function Rm(t,e,n){return ru(t.serverSyncTree_,e,n)||J.EMPTY_NODE}function _u(t,e=t.transactionQueueTree_){if(e||Sa(t,e),xi(e)){const n=Am(t,e);O(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&$T(t,zr(e),n)}else bm(e)&&Ta(e,n=>{_u(t,n)})}function $T(t,e,n){const s=n.map(c=>c.currentWriteId),i=Rm(t,e,s);let r=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];O(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Et(e,u.path);r=r.updateChild(d,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{ka(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(ws(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Sa(t,fu(t.transactionQueueTree_,e)),_u(t,t.transactionQueueTree_),mn(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Si(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{xt("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Ia(t,e)}},o)}function Ia(t,e){const n=Mm(t,e),s=zr(n),i=Am(t,n);return FT(t,i,s),s}function FT(t,e,n){if(e.length===0)return;const s=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Et(n,l.path);let u=!1,d;if(O(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(ws(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=ST)u=!0,d="maxretry",i=i.concat(ws(t.serverSyncTree_,l.currentWriteId,!0));else{const h=Rm(t,l.path,o);l.currentInputSnapshot=h;const m=e[a].update(h.val());if(m!==void 0){pu("transaction failed: Data returned ",m,l.path);let g=ut(m);typeof m=="object"&&m!=null&&Rn(m,".priority")||(g=g.updatePriority(h.getPriority()));const M=l.currentWriteId,P=mu(t),L=wm(g,h,P);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=L,l.currentWriteId=Pm(t),o.splice(o.indexOf(M),1),i=i.concat(pm(t.serverSyncTree_,l.path,L,l.currentWriteId,l.applyLocally)),i=i.concat(ws(t.serverSyncTree_,M,!0))}else u=!0,d="nodata",i=i.concat(ws(t.serverSyncTree_,l.currentWriteId,!0))}mn(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(d),!1,null))))}Sa(t,t.transactionQueueTree_);for(let a=0;a<s.length;a++)Si(s[a]);_u(t,t.transactionQueueTree_)}function Mm(t,e){let n,s=t.transactionQueueTree_;for(n=ge(e);n!==null&&xi(s)===void 0;)s=fu(s,n),e=Le(e),n=ge(e);return s}function Am(t,e){const n=[];return Om(t,e,n),n.sort((s,i)=>s.order-i.order),n}function Om(t,e,n){const s=xi(e);if(s)for(let i=0;i<s.length;i++)n.push(s[i]);Ta(e,i=>{Om(t,i,n)})}function Sa(t,e){const n=xi(e);if(n){let s=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[s]=n[i],s++);n.length=s,Cm(e,n.length>0?n:void 0)}Ta(e,s=>{Sa(t,s)})}function Lm(t,e){const n=zr(Mm(t,e)),s=fu(t.transactionQueueTree_,e);return mT(s,i=>{nl(t,i)}),nl(t,s),Em(s,i=>{nl(t,i)}),n}function nl(t,e){const n=xi(e);if(n){const s=[];let i=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(O(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(O(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ws(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?Cm(e,void 0):n.length=r+1,mn(t.eventQueue_,zr(e),i);for(let o=0;o<s.length;o++)Si(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let i=n[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function VT(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):xt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Bh=function(t,e){const n=BT(t),s=n.namespace;n.domain==="firebase.com"&&Sn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Sn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ZC();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ap(n.host,n.secure,s,i,e,"",s!==n.subdomain),path:new Ae(n.pathString)}},BT=function(t){let e="",n="",s="",i="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=UT(t.substring(u,d)));const h=VT(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const g=e.indexOf(".");s=e.substring(0,g).toLowerCase(),n=e.substring(g+1),r=s}"ns"in h&&(r=h.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:i,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,s,i){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+rt(this.snapshot.exportVal())}}class HT{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return O(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,s,i){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=i}get key(){return de(this._path)?null:Bp(this._path)}get ref(){return new Mn(this._repo,this._path)}get _queryIdentifier(){const e=Ih(this._queryParams),n=jc(e);return n==="{}"?"default":n}get _queryObject(){return Ih(this._queryParams)}isEqual(e){if(e=Mt(e),!(e instanceof yu))return!1;const n=this._repo===e._repo,s=Wp(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Db(this._path)}}class Mn extends yu{constructor(e,n){super(e,n,new Jc,!1)}get parent(){const e=Hp(this._path);return e===null?null:new Mn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Rr{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ae(e),s=Kl(this.ref,e);return new Rr(this._node.getChild(n),s,Ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,i)=>e(new Rr(i,Kl(this.ref,s),Ge)))}hasChild(e){const n=new Ae(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vu(t,e){return t=Mt(t),t._checkNotDeleted("ref"),e!==void 0?Kl(t._root,e):t._root}function Kl(t,e){return t=Mt(t),ge(t._path)===null?CT("child","path",e,!1):Im("child","path",e,!1),new Mn(t._repo,ot(t._path,e))}function jT(t){return Sm("remove",t._path),Nm(t,null)}function Nm(t,e){t=Mt(t),Sm("set",t._path),wT("set",e,t._path,!1);const n=new ua;return OT(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function qT(t){t=Mt(t);const e=new WT(()=>{}),n=new wu(e);return AT(t._repo,t,n).then(s=>new Rr(s,new Mn(t._repo,t._path),t._queryParams.getIndex()))}class wu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new zT("value",this,new Rr(e.snapshotNode,new Mn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new HT(this,e,n):null}matches(e){return e instanceof wu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}qE(Mn);XE(Mn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="FIREBASE_DATABASE_EMULATOR_HOST",Yl={};let KT=!1;function YT(t,e,n,s){t.repoInfo_=new Ap(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),s&&(t.authTokenProvider_=s)}function QT(t,e,n,s,i){let r=s||t.options.databaseURL;r===void 0&&(t.options.projectId||Sn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Bh(r,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[GT]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=Bh(r,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new ti(ti.OWNER):new ub(t.name,t.options,e);bT("Invalid Firebase Database URL",o),de(o.path)||Sn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=JT(a,t,u,new cb(t.name,n));return new ZT(d,t)}function XT(t,e){const n=Yl[e];(!n||n[t.key]!==t)&&Sn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),NT(t),delete n[t.key]}function JT(t,e,n,s){let i=Yl[e.name];i||(i={},Yl[e.name]=i);let r=i[t.toURLString()];return r&&Sn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new xT(t,KT,n,s),i[t.toURLString()]=r,r}class ZT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(PT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Mn(this._repo,be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Sn("Cannot call "+e+" on a deleted database.")}}function ek(t=A1(),e){const n=Oc(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=Qy("database");s&&tk(n,...s)}return n}function tk(t,e,n,s={}){t=Mt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Sn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let r;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&Sn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new ti(ti.OWNER);else if(s.mockUserToken){const o=typeof s.mockUserToken=="string"?s.mockUserToken:Xy(s.mockUserToken,t.app.options.projectId);r=new ti(o)}YT(i,e,n,r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){KC(Ei),ui(new Ps("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return QT(s,i,r,n)},"PUBLIC").setMultipleInstances(!0)),Xn(ch,uh,t),Xn(ch,uh,"esm2017")}Tn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Tn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};nk();const Cu=ek(N1),Dm=[];function sk(t){return t instanceof Set?Array.from(t):t}const ik=async t=>(await qT(vu(Cu,t))).val(),rk=async(t,e)=>{Nm(vu(Cu,t),e)},ok=async t=>{if(!(!ya.value||!Hc.value))return await jT(vu(Cu,t))},to=async(t,e)=>{En(t,n=>{ya.value&&Hc.value&&rk(`users/${Wc.value.uid}/game-data/tileswap-naenae/${e}/`,sk(n))},{deep:!0}),Dm.push({observable:t,path:e})};class Dt{constructor(e,n){if(this.constructor==Dt)throw new Error("FiniteFieldElement is an abstract class and cannot be instantiated. Use FiniteFieldValue or FiniteFieldPolynomial instead.");if(typeof e!="number")throw new Error("Value must be a number");if(!(n instanceof tt))throw new Error("Field must be an instance of FiniteField");this.value=e,this.field=n}inverse(){throw new Error("Method inverse not implemented in "+this.constructor.name)}opposite(){throw new Error("Method opposite not implemented in "+this.constructor.name)}add(e){throw new Error("Method add not implemented in "+this.constructor.name)}subtract(e){throw new Error("Method subtract not implemented in "+this.constructor.name)}multiply(e){throw new Error("Method multiply not implemented in "+this.constructor.name)}divide(e){throw new Error("Method divide not implemented in "+this.constructor.name)}pow(e){throw new Error("Method pow not implemented in "+this.constructor.name)}sqrt(){throw new Error("Method sqrt not implemented in "+this.constructor.name)}abs(){throw new Error("Method abs not implemented in "+this.constructor.name)}equals(e){throw new Error("Method equals not implemented in "+this.constructor.name)}copy(){throw new Error("Method copy not implemented in "+this.constructor.name)}}var ii,ho;class ak extends Dt{constructor(n,s){if(typeof n!="number")throw new Error("Value must be a number");if(!(s instanceof tt))throw new Error("Field must be an instance of FiniteField");if(!tt.isPrime(s.order))throw new Error("Field must be a prime field");super(tt.mod(n,s.order),s);jr(this,ii)}inverse(){if(this.value===0)throw new Error("Cannot divide by zero");return this.pow(this.field.order-2)}opposite(){return this.field.el(-this.value)}add(n){return An(this,ii,ho).call(this,n,(s,i)=>s.value+i.value)}multiply(n){return An(this,ii,ho).call(this,n,(s,i)=>s.value*i.value)}subtract(n){return this.add(n.opposite())}divide(n){return this.multiply(n.inverse())}pow(n){if(n===0)return this.field.el(1);if(n===1)return this.copy();if(n<0)return this.inverse().pow(-n);let s=this;for(let i=1;i<n;i++)s=s.multiply(this);return s}sqrt(){if(this.value===0)return this.field.el(0);if(this.value===1)return this.field.el(1);let n=1;for(;n<this.field.order;){if(n*n%this.field.order===this.value)return this.field.el(n);n++}throw new Error("Element has no square root")}abs(){return this.field.el(this.value===0?0:1)}equals(n){if(n instanceof Dt){if(n.field.order!==this.field.order)throw new Error("Cannot compare two numbers in different fields");return this.value===n.value}return this.value===n}toString(){return`${this.value} (mod ${this.field.order})`}[void 0](){return this.toString()}copy(){return this.field.el(this.value)}}ii=new WeakSet,ho=function(n,s){if(n instanceof Dt){if(n.field.order!==this.field.order)throw new Error("Cannot add two numbers in different fields");return this.field.el(s(this,n))}return An(this,ii,ho).call(this,this.field.el(n),s)};class lk extends Dt{constructor(e,n){if(typeof e!="number")throw new Error("Value must be a number");if(!(n instanceof tt))throw new Error("Field must be an instance of FiniteField");if(tt.isPrime(n.order))throw new Error("Field must not be a prime field");super(e,n)}inverse(){if(this.value===0)throw new Error("Cannot divide by zero");return this.field.el(this.field.multiplicationTable[this.value].findIndex(e=>e===1))}opposite(){return this.field.el(this.field.additionTable[this.value].findIndex(e=>e===0))}add(e){return this.field.el(this.field.additionTable[this.value][e.value])}multiply(e){return this.field.el(this.field.multiplicationTable[this.value][e.value])}subtract(e){return this.add(e.opposite())}divide(e){return this.multiply(e.inverse())}abs(){return this.field.el(this.value===0?0:1)}pow(e){if(e===0)return this.field.el(1);if(e===1)return this.copy();if(e<0)return this.inverse().pow(-e);let n=this;for(let s=1;s<e;s++)n=n.multiply(this);return n}equals(e){if(e instanceof Dt){if(e.field.order!==this.field.order)throw new Error("Cannot compare two numbers in different fields");return this.value===e.value}return this.value===e}toString(){return`[${this.value}]`}[void 0](){return this.toString()}copy(){return this.field.el(this.value)}}var bs,Es,ji;const ue=class ue{constructor(e,n){jr(this,Es);if(this.field=n,this.width=e[0]?e[0].length:0,this.height=e.length,!e.every(s=>s.length===this.width))throw new Error("All rows must have the same length");this.matrix=e.map(s=>s.map(i=>{if(i instanceof Dt){if(i.field.order!==n.order)throw new Error("Cannot create matrix with elements from different fields");return i}return n.el(i)}))}isSquare(){return this.width===this.height}isSymmetric(){if(!this.isSquare())return!1;for(let e=0;e<this.height;e++)for(let n=0;n<e;n++)if(!this.matrix[e][n].equals(this.matrix[n][e]))return!1;return!0}transpose(){const e=[];for(let n=0;n<this.width;n++){const s=[];for(let i=0;i<this.height;i++)s.push(this.matrix[i][n]);e.push(s)}return new ue(e,this.field)}multiply(e){if(typeof e=="number"||e instanceof Dt)return e=this.field.el(e),ue.from2DArray(this.matrix.map(n=>n.map(s=>s.multiply(e))),this.field);if(e instanceof ue){if(this.width!==e.height)throw new Error("Cannot multiply matrices with incompatible dimensions");const n=[];for(let s=0;s<this.height;s++){const i=[];for(let r=0;r<e.width;r++){let o=this.field.el(0);for(let a=0;a<this.width;a++)o=o.add(this.matrix[s][a].multiply(e.matrix[a][r]));i.push(o)}n.push(i)}return ue.from2DArray(n,this.field)}throw new Error("Cannot multiply matrix by non-scalar")}add(e){if(e instanceof Dt||typeof e=="number")return e=this.field.el(e),new ue(this.matrix.map(n=>n.map(s=>s.add(e))),this.field);if(e instanceof ue){if(this.width!==e.width||this.height!==e.height)throw new Error("Cannot add matrices with incompatible dimensions");return new ue(this.matrix.map((n,s)=>n.map((i,r)=>i.add(e.matrix[s][r]))),this.field)}throw new Error("Cannot add matrix to non-scalar")}pow(e){if(!this.isSquare())throw new Error("Cannot raise non-square matrix to a power");if(e===0)return ue.identity(this.width,this.field);if(e===1)return this;if(e<0)return this.inverse().pow(-e);let n=this;for(let s=1;s<e;s++)n=n.multiply(this);return n}opposite(){return new ue(this.matrix.map(e=>e.map(n=>n.opposite())),this.field)}subtract(e){if(e instanceof ue){if(this.width!==e.width||this.height!==e.height)throw new Error("Cannot subtract matrices with incompatible dimensions");return this.add(e.opposite())}throw new Error("Cannot subtract non-matrix from matrix")}determinant(){if(!this.isSquare())throw new Error("Cannot calculate determinant of non-square matrix");const e=`${this.field.order},${this.width},${this.matrix.map(s=>s.map(i=>i.value).join(",")).join("|")}`;if(Ai(ue,bs).has(e))return Ai(ue,bs).get(e);if(this.width===1)return this.matrix[0][0];if(this.width===2)return this.matrix[0][0].multiply(this.matrix[1][1]).subtract(this.matrix[0][1].multiply(this.matrix[1][0]));if(this.width<=5){let s=this.field.el(0);for(let i=0;i<this.width;i++){const r=An(this,Es,ji).call(this,0,i),o=this.matrix[0][i].multiply(r.determinant());i%2===1?s=s.subtract(o):s=s.add(o)}return Ai(ue,bs).set(e,s),s}const n=this.PLUDeterminant();return Ai(ue,bs).set(e,n),n}inverse(){if(!this.isSquare())throw new Error("Cannot invert non-square matrix");const e=this.determinant();if(e.equals(0))throw new Error("Cannot invert singular matrix");return this.width<=5?this.adjugate().multiply(e.inverse()):this.gaussianInverse()}gaussianInverse(){var r;const e=ue.identity(this.width,this.field),s=ue.from2DArray(this.matrix.map((o,a)=>o.concat(e.matrix[a])),this.field).reducedRowEchelonForm();return An(r=s,Es,ji).call(r,[],new Array(this.width).fill().map((o,a)=>a))}pseudoInverse(){const{A:e,B:n}=this.rankFactorization();return n.transpose().multiply(n.multiply(n.transpose()).inverse()).multiply(e.transpose().multiply(e).inverse()).multiply(e.transpose())}adjugate(){if(!this.isSquare())throw new Error("Cannot calculate adjugate of non-square matrix");if(this.width===1)return ue.identity(1,this.field);const e=[];for(let n=0;n<this.height;n++){const s=[];for(let i=0;i<this.width;i++){const o=An(this,Es,ji).call(this,n,i).determinant();(n+i)%2===1?s.push(o.opposite()):s.push(o)}e.push(s)}return new ue(e,this.field).transpose()}reducedRowEchelonForm(){function e(l,c,u){for(let d=0;d<l[c].length;d++)l[c][d]=l[c][d].multiply(u)}function n(l,c,u,d){for(let h=0;h<l[c].length;h++)l[c][h]=l[c][h].add(l[u][h].multiply(d))}function s(l,c,u){for(let d=u;d<l.length;d++)if(!l[d][c].equals(0))return d;return-1}const i=this.matrix.map(l=>l.slice());let r=i.length,o=i[0].length,a=0;for(let l=0;l<r;l++){if(a>=o)return ue.from2DArray(i,this.field);let c=s(i,a,l);if(c===-1){a++,l--;continue}let u=i[c];i[c]=i[l],i[l]=u;let d=i[l][a];e(i,l,d.inverse());for(let h=0;h<r;h++)if(h!==l){let m=i[h][a].opposite();n(i,h,l,m)}a++}return ue.from2DArray(i,this.field)}rankFactorization(){const e=this.reducedRowEchelonForm(),n=ue.from2DArray(e.matrix.filter((o,a)=>!o.every(l=>l.equals(0))||a===0),this.field),s=[];let i=0;for(let o=0;o<e.width;o++){let a=-1;for(let l=e.height-1;l>=0;l--)if(!e.matrix[l][o].equals(0)){a=l;break}a>=i?i=a+1:s.push(o)}return{A:An(this,Es,ji).call(this,[],s),B:n}}PLUFactorization(){const e=this.copy().matrix,n=this.width,s=new Array(n+1).fill().map((i,r)=>r);for(let i=0;i<n;i++){let r=this.field.el(0),o=i;for(let a=i;a<n;a++){const l=e[a][i].abs();l.value>r.value&&(r=l,o=a)}if(o!==i){const a=s[i];s[i]=s[o],s[o]=a,[e[i],e[o]]=[e[o],e[i]],s[n]++}for(let a=i+1;a<n;a++){e[i][i].equals(0)||(e[a][i]=e[a][i].divide(e[i][i]));for(let l=i+1;l<n;l++)e[a][l]=e[a][l].subtract(e[a][i].multiply(e[i][l]))}}return{A:ue.from2DArray(e,this.field),P:s}}PLUDeterminant(){const{A:e,P:n}=this.PLUFactorization(),s=e.matrix,i=s.length;let r=s[0][0];for(let o=1;o<i;o++)r=r.multiply(s[o][o]);return(n[i]-i)%2==0?r:r.opposite()}equals(e){return e instanceof ue?e.field!==this.field||e.width!==this.width||e.height!==this.height?!1:this.matrix.every((n,s)=>n.every((i,r)=>i.equals(e.matrix[s][r]))):!1}copy(){return ue.from2DArray(this.matrix,this.field)}toColumnVector(){const e=new Array(this.width*this.height).fill().map((n,s)=>[this.matrix[Math.floor(s/this.height)][s%this.height]]);return new ue(e,this.field)}toSquareMatrix(e){if(this.height!==e*e||this.width!==1)throw new Error("Cannot convert matrix to square matrix");const n=new Array(e).fill().map((s,i)=>new Array(e).fill().map((r,o)=>this.matrix[i*e+o][0]));return new ue(n,this.field)}toRawMatrix(){return this.matrix.map(e=>e.map(n=>n.value))}static identity(e,n){const s=[];for(let i=0;i<e;i++){const r=[];for(let o=0;o<e;o++)r.push(i===o?n.el(1):n.el(0));s.push(r)}return new ue(s,n)}static fromValue(e,n,s,i){if(e instanceof Dt&&e.field.order!==i.order)throw new Error("Cannot create matrix with elements from different fields");const r=[];for(let o=0;o<s;o++){const a=[];for(let l=0;l<n;l++)a.push(i.el(e));r.push(a)}return new ue(r,i)}static zeros(e,n,s){return ue.fromValue(0,e,n,s)}static ones(e,n,s){return ue.fromValue(1,e,n,s)}static random(e,n,s){const i=[];for(let r=0;r<n;r++){const o=[];for(let a=0;a<e;a++)o.push(s.el(Math.floor(Math.random()*s.order)));i.push(o)}return ue.from2DArray(i,s)}static randomSymmetric(e,n){const s=[];for(let i=0;i<e;i++){const r=[];for(let o=0;o<i;o++)r.push(s[o][i]);for(let o=i;o<e;o++)r.push(n.el(Math.floor(Math.random()*n.order)));s.push(r)}return ue.from2DArray(s,n)}static from2DArray(e,n){return new ue(e,n)}toString(){let e="";for(let n=0;n<this.height;n++)e+=`${n.toString().padStart(3," ")} |`+this.matrix[n].reduce((s,i)=>s+" "+i.value.toString().padStart(this.field.order.toString().length," "),"")+" |",Math.floor(this.height/2)===n&&(e+=` mod ${this.field.order}`),e+=`
`;return e}[void 0](){return this.toString()}};bs=new WeakMap,Es=new WeakSet,ji=function(e,n){typeof e=="number"&&(e=[e]),typeof n=="number"&&(n=[n]);const s=[];for(let i=0;i<this.height;i++){if(e.includes(i))continue;const r=[];for(let o=0;o<this.width;o++)n.includes(o)||r.push(this.matrix[i][o]);s.push(r)}return new ue(s,this.field)},jr(ue,bs,new Map);let gi=ue;class sr extends Dt{constructor(e,n){if(!(n instanceof tt))throw new Error("Field must be an instance of FiniteField");tt.isPrime(n.order)&&console.warn("[warn] Creating polynomial in prime field. Use FiniteFieldValue instead"),super(sr.coefficientsToInteger(e,n),n),this.field=n,this.primeField=tt.fromOrder(n.p),this.poly=new ir(e,this.primeField)}add(e){if(e instanceof sr){if(e.field.order!==this.field.order)throw new Error("Cannot add polynomials in different fields");const n=[];for(let s=0;s<Math.max(this.coefficients.length,e.coefficients.length);s++){const i=this.coefficients[s]??this.primeField.el(0),r=e.coefficients[s]??this.primeField.el(0);n.push(this.coefficients[i].add(r))}return this.field.el(n)}if(e instanceof Array)return this.add(this.field.el(e));throw new Error("Cannot add polynomial to non-polynomial")}static fromInteger(e,n){const i=e.toString(n.p).split("").map(r=>parseInt(r));return new sr(i,n)}static coefficientsToInteger(e,n){return n=tt.fromOrder(n.p),parseInt(e.map(s=>n.el(s)).map(s=>s.value).join(""),n.p)}toString(){return(this.poly.coefficients.map((e,n)=>{if(e.equals(0))return"";const s=this.poly.coefficients.length-n-1;if(s===0)return e.value.toString();const i=e.value===1?"":e.value;return s===1?`${i}x`:`${i}x^${s}`}).filter(e=>e).join(" + ")||"0")+` (mod ${this.field.order})`}[void 0](){return this.toString()}}class ir{constructor(e,n){if(!(n instanceof tt))throw new Error("Field must be an instance of FiniteField");this.field=n,this.primeField=tt.fromOrder(n.p),this.coefficients=e.map(s=>this.field.el(s))}add(e){if(e instanceof ir){if(e.field.order!==this.field.order)throw new Error("Cannot add polynomials in different fields");const n=[];for(let s=0;s<Math.max(this.coefficients.length,e.coefficients.length);s++){const i=this.coefficients[s]??this.primeField.el(0),r=e.coefficients[s]??this.primeField.el(0);n.push(this.coefficients[i].add(r))}return this.field.el(n)}if(e instanceof Array)return this.add(this.field.el(e));throw new Error("Cannot add polynomial to non-polynomial")}multiply(e){if(e instanceof ir){if(e.field.order!==this.field.order)throw new Error("Cannot multiply polynomials in different fields");const n=[];for(let s=0;s<this.coefficients.length+e.coefficients.length-1;s++)n.push(this.field.el(0));for(let s=0;s<this.coefficients.length;s++)for(let i=0;i<e.coefficients.length;i++)n[s+i]=n[s+i].add(this.coefficients[s].multiply(e.coefficients[i]));return this.field.el(n)}if(e instanceof Array)return this.multiply(this.field.el(e));throw new Error("Cannot multiply polynomial by non-polynomial")}equals(e){if(e instanceof ir){if(e.field.order!==this.field.order)throw new Error("Cannot compare polynomials in different fields");return this.coefficients.every((n,s)=>n.equals(e.coefficients[s]))}if(e instanceof Array)return this.equals(this.field.el(e));throw new Error("Cannot compare polynomial to non-polynomial")}toString(){return(this.coefficients.map((e,n)=>{if(e.equals(0))return"";const s=this.coefficients.length-n-1;if(s===0)return e.value.toString();const i=e.value===1?"":e.value;return s===1?`${i}x`:`${i}x^${s}`}).filter(e=>e).join(" + ")||"0")+` (mod ${this.field.order})`}[void 0](){return this.toString()}}class tt{constructor(e,n,s){if(typeof e!="number")throw new Error(`Order ${e} is not a number`);if(e<=0)throw new Error(`Order ${e} is not positive`);if(e%1!==0)throw new Error(`Order ${e} is not an integer`);const i=tt.primeFactors(e);if(!i.every(r=>r===i[0]))throw new Error(`Order ${e} is not a prime power`);this.order=e,this.p=i[0],this.q=i.length,this.isPrimeField=this.q===1,this.additionTable=n,this.multiplicationTable=s,this.hasTables=n&&s}el(e){if(e instanceof Dt){if(e.field.order!==this.order)throw new Error("Cannot create element in different field");return e}if(typeof e=="number")return this.hasTables?new lk(e,this):this.isPrimeField?new ak(e,this):sr.fromInteger(e,this);throw new Error("Cannot create element from non-number")}matrix(e){return gi.from2DArray(e,this)}identity(e){return gi.identity(e,this)}static mod(e,n){return(e%n+n)%n}static primeFactors(e){let n=2;for(;e>=n**2;){if(e%n===0)return[n,...tt.primeFactors(e/n)];n++}return[e]}static fromOrder(e){if(e===4){const n=[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]],s=[[0,0,0,0],[0,1,2,3],[0,2,1,2],[0,3,2,1]];return tt.fromTables(n,s)}return new tt(e)}static fromTables(e,n){const s=e.length;return new tt(s,e,n)}static isPrime(e){if(e<=1)return!1;if(e<=3)return!0;if(e%2===0||e%3===0)return!1;for(let n=5;n*n<=e;n=n+6)if(e%n===0||e%(n+2)===0)return!1;return!0}}const ck=({width:t,height:e,state:n,modulo:s,tilesToFlip:i})=>{const r=[];s=s??2,i=i??[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]];for(let l=0;l<e;l++)for(let c=0;c<t;c++){if(n&&n[l][c]===-1)continue;const u=Array(e).fill().map((d,h)=>Array(t).fill().map((m,g)=>n&&n[h][g]===-1?-1:0));uk(l,c,u,s,i),r.push(u)}return tt.fromOrder(s).matrix(r.map(l=>l.flat().filter(c=>c!==-1))).transpose()},uk=(t,e,n,s,i)=>{for(const r of i){const o=e+r[0],a=t+r[1];o>=0&&o<n[0].length&&a>=0&&a<n.length&&n[a][o]!==-1&&(n[a][o]=1)}},sl=new Map,il=new Map;function dk(t){const e=t[0].length;return t.map((n,s)=>n.map((i,r)=>i===-1?s*e+r:null)).flat().filter(n=>n||n===0)}const Ql=t=>{const e=[];for(let n=0;n<t[0].length;n++){const s=[];for(let i=t.length-1;i>=0;i--)s.push(t[i][n]);e.push(s)}return e},Vi=(t,e)=>{for(let n=0;n<e;n++)t=Ql(t);return t};class hk{constructor(e,n,s){this.matrix=e,this.determinant=n,this.moves=s}}function bu({state:t,target:e,tilesToFlip:n,modulo:s}){const i=[t,Ql(t),Vi(t,2),Vi(t,3)];e=e??i[0].map(h=>h.map(m=>m===-1?-1:s-1));const r=[e,Ql(e),Vi(e,2),Vi(e,3)],o=[],a=[];let l=0,c=0;for(const h of i){const{matrix:m,determinant:g,zerows:w}=fk({state:h,target:r[l],modulo:s,tilesToFlip:n});c=w;const M=m.flat().filter(P=>P!==-1).reduce((P,L)=>P+L,0);o.push(M),a.push(new hk(Vi(m,4-l++),g,M))}const u=Math.min(...o),d=o.indexOf(u);return{solutions:a,zerows:c,shortest:d,minMoves:u,determinant:a[0].determinant.value}}function fk({state:t,target:e,tilesToFlip:n,modulo:s}){s=s??2,n=n??[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]];const i=tt.fromOrder(s),r=t.length,o=t[0].length,a=t.flat().filter(g=>g===-1).length;e=e?i.matrix(e.flat().filter(g=>g!==-1).map(g=>[g])):i.matrix(new Array(o*r-a).fill().map(g=>[s-1]));const l=i.matrix(t.flat().filter(g=>g!==-1).map(g=>[g])).subtract(e),c=`${o}x${r},${dk(t)},${n},${s}}`;let u=[],d=0;const h=ck({width:o,height:r,state:t,tilesToFlip:n,modulo:s});let m;if(il.has(c)?m=il.get(c):(m=h.determinant(),il.set(c,m)),m.equals(0)){const w=gi.from2DArray(h.matrix.map((P,L)=>P.concat(l.opposite().matrix[L])),h.field).reducedRowEchelonForm();d=w.matrix.filter(P=>P.every(L=>L.equals(0))).length;const M=gi.from2DArray(w.matrix.map(P=>[P[P.length-1]]),w.field);u=new Array(h.width).fill().map(P=>0);for(let P=0;P<M.height;P++){const L=M.matrix[P][0];if(!L.equals(0)){for(let z=0;z<w.width-1;z++)if(w.matrix[P][z].equals(1)){u[z]=L.value;break}}}}else{let g;sl.has(c)?g=sl.get(c):(g=h.inverse(),sl.set(c,g)),u=g.multiply(l.opposite()).matrix.map(w=>w[0].value),d=0}for(let g=0;g<r;g++)for(let w=0;w<o;w++)if(t[g][w]===-1){const M=g*o+w;u.splice(M,0,-1)}return{matrix:u.map((g,w)=>u.slice(w*o,(w+1)*o)).filter(g=>g.length),determinant:m,zerows:d}}function es(...t){if(t.some(e=>e==null))throw new Error("Missing argument")}function Gs(...t){if(t.some(e=>e===!1))throw new Error("Expectation failed")}const et=class et{static get ALL_LAYOUTS(){return[...et.LAYOUTS,...et.HIDDEN_LAYOUTS]}static get CATEGORIES(){const e=new Set(et.ALL_LAYOUTS.map(n=>n.unlockCategory)).size;return new Array(e).fill(0).map((n,s)=>et.ALL_LAYOUTS.filter(i=>i.unlockCategory===s))}static fromId(e){return et.ALL_LAYOUTS.find(n=>n.id===e).copy()}constructor({width:e,height:n,exclude:s,unlockCategory:i,id:r,maxDifficulty:o}){es(e,n),Gs(e>0&&n>0),this.width=e,this.height=n,this.unlockCategory=i??0,this.matrix=new Array(n).fill(0).map(()=>new Array(e).fill().map(a=>0)),this.id=r??0,s=s??[];for(const a of s){if(a<0||a>=e*n)throw new Error(`Invalid index ${a} for layout of size ${e}x${n}`);this.matrix[Math.floor(a/e)][a%e]=-1}this.maxDifficulty=o??-1}swapTiles(e,n,s=1,i=2,r=et.TILES_TO_FLIP){es(e,n),Gs(e>=0&&e<this.matrix.length&&n>=0&&n<this.matrix[0].length);let o=0;for(const a of r){const l=n+a[0],c=e+a[1];l>=0&&l<this.matrix[0].length&&c>=0&&c<this.matrix.length&&this.matrix[c][l]!==-1&&(this.matrix[c][l]=et.modulo(this.matrix[c][l]+s,i),o++)}return o}setAllTiles(e){for(let n=0;n<this.matrix.length;n++)for(let s=0;s<this.matrix[0].length;s++)this.matrix[n][s]!==-1&&(this.matrix[n][s]=e)}setTile(e,n,s){this.matrix[e][n]=s}getTile(e,n){return this.matrix[e][n]}setMatrix(e){this.matrix=e.map(n=>n.slice())}get exclude(){return et.getExcludeFromMatrix(this.matrix)}isSolved(e=2){return this.matrix.every(n=>n.every(s=>s===e-1||s===-1))}isTile(e,n){return n===void 0?this.matrix[Math.floor(e/this.width)][e%this.width]!==-1:this.matrix[e][n]!==-1}isWhite(e,n,s=2){return n===void 0?this.matrix[Math.floor(e/this.width)][e%this.width]===s-1:this.matrix[e][n]===s-1}nTiles(){return this.width*this.height-this.exclude.length}copy(){const{width:e,height:n,exclude:s,unlockCategory:i,id:r}=this,o=new et({width:e,height:n,exclude:s,unlockCategory:i,id:r});return o.matrix=this.matrix.map(a=>a.slice()),o}generatePosition(e,n=2,s=et.TILES_TO_FLIP){es(e),Gs(e>0);const i=this.copy();i.setAllTiles(n-1);const r=i.matrix.map((o,a)=>o.map((l,c)=>i.isTile(a*i.width+c)?a*i.width+c:null)).flat().filter(o=>o!==null).flatMap(o=>new Array(n-1).fill().map(a=>o));for(let o=0;o<e;o++){const a=r[Math.floor(Math.random()*r.length)];i.swapTiles(Math.floor(a/i.width),a%i.width,-1,n,s),r.splice(r.indexOf(a),1)}return i.isSolved(n)?this.generatePosition(e,n,s):(i.nTiles()<50,i)}actualSize(){const e=this.matrix.map(o=>o.slice());for(;e[0].every(o=>o===-1);)e.shift();const n=this.matrix.length-e.length;for(;e[e.length-1].every(o=>o===-1);)e.pop();const s=this.matrix.length-e.length-n;for(;e.every(o=>o[0]===-1);)e.forEach(o=>o.shift());const i=this.matrix[0].length-e[0].length;for(;e.every(o=>o[o.length-1]===-1);)e.forEach(o=>o.pop());const r=this.matrix[0].length-e[0].length-i;return{width:e[0].length,height:e.length,paddingTop:n,paddingBottom:s,paddingLeft:i,paddingRight:r,matrix:e}}computeScore(e){Gs(this.unlockCategory>=0);const n=this.maxDifficulty??this.computeMaxDifficulty();return this.maxDifficulty=n,Math.round(e*(1.1+e/(n*.8+10)))*2**this.unlockCategory}computeMaxDifficulty(){const e=this.copy();let n=-1;for(let s=0;s<10;s++){const{matrix:i}=e.generatePosition(e.nTiles()),{minMoves:r}=bu({state:i,modulo:2,tilesToFlip:et.TILES_TO_FLIP});r>n&&(n=r)}return n}static getExcludeFromMatrix(e){const n=e[0].length;return e.map((s,i)=>s.map((r,o)=>r===-1?i*n+o:null)).flat().filter(s=>s!==null)}static getRandomLayout(){const e=et.ALL_LAYOUTS;return e[Math.floor(Math.random()*e.length)]}static hydrate(e){const{width:n,height:s,exclude:i,unlockCategory:r}=typeof e=="string"?JSON.parse(string):e;return new et({width:n,height:s,exclude:i,unlockCategory:r})}static serialize(e){return JSON.stringify(e)}static modulo(e,n){return(e%n+n)%n}};jt(et,"TILES_TO_FLIP",[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]]),jt(et,"LAYOUTS",[{dimensions:"3x3",unlockCategory:1,id:0},{dimensions:"4x4",unlockCategory:3,id:1},{dimensions:"5x5",unlockCategory:5,id:2},{dimensions:"6x6",unlockCategory:9,id:3},{dimensions:"7x7",unlockCategory:11,id:4},{dimensions:"8x8",unlockCategory:15,id:5},{dimensions:"9x9",unlockCategory:15,id:6},{dimensions:"10x10",unlockCategory:15,id:7},{dimensions:"11x11",unlockCategory:15,id:8},{dimensions:"12x12",unlockCategory:15,id:9},{dimensions:"3x4",unlockCategory:3,id:10},{dimensions:"3x5",unlockCategory:3,id:11},{dimensions:"3x6",unlockCategory:9,id:12},{dimensions:"3x7",unlockCategory:9,id:13},{dimensions:"3x3",exclude:[0,2,6,8],unlockCategory:1,id:14},{dimensions:"5x5",exclude:[0,1,3,4,5,9,15,19,20,21,23,24],unlockCategory:7,id:15},{dimensions:"7x7",exclude:[0,1,2,4,5,6,7,8,12,13,14,20,28,34,35,36,40,41,42,43,44,46,47,48],unlockCategory:11,id:16},{dimensions:"6x6",exclude:[0,1,4,5,6,11,24,29,30,31,34,35],unlockCategory:9,id:17},{dimensions:"7x7",exclude:[0,1,5,6,7,13,35,41,42,43,47,48],unlockCategory:11,id:18},{dimensions:"8x8",exclude:[0,1,6,7,8,15,48,55,56,57,62,63],unlockCategory:16,id:19},{dimensions:"3x3",exclude:[3,5,6,8],unlockCategory:1,id:20},{dimensions:"3x3",exclude:[4],unlockCategory:1,id:21},{dimensions:"3x3",exclude:[1,3,5,7],unlockCategory:1,id:22},{dimensions:"3x3",exclude:[4,7],unlockCategory:1,id:23},{dimensions:"4x4",exclude:[5,10],unlockCategory:3,id:24},{dimensions:"4x4",exclude:[3,12],unlockCategory:3,id:25},{dimensions:"4x4",exclude:[3,6,9,12],unlockCategory:4,id:26},{dimensions:"4x4",exclude:[0,3,12,15],unlockCategory:3,id:27},{dimensions:"4x4",exclude:[2,3,7,8,12,13],unlockCategory:3,id:28},{dimensions:"4x4",exclude:[0,3,6,8,12,13,15],unlockCategory:4,id:29},{dimensions:"4x4",exclude:[0,3,5,6,9,10,12,15],unlockCategory:4,id:30},{dimensions:"3x5",exclude:[0,2,12,14],unlockCategory:4,id:33},{dimensions:"5x5",exclude:[0,2,4,10,14,20,22,24],unlockCategory:6,id:36},{dimensions:"5x5",exclude:[0,2,4,10,12,14,20,22,24],unlockCategory:5,id:37},{dimensions:"5x5",exclude:[6,8,16,18],unlockCategory:5,id:38},{dimensions:"5x5",exclude:[2,4,6,8,10,12,16,19,20,23,24],unlockCategory:7,id:44},{dimensions:"5x5",exclude:[0,1,5,6,7,9,10,14,15,17,18,19,23,24],unlockCategory:2,id:45},{dimensions:"3x3",exclude:[2,4,6],unlockCategory:1,id:46},{dimensions:"5x5",exclude:[0,4,20,24],unlockCategory:7,id:47},{dimensions:"5x5",exclude:[0,4,20,24,7,11,12,13,17],unlockCategory:6,id:48},{dimensions:"5x5",exclude:[2,10,14,22],unlockCategory:6,id:49},{dimensions:"4x7",exclude:[1,2,3,6,7,9,11,13,14,17,19,22,23,25,26,27],unlockCategory:7,id:52},{dimensions:"5x5",exclude:[1,3,5,7,9,11,13,15,17,19,21,23],unlockCategory:5,id:53},{dimensions:"5x5",exclude:[7,11,13,17],unlockCategory:5,id:56},{dimensions:"5x5",exclude:[1,2,3,7,17,21,22,23],unlockCategory:5,id:58},{dimensions:"4x7",exclude:[0,1,2,4,5,8,16,20,21,24,25,26],unlockCategory:8,id:60},{dimensions:"3x5",exclude:[0,2,4,10,12,14],unlockCategory:4,id:62},{dimensions:"7x7",exclude:[8,9,11,12,15,19,29,33,36,37,39,40],unlockCategory:13,id:63},{dimensions:"6x6",exclude:[0,1,3,4,5,6,10,11,12,13,15,17,18,20,27,29,30,32,33,34,35],unlockCategory:7,id:65},{dimensions:"7x7",exclude:[0,1,2,3,6,7,8,9,13,14,15,21,34,40,41,42,43,46,47,48],unlockCategory:11,id:68},{dimensions:"6x6",exclude:[0,1,2,3,4,9,10,13,14,19,21,22,23,24,25,27,28,29,33,34,35],unlockCategory:6,id:69},{dimensions:"5x4",exclude:[6,7,8,10,14],unlockCategory:6,id:70},{dimensions:"6x6",exclude:[0,1,3,4,5,6,10,11,15,17,18,20,24,25,29,30,31,32,34,35],unlockCategory:8,id:71},{dimensions:"5x7",exclude:[0,1,3,4,5,9,15,16,18,19,25,29,30,31,33,34],unlockCategory:8,id:72},{dimensions:"7x7",exclude:[0,1,5,6,7,8,10,12,13,17,22,23,24,25,26,31,35,36,38,40,41,42,43,47,48],unlockCategory:9,id:74},{dimensions:"7x7",exclude:[0,1,5,6,7,8,10,12,13,22,24,26,35,36,38,40,41,42,43,47,48],unlockCategory:11,id:75},{dimensions:"7x7",exclude:[0,1,2,4,5,6,7,8,12,13,21,27,28,29,33,34,35,38,41,44,45,46],unlockCategory:10,id:76},{dimensions:"7x9",exclude:[0,1,5,6,7,8,10,12,13,14,15,17,19,20,21,22,23,25,26,27,29,33,34,35,37,39,41,42,43,44,46,47,49,50,52,54,55,56,57,59,61,62],unlockCategory:10,id:79},{dimensions:"9x9",exclude:[0,1,2,3,4,5,7,8,9,10,11,12,13,14,17,18,19,20,21,22,23,24,26,27,28,29,30,31,32,33,36,37,38,39,40,41,45,46,47,48,49,56,57,62,63,71,72,73,74,78,79,80],unlockCategory:10,id:80},{dimensions:"11x8",exclude:[0,1,3,4,5,6,7,9,10,11,12,13,15,16,17,19,20,21,22,23,31,32,33,36,40,43,56,64,67,69,70,71,72,73,75,77,78,79,82,85,86,87],unlockCategory:12,id:81},{dimensions:"9x9",exclude:[0,1,2,9,10,11,18,19,20,6,7,8,15,16,17,24,25,26,54,55,56,63,64,65,72,73,74,60,61,62,69,70,71,78,79,80,3,5,21,23,27,29,45,47,33,35,51,53,57,59,75,77],unlockCategory:13,id:82},{dimensions:"6x4",exclude:[2,3,6,7,10,11,18,20,21,23],unlockCategory:6,id:84},{dimensions:"5x5",exclude:[0,1,3,4,5,7,11,12,13,15,17,20,21,23,24],unlockCategory:4,id:85},{dimensions:"5x3",exclude:[0,1,2,5,8,11,13],unlockCategory:3,id:86},{dimensions:"7x3",exclude:[1,5,15,19],unlockCategory:7,id:87},{dimensions:"9x6",exclude:[0,1,2,4,6,7,8,10,16,21,23,27,35,36,38,40,42,44,47,48,49,50,51],unlockCategory:12,id:88},{dimensions:"9x8",exclude:[0,1,7,8,9,17,20,21,23,24,29,32,64,66,68,70],unlockCategory:12,id:89},{dimensions:"8x8",exclude:[0,1,2,5,6,7,8,9,14,15,16,23,26,29,40,41,43,44,46,47,48,50,53,55,57,59,60,62],unlockCategory:12,id:90},{dimensions:"11x7",exclude:[0,1,7,8,9,10,11,21,22,30,31,32,43,55,65,66,67,74,75,76],unlockCategory:16,id:91},{dimensions:"11x10",exclude:[0,1,2,3,4,5,7,8,9,10,11,12,13,14,15,19,20,21,22,23,31,32,33,43,88,98,99,100,108,109],unlockCategory:16,id:92},{dimensions:"8x6",exclude:[0,1,2,3,4,6,7,12,15,17,18,19,22,24,25,28,29,30,32,33,36,38,39,40,41,42,43,45,46,47],unlockCategory:8,id:93},{dimensions:"6x6",exclude:[3,4,5,7,9,10,11,12,15,16,17,18,19,20,23,24,25,26,28,30,31,32,33],unlockCategory:7,id:97},{dimensions:"6x6",exclude:[0,4,5,7,9,11,14,19,21,22,24,27,28,29,30,31,34,35],unlockCategory:8,id:99},{dimensions:"5x4",exclude:[1,2,3,6,8],unlockCategory:4,id:100},{dimensions:"7x7",exclude:[0,3,4,5,6,8,9,11,12,13,14,16,18,19,20,21,22,24,27,28,29,30,32,33,35,36,37,38,40,42,43,44,45,46,48],unlockCategory:7,id:101},{dimensions:"5x6",exclude:[0,1,4,5,7,8,10,12,17,19,21,22,24,25,28,29],unlockCategory:6,id:102},{dimensions:"10x5",exclude:[0,1,2,3,4,5,10,11,12,13,14,16,17,18,19,20,21,22,24,26,27,28,29,33,35,36,37,38,39,40,41,42,43,45,46,47,48,49],unlockCategory:6,id:103},{dimensions:"10x6",exclude:[0,1,3,5,6,7,8,9,10,11,13,14,16,17,18,19,22,25,26,29,30,31,32,35,40,41,42,43,50,51,52,53,54,57,58,59],unlockCategory:9,id:104},{dimensions:"7x7",exclude:[2,3,4,10,14,20,21,22,26,27,28,34,38,44,45,46],unlockCategory:13,id:105},{dimensions:"6x3",exclude:[0,5,12,17],unlockCategory:6,id:106},{dimensions:"7x7",exclude:[1,5,15,19],unlockCategory:14,id:107},{dimensions:"5x7",exclude:[6,8,11,13,21,22,23,27],unlockCategory:8,id:108},{dimensions:"3x5",exclude:[2,4,8,10,14],unlockCategory:2,id:109},{dimensions:"5x5",exclude:[0,4,15,19,20,21,23,24],unlockCategory:9,id:112},{dimensions:"7x8",exclude:[0,1,2,4,5,6,7,8,12,13,14,20,28,34,35,38,41,42,45,48,49,52,55],unlockCategory:10,id:113},{dimensions:"6x5",exclude:[0,1,3,4,6,9],unlockCategory:11,id:114},{dimensions:"7x7",exclude:[0,3,6,28,34,35,36,40,41,42,43,44,46,47,48],unlockCategory:10,id:115},{dimensions:"8x4",exclude:[0,1,6,7,8,9,14,15,16,17,22,23],unlockCategory:10,id:116},{dimensions:"7x5",exclude:[1,2,3,4,5,6,7,10,11,12,13,14,21,22,23,25,27,28,29,30,32,34],unlockCategory:7,id:117},{dimensions:"3x5",exclude:[0,2,4,10,13],unlockCategory:2,id:119},{dimensions:"7x9",exclude:[0,1,5,6,7,13,28,29,30,32,33,34,35,36,37,39,40,41,42,43,44,46,47,48,49,50,51,53,55,56,57,58,59,61,62],unlockCategory:10,id:120},{dimensions:"7x5",exclude:[0,1,3,4,5,10,11,12,15,17,18,19,24,25,26,28,29],unlockCategory:10,id:121},{dimensions:"7x7",exclude:[0,1,5,6,7,13,15,18,35,38,41,42,43,47,48],unlockCategory:13,id:127},{dimensions:"3x5",exclude:[0,2,4],unlockCategory:4,id:128},{dimensions:"7x7",exclude:[0,1,3,5,6,7,10,13,17,21,22,23,25,26,27,31,35,38,41,42,43,45,47,48],unlockCategory:11,id:134},{dimensions:"9x9",exclude:[0,1,2,4,6,7,8,9,10,13,16,17,18,22,26,31,36,37,38,39,41,42,43,44,49,54,58,62,63,64,67,70,71,72,73,74,76,78,79,80],unlockCategory:14,id:135},{dimensions:"11x11",exclude:[0,1,2,3,7,8,9,10,11,12,20,21,22,32,32,33,43,77,87,88,98,99,100,108,109,110,111,112,113,117,118,119,120],unlockCategory:16,id:136},{dimensions:"11x11",exclude:[0,1,2,3,7,8,9,10,11,12,20,21,22,32,32,33,43,51,52,53,54,59,60,61,62,63,64,65,73,74,75,76,77,87,88,98,99,100,108,109,110,111,112,113,117,118,119,120],unlockCategory:12,id:137},{dimensions:"5x5",exclude:[2,11,12,13,17],unlockCategory:5,id:138},{dimensions:"8x6",exclude:[0,18,20,21,22,23,27,28,29,30,31,34,35,36,37,38,39,42,43,44,45,46,47],unlockCategory:10,id:140},{dimensions:"11x11",exclude:[0,1,2,3,4,5,6,7,8,10,11,12,13,18,22,23,30,32,33,42,43,54,65,76,87,88,97,98,100,107,108,109,110,112,117,118,119,120],unlockCategory:16,id:141},{dimensions:"3x5",exclude:[4,5,8,10,11],unlockCategory:2,id:142},{dimensions:"3x5",exclude:[1,4,10,13],unlockCategory:2,id:145},{dimensions:"9x9",exclude:[0,1,3,5,7,8,9,10,16,17,20,24,27,30,32,35,40,45,48,50,53,56,60,63,64,70,71,72,73,75,77,79,80],unlockCategory:14,id:148},{dimensions:"9x8",exclude:[0,1,2,6,7,8,9,17,29,30,32,33,45,46,49,52,53,54,56,57,59,60,62,63,64,66,67,68,70,71],unlockCategory:12,id:149},{dimensions:"9x7",exclude:[0,1,3,4,5,7,8,9,17,20,21,23,24,46,48,50,52,54,56,58,60,62],unlockCategory:12,id:150},{dimensions:"12x10",exclude:[0,2,5,8,9,11,12,13,15,19,23,24,25,28,32,34,36,38,42,46,53,54,59,60,63,67,69,70,72,76,78,80,81,83,84,87,91,92,95,97,101,105,107,109,110,113,114,116,118],unlockCategory:17,id:151},{dimensions:"10x10",exclude:[0,1,2,3,4,5,8,10,11,12,13,14,15,17,20,21,22,23,24,25,27,28,29,37,41,42,44,45,46,48,50,52,53,54,57,58,59,60,61,65,66,69,71,73,74,77,78,82,83,84,86,87,89,90,91,92,93,94,95,98,99],unlockCategory:14,id:152},{dimensions:"13x13",unlockCategory:15,id:154},{dimensions:"6x6",exclude:[0,1,9,10,11,15,16,17,24,25,30,31,33,34],unlockCategory:8,id:155},{dimensions:"3x5",exclude:[0,2,4,7,11,12,13],unlockCategory:2,id:168},{dimensions:"5x5",exclude:[0,1,5,6,18,19,23,24],unlockCategory:5,id:31},{dimensions:"8x5",exclude:[9,14,25,26,27,28,29,30],unlockCategory:18,id:186},{dimensions:"3x3",exclude:[7,0,2],unlockCategory:18,id:187},{dimensions:"6x6",exclude:[7,3,9,15,16,10,5,4,11,17,19,20,26,25,24,30,31,32,23,33,12,0],unlockCategory:18,id:188},{dimensions:"6x6",exclude:[0,2,12,15,9,3,4,10,16,17,11,5,19,30,31,32,20,33,23],unlockCategory:18,id:189},{dimensions:"6x6",exclude:[0,12,6,1,13,18,30,32,33,35,23,3,4,10,16,15,17,11,5],unlockCategory:18,id:190},{dimensions:"7x7",exclude:[14,21,22,28,35,36,0,16,10,24,26,12,13,5,3,4,20,43,44,38,45,32,46,40,41,34,33,27,48,2,42,6],unlockCategory:18,id:191},{dimensions:"7x7",exclude:[14,21,22,28,35,36,0,16,24,26,12,13,5,3,4,20,43,44,38,45,32,46,40,41,34,27,48,42,6,29,37],unlockCategory:18,id:192},{dimensions:"8x7",exclude:[0,16,24,32,40,48,49,41,33,50,42,34,43,51,52,54,55,3,4,5,6,7,15,23,31,39,12,21,13,14,22,30,37,45,47,10,9,18,36],unlockCategory:18,id:193}].map(e=>{const n=parseInt(e.dimensions.split("x")[0]),s=parseInt(e.dimensions.split("x")[1]),{unlockCategory:i,id:r}=e;return new et({width:n,height:s,unlockCategory:i-1,id:r,exclude:e.exclude??[]})}).sort((e,n)=>e.unlockCategory-n.unlockCategory)),jt(et,"HIDDEN_LAYOUTS",[{dimensions:"4x4",exclude:[1,2,3,4,6,7,8,9,11,12,13,14],unlockCategory:18,id:32},{dimensions:"5x5",exclude:[5,7,9,10,12,14,15,17,19],unlockCategory:18,id:40},{dimensions:"5x2",exclude:[2,5,9],unlockCategory:18,id:34},{dimensions:"3x4",exclude:[4,6,8],unlockCategory:18,id:35},{dimensions:"5x5",exclude:[6,8,11,13,16,18],unlockCategory:18,id:39},{dimensions:"5x5",exclude:[0,2,4,7,10,11,13,14,17,20,22,24],unlockCategory:18,id:41},{dimensions:"5x5",exclude:[0,2,4,5,7,9,15,17,19,20,22,24],unlockCategory:18,id:42},{dimensions:"5x5",exclude:[0,4,5,6,8,9,15,16,18,19,20,24],unlockCategory:18,id:43},{dimensions:"5x5",exclude:[12],unlockCategory:18,id:50},{dimensions:"5x5",exclude:[0,1,3,4,5,7,9,11,13,15,17,19,20,21,23,24],unlockCategory:18,id:51},{dimensions:"5x5",exclude:[0,2,4,6,8,10,12,14,16,18,20,22,24],unlockCategory:18,id:54},{dimensions:"5x5",exclude:[7,12,17],unlockCategory:18,id:55},{dimensions:"5x5",exclude:[1,3,5,9,11,13,15,19,21,23],unlockCategory:18,id:57},{dimensions:"5x5",exclude:[0,1,3,4,5,6,8,9,15,16,18,19,20,21,23,24],unlockCategory:18,id:59},{dimensions:"5x5",exclude:[5,6,7,8,13,16,17,18],unlockCategory:18,id:61},{dimensions:"5x4",exclude:[0,1,3,4,11,12,13,17],unlockCategory:18,id:64},{dimensions:"7x7",exclude:[0,1,2,3,4,5,12,15,16,17,19,22,26,29,31,32,33,36,43,44,45,46,47,48],unlockCategory:18,id:66},{dimensions:"5x5",exclude:[1,3,6,8,10,12,14,16,18,21,23],unlockCategory:18,id:67},{dimensions:"3x8",exclude:[4,6,8,10,13,15,17,19],unlockCategory:18,id:73},{dimensions:"7x7",exclude:[2,4,10,14,16,17,18,20,22,23,24,25,26,28,30,31,32,34,38,44,46],unlockCategory:18,id:77},{dimensions:"5x6",exclude:[2,6,8,11,12,13,16,17,18,21,23,27],unlockCategory:18,id:78},{dimensions:"4x6",exclude:[0,1,4,6,8,10,13,14,15,18,19,22,23],unlockCategory:18,id:83},{dimensions:"4x7",exclude:[0,3,5,7,8,10,11,12,15,16,19,20,21,22,24,27],unlockCategory:18,id:94},{dimensions:"7x5",exclude:[2,3,4,7,9,11,13,14,17,20,21,23,25,27,30,31,32],unlockCategory:18,id:95},{dimensions:"6x6",exclude:[0,1,3,4,5,6,7,9,10,11,16,17,18,19,24,25,26,28,29,30,31,32,34,35],unlockCategory:18,id:96},{dimensions:"7x5",exclude:[0,1,5,6,7,10,13,14,17,20,21,27,30,31,32],unlockCategory:18,id:98},{dimensions:"3x5",exclude:[0,4,5,7,8,10,11,12],unlockCategory:18,id:110},{dimensions:"3x5",exclude:[2,4,7,10,14],unlockCategory:18,id:111},{dimensions:"5x8",exclude:[0,4,6,7,8,10,11,12,13,15,16,17,19,20,21,23,24,25,26,28,29,30,31,32,33,34,35,36,38,39],unlockCategory:18,id:118},{dimensions:"8x3",exclude:[1,2,3,4,5,6,8,10,11,12,13,15,16,17,22,23],unlockCategory:18,id:122},{dimensions:"3x4",exclude:[0,2,4,7,9,11],unlockCategory:18,id:123},{dimensions:"3x4",exclude:[4,7],unlockCategory:18,id:124},{dimensions:"7x7",exclude:[0,1,2,4,5,6,7,8,10,12,13,14,16,18,20,22,24,26,28,30,32,34,35,36,38,40,41,42,43,44,46,47,48],unlockCategory:18,id:125},{dimensions:"9x9",exclude:[0,1,2,3,5,6,7,8,9,10,11,13,15,16,17,18,19,21,23,25,26,27,29,31,33,35,37,39,41,43,45,47,49,51,53,54,55,57,59,61,62,63,64,65,67,69,70,71,72,73,74,75,77,78,79,80],unlockCategory:18,id:126},{dimensions:"4x7",exclude:[5,6,8,9,10,12,13,15,16,18,19],unlockCategory:18,id:129},{dimensions:"3x5",exclude:[1,2,4,5,7,8,10,11],unlockCategory:18,id:130},{dimensions:"3x5",exclude:[3,5,6,8,9,11],unlockCategory:18,id:131},{dimensions:"5x5",exclude:[1,2,3,7,11,13,16,17,18,21,22,23],unlockCategory:18,id:132},{dimensions:"5x5",exclude:[1,2,3,7,8,13,16,21,22],unlockCategory:18,id:133},{dimensions:"9x5",exclude:[0,3,4,5,8,10,12,13,14,16,19,20,21,23,24,25,27,31,35,36,37,38,40,42,43,44],unlockCategory:18,id:139},{dimensions:"3x5",exclude:[4,5,8,10,11,13,14],unlockCategory:18,id:143},{dimensions:"3x5",exclude:[0,4,5,7,8,10,12],unlockCategory:18,id:144},{dimensions:"3x5",exclude:[1,4,8,10,13],unlockCategory:18,id:146},{dimensions:"11x8",exclude:[0,1,2,4,5,6,7,8,9,10,11,14,17,19,20,21,23,24,25,26,27,29,31,32,34,35,36,37,38,39,40,41,43,45,46,47,48,49,50,51,52,54,55,58,59,61,62,64,65,66,67,68,71,74,76,77,78,79,80,81,82,83,84,85,86],unlockCategory:18,id:147},{dimensions:"11x11",exclude:[0,1,2,3,4,6,7,8,9,10,11,12,13,14,16,18,19,20,21,22,23,24,25,27,29,30,31,32,33,34,35,36,38,40,41,42,43,44,48,49,50,54,56,57,58,59,60,61,62,63,64,66,70,71,72,76,77,78,79,80,82,84,85,86,87,88,89,90,91,93,95,96,97,98,99,100,101,102,104,106,107,108,109,110,111,112,113,114,116,117,118,119,120],unlockCategory:18,id:153},{dimensions:"3x5",exclude:[4,7,10],unlockCategory:18,id:156},{dimensions:"3x5",exclude:[0,2,5,6,8,9,11],unlockCategory:18,id:157},{dimensions:"3x5",exclude:[3,4,10,11],unlockCategory:18,id:158},{dimensions:"3x5",exclude:[3,4,6,9,10],unlockCategory:18,id:159},{dimensions:"3x5",exclude:[1,2,4,9,10,12,13],unlockCategory:18,id:160},{dimensions:"3x5",exclude:[4,5,9,10],unlockCategory:18,id:161},{dimensions:"3x5",exclude:[4,5,10],unlockCategory:18,id:162},{dimensions:"3x5",exclude:[3,4,6,8,10,11,13,14],unlockCategory:18,id:163},{dimensions:"3x5",exclude:[4,10],unlockCategory:18,id:164},{dimensions:"3x5",exclude:[4,9,10],unlockCategory:18,id:165},{dimensions:"3x5",exclude:[3,5,6,8,9,11,14],unlockCategory:18,id:166},{dimensions:"3x5",exclude:[4,10,11,13,14],unlockCategory:18,id:167},{dimensions:"3x5",exclude:[2,4,8,10,13],unlockCategory:18,id:169},{dimensions:"3x5",exclude:[3,5,6,8,9,11,12,14],unlockCategory:18,id:170},{dimensions:"3x5",exclude:[1,4,7,10,12],unlockCategory:18,id:171},{dimensions:"3x5",exclude:[1,4,7,12,14],unlockCategory:18,id:172},{dimensions:"5x5",exclude:[1,3,6,8,11,13,16,18,20,22,24],unlockCategory:18,id:173},{dimensions:"3x5",exclude:[1,4,6,8,10,13],unlockCategory:18,id:174},{dimensions:"3x5",exclude:[1,4,9,10],unlockCategory:18,id:175},{dimensions:"3x5",exclude:[3,4,6,8,10,11],unlockCategory:18,id:176},{dimensions:"4x4",exclude:[0,3,12,15],unlockCategory:18,id:177},{dimensions:"8x8",exclude:[1,2,4,9,10,12,13,14,22,24,25,26,27,28,30,32,33,38,41,42,44,45,46,49,50,60,61,63],unlockCategory:18,id:178},{dimensions:"7x4",exclude:[1,5,8,10,12,15,17,19,24],unlockCategory:18,id:178},{dimensions:"7x6",exclude:[8,9,10,11,12,17,21,22,24,26,27,28,29,31,38,39,40,41],unlockCategory:18,id:179},{dimensions:"7x5",exclude:[4,5,8,9,11,12,15,16,18,19,22,23,25,26,29,30],unlockCategory:18,id:180},{dimensions:"3x9",exclude:[1,5,10,12,14,16,21,25],unlockCategory:18,id:181},{dimensions:"9x3",exclude:[1,5,10,12,14,16,21,25],unlockCategory:18,id:182},{dimensions:"7x4",exclude:[0,1,2,3,4,7,8,9,12,14,17,19,22,24,26],unlockCategory:18,id:183},{dimensions:"9x5",exclude:[0,1,2,3,4,5,6,9,10,11,12,13,16,18,19,20,23,25,27,30,32,34,37,39,41,43],unlockCategory:18,id:184},{dimensions:"11x6",exclude:[0,1,2,3,4,5,6,7,8,11,12,13,14,15,16,17,20,22,23,24,25,26,29,31,33,34,35,38,40,42,44,47,49,51,53,56,58,60,62,64],unlockCategory:18,id:185}].map(e=>{const n=parseInt(e.dimensions.split("x")[0]),s=parseInt(e.dimensions.split("x")[1]),{unlockCategory:i,id:r}=e;return new et({width:n,height:s,unlockCategory:i-1,id:r,exclude:e.exclude??[]})}));let ee=et;const qt=class qt{static get CATEGORIES(){const e=new Set(qt.PUZZLES.map(n=>n.unlockCategory)).size;return new Array(e).fill(0).map((n,s)=>qt.PUZZLES.filter(i=>i.unlockCategory===s))}get silverMoves(){const e=this.solution.length;return Math.max(e+2*this.modulo,Math.ceil(e*1.5)+e*1.5%this.modulo?this.modulo:0)}constructor({base:e,target:n,moves:s,solution:i,id:r,modulo:o,unlockCategory:a}){es(e,n,s,i,r,o),this.base=e,this.target=n,this.moves=s,this.solution=i,this.id=r,this.modulo=o,this.unlockCategory=a??Math.floor(r/5)+1,this.score=new Array(3).fill().map((l,c)=>Math.round(this.solution.length*20*(c+1)/6)),this.latestAddedScore=0}isSolvedWith(e){return this.target.matrix.every((n,s)=>n.every((i,r)=>i===e.matrix[s][r]))}targetIsWhite(e,n){return n===void 0?this.target.matrix[Math.floor(e/this.target.width)][e%this.target.width]===this.modulo-1:this.target.matrix[e][n]===this.modulo-1}baseIsWhite(e,n){return n===void 0?this.base.matrix[Math.floor(e/this.base.width)][e%this.base.width]===this.modulo-1:this.base.matrix[e][n]===this.modulo-1}medalFromMoves(e){return this.solved?e<=this.solution.length?{medal:qt.MEDALS.GOLD,movesRequiredForNextMedal:-1}:e<=this.silverMoves?{medal:qt.MEDALS.SILVER,movesRequiredForNextMedal:this.solution.length}:{medal:qt.MEDALS.BRONZE,movesRequiredForNextMedal:this.silverMoves}:{medal:qt.MEDALS.NOT_COMPLETED,movesRequiredForNextMedal:-1}}get solved(){return Y().stats.puzzlesCompleted.some(({id:n})=>n===this.id)}get completionMoves(){const e=Y();for(let n=0;n<e.stats.puzzlesCompleted.length;n++){const s=e.stats.puzzlesCompleted[n];if(s.id===this.id)return s.completionMoves}return-1}set completionMoves(e){Gs(this.unlockCategory>=0);const n=Y();for(let i=0;i<n.stats.puzzlesCompleted.length;i++){const r=n.stats.puzzlesCompleted[i];if(r.id===this.id){if(r.completionMoves<=e)return;const o=this.medalFromMoves(e).medal,a=this.medalFromMoves(r.completionMoves).medal;let l=0;for(let c=a+1;c<=o;c++)l+=this.score[c]*2**this.unlockCategory;n.score+=l,this.latestAddedScore=l,r.completionMoves=Math.min(e,r.completionMoves);return}}n.stats.puzzlesCompleted.push({id:this.id,completionMoves:e});let s=0;for(let i=0;i<=this.medalFromMoves(e).medal;i++)s+=this.score[i]*2**this.unlockCategory;n.score+=s,this.latestAddedScore=s}};jt(qt,"PUZZLES",[{moves:20,base:[[0,1,1,1],[1,0,1,1],[1,1,0,1],[1,1,1,0]],target:[[1,1,1,0],[1,1,0,1],[1,0,1,1],[0,1,1,1]],solution:[0,1,2,3,7,11,15,14,13,12,8,4],unlockCategory:2},{moves:12,base:[[2,1,1,2],[0,2,2,0],[0,2,2,0],[2,1,1,2]],target:[[2,0,0,2],[1,2,2,1],[1,2,2,1],[2,0,0,2]],solution:[1,2,7,11,14,13,8,4],unlockCategory:3},{moves:10,base:[[2,1,2],[0,0,0],[0,1,0],[0,0,0],[2,1,2]],target:[[2,1,2],[0,0,0],[0,0,0],[0,0,0],[2,1,2]],solution:[3,6,9,10,13,11,8,5],unlockCategory:3},{moves:6,base:[[0,1,0],[0,2,0],[2,1,2],[0,1,0]],target:[[1,1,1],[0,2,0],[2,0,2],[0,1,0]],solution:[0,5,7,10],unlockCategory:1},{moves:3,base:[[0,1,2],[1,2,0],[2,0,0]],target:[[1,1,2],[1,2,0],[2,0,0]],solution:[0,5,7],unlockCategory:0},{moves:8,base:[[2,2,0,2,2],[2,1,0,1,2],[0,0,0,0,0],[2,1,0,1,2],[2,2,0,2,2]],target:[[2,2,0,2,2],[2,0,0,0,2],[0,0,0,1,1],[2,0,1,1,2],[2,2,1,2,2]],solution:[2,7,10,11,12,18],unlockCategory:6},{moves:15,base:[[0,1,1,1,0],[1,0,1,0,1],[1,1,0,1,1],[1,0,1,0,1],[0,1,1,1,0]],target:[[1,0,0,0,1],[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0],[1,0,0,0,1]],solution:[6,9,13,14,17,21,22,24],unlockCategory:4},{moves:50,base:[[2,2,2,2,0,0,0,2,2,2,2],[2,2,0,0,0,0,0,0,0,2,2],[2,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,2],[2,2,0,0,0,0,0,0,0,2,2],[2,2,2,2,0,0,0,2,2,2,2]],target:[[2,2,2,2,0,0,1,2,2,2,2],[2,2,0,0,0,0,1,1,1,2,2],[2,0,0,0,0,0,0,1,1,1,2],[2,0,0,0,0,0,0,0,1,1,2],[0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,1,1],[1,1,0,0,0,0,0,0,1,1,1],[2,1,1,0,0,0,0,1,1,1,2],[2,1,1,1,1,1,1,1,1,1,2],[2,2,1,1,1,1,1,1,1,2,2],[2,2,2,2,1,1,1,2,2,2,2]],solution:[4,5,13,14,16,17,23,25,27,28,30,34,35,44,55,56,57,64,67,68,90,96,104],unlockCategory:15},{moves:8,base:[[1,1,1,2],[1,0,0,1],[1,0,0,1],[2,1,1,1]],target:[[1,1,1,2],[1,1,0,1],[1,0,1,1],[2,1,1,1]],solution:[0,1,4,5,10,11,14,15],unlockCategory:2},{moves:10,base:[[1,1,1,2],[0,1,2,0],[0,2,1,0],[2,0,0,0]],target:[[1,1,1,2],[0,0,2,0],[1,2,1,0],[2,0,1,0]],solution:[0,1,4,5,10,11,13],unlockCategory:3},{moves:5,base:[[2,0,2],[1,2,0],[1,1,0],[0,2,1],[2,0,2]],target:[[2,0,2],[1,2,1],[0,0,1],[1,2,0],[2,1,2]],solution:[6,7,9],unlockCategory:3},{moves:13,base:[[2,2,0,2,2,2],[2,0,0,0,2,2],[0,0,0,2,1,2],[2,0,2,1,1,1],[2,2,1,1,1,2],[2,2,2,1,2,2]],target:[[2,2,1,2,2,2],[2,1,1,1,2,2],[1,1,1,2,0,2],[2,1,2,0,0,0],[2,2,0,0,0,2],[2,2,2,0,2,2]],solution:[2,7,9,12,16,19,23,26,28,33],unlockCategory:7},{moves:6,base:[[2,2,2,1,2,2,2],[2,2,1,1,1,2,2],[1,1,1,1,1,1,1],[2,1,1,1,1,1,2],[2,2,1,1,1,2,2],[2,1,1,2,1,1,2],[1,1,2,2,2,1,1]],target:[[2,2,2,0,2,2,2],[2,2,0,0,0,2,2],[0,0,0,0,0,0,0],[2,0,0,0,0,0,2],[2,2,0,0,0,2,2],[2,0,0,2,0,0,2],[0,0,2,2,2,0,0]],solution:[10,14,20,31,42,48],unlockCategory:9},{moves:12,base:[[-1,1,1,1,1,-1],[1,1,0,1,1,1],[-1,1,1,1,1,-1]],target:[[-1,1,1,1,1,-1],[1,1,1,0,1,1],[-1,1,1,1,1,-1]],solution:[1,2,3,4,6,7,10,11,13,14,15,16],unlockCategory:5},{moves:30,base:[[1,0,2,2,0,0],[2,2,0,0,2,2],[1,1,0,1,1,1],[2,0,2,2,1,2]],target:[[1,1,2,2,0,1],[2,2,1,0,2,2],[1,1,0,1,0,1],[2,1,2,2,1,2]],solution:[4,8,9,12,14,17,19,22],unlockCategory:5},{moves:6,base:[[-1,0,0,-1,-1,-1,-1],[1,-1,-1,0,-1,-1,-1],[-1,1,-1,0,-1,-1,-1],[-1,-1,1,-1,1,1,-1],[-1,-1,-1,0,-1,-1,1],[-1,-1,-1,-1,0,-1,1],[-1,-1,-1,-1,-1,0,-1]],target:[[-1,1,1,-1,-1,-1,-1],[0,-1,-1,1,-1,-1,-1],[-1,0,-1,1,-1,-1,-1],[-1,-1,0,-1,0,0,-1],[-1,-1,-1,1,-1,-1,0],[-1,-1,-1,-1,1,-1,0],[-1,-1,-1,-1,-1,1,-1]],solution:[1,17,23,25,31,41],unlockCategory:6},{moves:9,base:[[0,1,1,-1,-1,-1],[1,-1,1,-1,-1,-1],[-1,1,1,-1,-1,-1],[-1,-1,-1,1,1,-1],[-1,-1,-1,1,-1,1],[-1,-1,-1,-1,1,0]],target:[[1,1,1,-1,-1,-1],[1,-1,0,-1,-1,-1],[-1,0,0,-1,-1,-1],[-1,-1,-1,0,0,-1],[-1,-1,-1,0,-1,1],[-1,-1,-1,-1,1,1]],solution:[0,1,6,8,13,21,22,27,35],unlockCategory:6},{moves:6,base:[[-1,-1,-1,1,-1,-1,-1],[-1,-1,1,0,1,-1,-1],[-1,1,0,0,0,1,-1],[1,0,0,0,0,0,1]],target:[[-1,-1,-1,1,-1,-1,-1],[-1,-1,1,1,1,-1,-1],[-1,1,0,0,0,1,-1],[1,1,1,0,1,1,1]],solution:[6,7,9,11,17,18],unlockCategory:7},{moves:10,base:[[1,1,1,1,1],[1,-1,1,-1,1],[1,-1,1,-1,1],[1,1,1,1,1],[1,-1,-1,-1,1],[1,0,-1,0,1],[1,1,1,1,1]],target:[[1,1,1,1,1],[1,-1,1,-1,1],[1,-1,1,-1,1],[0,0,0,0,0],[0,-1,-1,-1,0],[0,1,-1,1,0],[0,0,0,0,0]],solution:[1,2,3,5,7,9,15,18,30,33],unlockCategory:7},{moves:12,base:[[-1,1,1,1,-1,-1],[0,-1,1,-1,0,-1],[0,0,-1,0,0,0],[0,-1,1,-1,-1,0],[-1,1,1,-1,-1,-1],[-1,-1,1,1,-1,-1]],target:[[-1,0,0,0,-1,-1],[1,-1,1,-1,1,-1],[1,0,-1,0,1,1],[1,-1,1,-1,-1,0],[-1,0,0,-1,-1,-1],[-1,-1,0,1,-1,-1]],solution:[1,3,6,8,10,13,17,18,23,25,32,33],unlockCategory:7},{moves:9,base:[[-1,-1,-1,-1,-1,0,-1,-1],[0,0,0,0,-1,0,0,-1],[0,-1,-1,-1,0,0,-1,0],[-1,-1,0,0,-1,-1,-1,0],[-1,-1,0,0,-1,0,-1,-1],[-1,-1,-1,-1,0,-1,-1,-1]],target:[[-1,-1,-1,-1,-1,0,-1,-1],[0,0,0,0,-1,0,0,-1],[0,-1,-1,-1,0,0,-1,0],[-1,-1,0,1,-1,-1,-1,0],[-1,-1,0,0,-1,0,-1,-1],[-1,-1,-1,-1,0,-1,-1,-1]],solution:[8,9,11,20,21,23,26,27,31],unlockCategory:7},{moves:10,base:[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],target:[[0,1,1,0],[1,1,1,1],[1,1,1,1],[0,1,1,0]],solution:[1,2,4,7,8,11,13,14],unlockCategory:2},{moves:8,base:[[0,0,1,0,0],[1,2,1,2,1],[0,2,1,2,1],[1,2,0,2,0],[0,1,0,0,1]],target:[[0,1,0,1,0],[0,2,0,2,0],[0,2,0,2,0],[0,2,1,2,0],[0,1,1,1,0]],solution:[7,10,14,15,21,24],unlockCategory:5},{moves:5,base:[[0,0,1],[0,-1,1],[0,-1,1]],target:[[1,1,0],[1,-1,0],[1,-1,0]],solution:[0,1,2,3,5],unlockCategory:0},{moves:5,base:[[-1,1,1,-1],[1,0,1,1],[1,1,0,1],[-1,1,1,-1]],target:[[-1,0,0,-1],[0,1,0,0],[0,0,1,0],[-1,0,0,-1]],solution:[1,4,5,7,13],unlockCategory:2},{moves:10,base:[[0,1,0],[1,1,1],[0,1,0],[0,1,0]],target:[[1,0,1],[1,0,1],[0,0,0],[1,0,1]],solution:[0,1,2,3,5,6,8,9,10,11],unlockCategory:2},{moves:5,base:[[0,0,0],[0,1,0],[0,1,0]],target:[[1,1,1],[1,1,1],[1,0,1]],solution:[0,1,2,3,5,6,7,8],unlockCategory:1},{moves:8,base:[[-1,-1,1,1,1],[-1,-1,1,0,1],[1,1,1,1,1],[1,0,1,-1,-1],[1,1,1,-1,-1]],target:[[-1,-1,1,1,1],[-1,-1,0,0,1],[1,0,0,0,1],[1,0,0,-1,-1],[1,1,1,-1,-1]],solution:[2,3,4,7,8,9,13,14],unlockCategory:4},{moves:10,base:[[2,1,1,2],[1,1,2,1],[2,1,1,1],[2,2,1,2]],target:[[2,0,0,2],[0,0,2,0],[2,0,0,0],[2,2,0,2]],solution:[2,4,5,7,9,10,14],unlockCategory:3},{moves:7,base:[[-1,1,-1],[1,-1,1],[1,1,1],[1,-1,1],[1,-1,1]],target:[[-1,0,-1],[1,-1,1],[1,1,1],[1,-1,1],[1,-1,1]],solution:[1,3,5,9,11,12,14],unlockCategory:1},{moves:6,base:[[-1,0,-1],[0,-1,0],[1,-1,1],[1,1,-1],[-1,-1,1]],target:[[-1,1,-1],[1,-1,1],[1,-1,1],[0,0,-1],[-1,-1,0]],solution:[1,3,5,6,8,14],unlockCategory:1},{moves:6,base:[[1,1,1],[0,-1,1],[1,1,1],[1,-1,0],[1,1,1]],target:[[1,1,1],[1,-1,0],[1,1,1],[0,-1,1],[1,1,1]],solution:[0,2,3,5,6,8],unlockCategory:1},{moves:4,base:[[1,1,-1],[1,-1,0],[0,0,-1],[0,-1,1],[0,0,-1]],target:[[0,0,-1],[0,-1,1],[1,1,-1],[1,-1,0],[1,1,-1]],solution:[0,6,7,9],unlockCategory:1},{moves:25,base:[[1,1,1,-1],[-1,1,1,1],[1,1,1,-1],[-1,1,1,1]],target:[[0,1,1,-1],[-1,0,1,0],[1,0,1,-1],[-1,1,0,0]],solution:[7,8,9,10,11],unlockCategory:1},{moves:25,base:[[0,1,0,0,1,0,1],[1,2,2,1,2,2,1],[1,2,0,0,1,2,1],[0,0,1,1,0,1,0],[0,2,1,1,1,2,1],[0,2,2,0,2,2,0],[1,0,1,0,0,0,1]],target:[[1,1,1,1,1,1,1],[1,2,2,0,2,2,1],[1,2,0,0,0,2,1],[1,0,0,0,0,0,1],[1,2,0,0,0,2,1],[1,2,2,0,2,2,1],[1,1,1,1,1,1,1]],solution:[1,2,3,4,14,16,17,21,28,31,34,35,41,42,44,45,46,47],unlockCategory:12},{moves:30,base:[[0,1,2,1,0],[1,1,0,1,1],[2,1,0,0,2],[1,0,0,0,1],[0,0,2,0,0]],target:[[0,0,2,0,0],[1,0,0,0,1],[2,0,0,1,2],[1,1,0,0,0],[0,1,2,0,1]],solution:[1,3,4,6,7,17,18],unlockCategory:5},{moves:8,base:[[1,0,1,0,1],[0,1,0,1,0],[1,0,1,0,1],[0,1,0,1,0],[1,0,1,0,1]],target:[[0,1,0,1,0],[1,0,1,0,1],[0,1,0,1,0],[1,0,1,0,1],[0,1,0,1,0]],solution:[6,9,21,24],unlockCategory:4},{moves:12,base:[[2,2,2,2,2,0],[1,1,0,2,2,1],[0,2,2,1,0,1],[1,2,0,2,2,2],[2,2,1,2,2,2],[1,0,0,2,2,2]],target:[[2,2,2,2,2,1],[1,1,1,2,2,1],[1,2,2,1,1,1],[1,2,0,2,2,2],[2,2,1,2,2,2],[1,1,1,2,2,2]],solution:[6,11,12,15,17,18,20,32],unlockCategory:5},{moves:30,base:[[2,0,0,0,2],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[2,0,0,0,2]],target:[[2,1,1,1,2],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[2,1,1,1,2]],solution:[2,10,12,13,17],unlockCategory:6},{moves:30,base:[[0,1,0,0,1],[2,0,2,1,2],[2,1,2,0,2],[2,1,2,0,2],[0,0,1,1,1]],target:[[1,1,1,0,0],[2,1,2,1,2],[2,1,2,0,2],[2,1,2,1,2],[1,1,1,0,0]],solution:[2,3,6,11,20,24],unlockCategory:5},{moves:30,base:[[0,0,0,1,0,0],[0,1,1,1,1,1],[0,1,0,0,1,0],[1,1,0,1,1,1],[1,1,1,0,0,1],[1,0,0,1,1,0]],target:[[0,1,0,0,0,1],[0,0,1,1,0,1],[1,0,0,0,1,0],[0,1,1,1,1,0],[1,0,1,0,0,0],[0,0,0,1,0,0]],solution:[2,3,5,10,11,16,18,23,24,25,26,27,28,31,34],unlockCategory:8},{moves:30,base:[[2,2,0,2,2,2],[2,0,1,0,2,2],[2,2,0,2,0,2],[2,0,2,0,1,0],[0,1,0,2,0,2],[2,0,2,2,2,2]],target:[[2,2,0,2,2,2],[2,0,0,0,2,2],[2,2,0,2,0,2],[2,0,2,0,0,0],[0,0,0,2,0,2],[2,0,2,2,2,2]],solution:[2,9,14,16,19,21,23,25,26],unlockCategory:6},{moves:50,base:[[2,2,1,1,1,1,1,2,2,2,2],[2,1,1,1,1,1,1,1,0,1,2],[2,0,0,0,0,0,0,0,2,2,2],[1,0,0,0,0,0,0,0,0,0,2],[1,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,2],[2,2,0,0,0,0,0,0,2,2,2]],target:[[2,2,0,0,0,0,0,2,2,2,2],[2,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,1,1,0,1,2,2,2],[0,1,0,1,1,1,0,1,1,1,2],[0,1,0,0,1,1,1,0,1,1,1],[2,0,1,1,1,1,0,0,0,0,2],[2,2,1,1,1,1,1,1,2,2,2]],solution:[2,4,12,13,18,20,34,35,38,42,44,45,46,48,49,52,53,59,60,63,64,68,70],unlockCategory:15},{moves:25,base:[[2,2,2,2,2,2,0,2,2],[2,2,2,2,2,2,0,0,2],[2,2,2,2,2,2,2,0,2],[2,2,2,2,2,2,2,0,0],[2,2,2,2,2,2,0,0,0],[2,2,2,2,2,0,0,0,0],[0,0,2,2,0,0,1,0,2],[2,0,0,0,0,0,0,1,2],[2,2,2,0,0,0,2,2,2]],target:[[2,2,2,2,2,2,1,2,2],[2,2,2,2,2,2,1,1,2],[2,2,2,2,2,2,2,1,2],[2,2,2,2,2,2,2,1,0],[2,2,2,2,2,2,1,0,0],[2,2,2,2,2,1,0,0,0],[1,1,2,2,1,0,0,0,2],[2,1,1,1,0,0,0,0,2],[2,2,2,0,0,0,2,2,2]],solution:[16,42,43,44,50,51,52,53,55,58,59,70],unlockCategory:9},{moves:60,base:[[0,0,0,0,0,0,0],[0,1,0,1,0,1,0],[0,0,0,0,0,0,0],[0,1,0,1,0,1,0],[0,0,0,0,0,0,0],[0,1,0,1,0,1,0],[0,0,0,0,0,0,0]],target:[[0,0,0,0,0,0,0],[0,0,0,1,0,0,0],[0,0,0,0,0,0,0],[0,1,0,1,0,1,0],[0,0,0,0,0,0,0],[0,0,0,1,0,0,0],[0,0,0,0,0,0,0]],solution:[0,1,2,4,5,6,7,8,9,11,12,13,14,15,16,18,19,20,28,29,30,32,33,34,35,36,37,39,40,41,42,43,44,46,47,48],unlockCategory:9},{moves:60,base:[[1,1,1,0,0,0,0],[1,1,1,0,0,0,0],[1,1,1,0,0,0,0],[1,1,1,0,1,1,1],[0,0,0,0,1,1,1],[0,0,0,0,1,1,1],[0,0,0,0,1,1,1]],target:[[0,0,0,0,1,1,1],[0,0,0,0,1,1,1],[0,0,0,0,1,1,1],[1,1,1,1,1,1,1],[1,1,1,0,0,0,0],[1,1,1,0,0,0,0],[1,1,1,0,0,0,0]],solution:[0,1,3,5,6,7,10,13,21,22,24,26,27,35,38,41,42,43,45,47,48],unlockCategory:10},{moves:50,base:[[2,1,0,2,1,1,2],[1,1,0,1,1,1,1],[1,1,0,0,1,1,1],[1,1,1,0,1,1,1],[2,1,1,0,1,1,2],[2,2,1,1,0,2,2],[2,2,2,1,2,2,2]],target:[[2,1,1,2,1,1,2],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[2,1,1,1,1,1,2],[2,2,1,1,1,2,2],[2,2,2,1,2,2,2]],solution:[5,7,8,12,21,22,24,27,33],unlockCategory:9},{moves:50,base:[[1,2,1,2,1],[2,1,2,1,2],[1,2,0,2,1],[2,1,2,1,2],[1,2,1,2,1]],target:[[1,2,0,2,1],[2,0,2,0,2],[0,2,1,2,0],[2,0,2,0,2],[1,2,0,2,1]],solution:[2,10,12,14,22],unlockCategory:4},{moves:150,base:[[1,1,1,1,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,1,1]],target:[[0,0,0,0,1,1,1,1,0,0,0,0],[0,0,1,1,0,0,0,0,1,1,0,0],[0,1,0,1,0,0,0,0,1,0,1,0],[0,1,1,0,0,1,1,0,0,1,1,0],[1,0,0,0,1,1,1,1,0,0,0,1],[1,0,0,1,1,0,0,1,1,0,0,1],[1,0,0,1,1,0,0,1,1,0,0,1],[1,0,0,0,1,1,1,1,0,0,0,1],[0,1,1,0,0,1,1,0,0,1,1,0],[0,1,0,1,0,0,0,0,1,0,1,0],[0,0,1,1,0,0,0,0,1,1,0,0],[0,0,0,0,1,1,1,1,0,0,0,0]],solution:[1,2,3,5,6,8,9,10,12,13,14,19,21,23,24,25,28,31,34,35,36,47,50,52,53,54,57,58,60,64,65,66,67,71,72,76,77,78,79,83,85,86,89,90,91,93,96,107,108,109,112,115,118,119,120,122,124,129,130,131,133,134,135,137,138,140,141,142],unlockCategory:14},{moves:12,base:[[2,2,2,1,2,2,2],[2,2,0,2,0,2,2],[2,0,2,1,2,0,2],[1,2,1,2,1,2,1],[2,0,2,1,2,0,2],[2,2,0,2,0,2,2],[2,2,2,1,2,2,2]],target:[[2,2,2,0,2,2,2],[2,2,0,2,0,2,2],[2,0,2,1,2,0,2],[0,2,1,2,1,2,0],[2,0,2,1,2,0,2],[2,2,0,2,0,2,2],[2,2,2,0,2,2,2]],solution:[11,15,17,23,25,31,33,37],unlockCategory:4},{moves:36,base:[[2,2,1,1,1,1,1,2,2],[2,1,1,1,1,1,1,1,2],[1,1,2,2,1,2,2,1,1],[1,1,2,0,1,2,0,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,2,1,2,1,2,1,2,1]],target:[[2,2,0,0,0,0,0,2,2],[2,0,0,0,0,0,0,0,2],[0,0,2,2,0,2,2,0,0],[0,0,2,1,0,2,1,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,1,1,0,1,1,0],[0,0,1,0,0,1,0,0,1],[0,2,0,2,0,2,0,2,0]],solution:[2,4,5,13,26,27,30,31,36,37,40,43,44,48,49,53,54,57,60,71],unlockCategory:11},{moves:5,base:[[0,0,0],[0,0,0],[0,0,0]],target:[[1,1,0],[0,1,0],[0,1,1]],solution:[0,1,4,7,8],unlockCategory:0},{moves:6,base:[[1,1,0],[1,2,0],[0,0,1]],target:[[0,0,0],[0,2,0],[0,0,0]],solution:[1,2,3,4,5,6],unlockCategory:0},{moves:16,base:[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]],target:[[2,2,2,0,0],[2,2,0,0,0],[2,0,0,0,2],[0,0,0,2,2],[0,0,2,2,2]],solution:[0,0,2,2,3,3,6,6,7,10,10,11,12,15,15,18],modulo:3,unlockCategory:10},{moves:13,base:[[-1,-1,-1,-1,-1,-1,1,0,2,1],[-1,-1,-1,-1,-1,2,-1,-1,-1,-1],[-1,-1,-1,0,-1,1,-1,-1,-1,-1],[0,1,2,-1,2,-1,-1,-1,-1,-1],[-1,-1,-1,-1,1,-1,-1,-1,-1,-1]],target:[[-1,-1,-1,-1,-1,-1,1,1,1,1],[-1,-1,-1,-1,-1,2,-1,-1,-1,-1],[-1,-1,-1,2,-1,2,-1,-1,-1,-1],[1,1,1,-1,0,-1,-1,-1,-1,-1],[-1,-1,-1,-1,0,-1,-1,-1,-1,-1]],solution:[6,6,7,7,15,15,25,25,30,32,44,44],modulo:3,unlockCategory:10},{moves:18,base:[[2,-1,0,0,0,-1,2],[2,0,0,1,0,0,2],[2,-1,0,0,0,-1,2]],target:[[0,-1,0,1,0,-1,0],[0,1,1,2,1,1,0],[0,-1,0,1,0,-1,0]],solution:[2,3,4,7,9,11,13,16,17,18,2,3,4,9,11,16,17,18],unlockCategory:10,modulo:3},{moves:15,base:[[-1,-1,-1,1,-1,-1,-1],[-1,-1,1,1,1,-1,-1],[-1,1,1,2,1,1,-1],[1,1,1,1,1,1,1],[-1,0,0,0,0,0,-1],[-1,0,0,-1,0,0,-1],[-1,0,0,-1,0,0,-1],[-1,0,0,-1,0,0,-1]],target:[[-1,-1,-1,2,-1,-1,-1],[-1,-1,2,2,2,-1,-1],[-1,2,2,1,2,2,-1],[2,2,1,1,1,2,2],[-1,0,0,0,0,0,-1],[-1,0,0,-1,0,0,-1],[-1,0,0,-1,0,0,-1],[-1,0,0,-1,0,0,-1]],solution:[10,15,18,21,22,23,27,29,24,17,25,30,17,25,30],unlockCategory:10,modulo:3},{moves:10,base:[[0,0,-1,-1,1,1],[-1,-1,0,2,-1,-1],[1,1,2,0,0,0],[-1,1,-1,-1,0,-1]],target:[[2,1,-1,-1,1,2],[-1,-1,0,0,-1,-1],[2,1,0,0,1,2],[-1,2,-1,-1,2,-1]],solution:[1,8,9,16,1,8,9,16,4,12],unlockCategory:10,modulo:3},{moves:5,target:[[1,-1,-1,-1,0],[1,1,-1,-1,0],[0,1,1,-1,0],[0,-1,1,1,0],[0,-1,-1,1,0]],base:[[1,-1,-1,-1,1],[1,0,-1,-1,1],[1,0,0,-1,1],[1,-1,0,0,1],[1,-1,-1,1,1]],solution:[4,12,15,17,18],unlockCategory:1},{moves:12,base:[[-1,-1,0,-1,0,-1,-1,-1,-1,-1],[-1,-1,0,-1,-1,0,-1,-1,-1,-1],[0,0,-1,0,0,-1,-1,0,0,-1],[-1,-1,-1,0,0,-1,0,0,0,0],[-1,-1,-1,-1,0,0,0,0,0,1],[-1,-1,-1,-1,-1,0,0,-1,-1,-1]],target:[[-1,-1,0,-1,0,-1,-1,-1,-1,-1],[-1,-1,0,-1,-1,0,-1,-1,-1,-1],[0,0,-1,0,0,-1,-1,0,0,-1],[-1,-1,-1,0,0,-1,0,0,1,0],[-1,-1,-1,-1,0,0,0,0,0,0],[-1,-1,-1,-1,-1,0,0,-1,-1,-1]],solution:[20,21,23,28,34,36,37,38,39,49,55,56],unlockCategory:8}].sort((e,n)=>e.solution.length-n.solution.length).map((e,n)=>{const{base:s,target:i,moves:r,solution:o,modulo:a,unlockCategory:l}=e;e.target.modulo=a??2,s.forEach((g,w)=>g.forEach((M,P)=>{M===2&&e.target.modulo===2&&(s[w][P]=-1,i[w][P]=-1)}));const c=s[0].length,u=s.length,d=ee.getExcludeFromMatrix(s),h=new ee({width:c,height:u,exclude:d,unlockCategory:0});h.setMatrix(s);const m=new ee({width:c,height:u,exclude:d,unlockCategory:0});return m.setMatrix(i),new qt({base:h,target:m,moves:r,solution:o,id:n,modulo:a??2,unlockCategory:l})})),jt(qt,"MEDALS",{NOT_COMPLETED:-1,BRONZE:0,SILVER:1,GOLD:2});let Nt=qt;class ne{constructor({id:e,title:n,description:s,settings:i}){es(e,n,i),this.id=e,this.title=n??"",this.description=s,this.settings=i,this.process=new Cs(this)}}const at=class at{constructor({timeLimit:e,moveLimit:n,patternList:s,patternSequence:i,patternCount:r,patternListOrder:o,difficulty:a,firstTimeScore:l,defaults:{timeLimitPerPattern:c,moveLimitPerPattern:u,bonusTimePerPattern:d,moduloPerPattern:h}={}}){es(a),Gs(s instanceof Array!=i instanceof ps),this.timeLimit=e??at.GLOBAL_DEFAULTS.timeLimit,this.moveLimit=n??at.GLOBAL_DEFAULTS.moveLimit,this.patternList=s,this.patternSequence=i,this.patternCount=r??at.GLOBAL_DEFAULTS.patternCount,this.patternListOrder=o??at.GLOBAL_DEFAULTS.patternListOrder,this.difficulty=a,this.firstTimeScore=l??at.GLOBAL_DEFAULTS.firstTimeScore,this.defaults={timeLimitPerPattern:c,moveLimitPerPattern:u,bonusTimePerPattern:d,moduloPerPattern:h},this.isSequence=this.patternSequence!==void 0,this.isInfinite=this.patternCount===-1,this.applyDefaults()}applyDefaults(){var e,n,s,i;if(this.isSequence)(e=this.patternSequence.initialState).timeLimitPerPattern??(e.timeLimitPerPattern=this.defaults.timeLimitPerPattern??at.GLOBAL_DEFAULTS.timeLimitPerPattern),(n=this.patternSequence.initialState).moveLimitPerPattern??(n.moveLimitPerPattern=this.defaults.moveLimitPerPattern??at.GLOBAL_DEFAULTS.moveLimitPerPattern),(s=this.patternSequence.initialState).bonusTimePerPattern??(s.bonusTimePerPattern=this.defaults.bonusTimePerPattern??at.GLOBAL_DEFAULTS.bonusTimePerPattern),(i=this.patternSequence.initialState).moduloPerPattern??(i.moduloPerPattern=this.defaults.moduloPerPattern??at.GLOBAL_DEFAULTS.moduloPerPattern);else for(const r of this.patternList)r.timeLimitPerPattern??(r.timeLimitPerPattern=this.defaults.timeLimitPerPattern??at.GLOBAL_DEFAULTS.timeLimitPerPattern),r.moveLimitPerPattern??(r.moveLimitPerPattern=this.defaults.moveLimitPerPattern??at.GLOBAL_DEFAULTS.moveLimitPerPattern),r.bonusTimePerPattern??(r.bonusTimePerPattern=this.defaults.bonusTimePerPattern??at.GLOBAL_DEFAULTS.bonusTimePerPattern),r.moduloPerPattern??(r.moduloPerPattern=this.defaults.moduloPerPattern??at.GLOBAL_DEFAULTS.moduloPerPattern)}};jt(at,"LIST_ORDERS",{LINEAR:"linear",RANDOM:"random"}),jt(at,"GLOBAL_DEFAULTS",{timeLimit:-1,moveLimit:-1,patternCount:-1,patternListOrder:at.LIST_ORDERS.RANDOM,timeLimitPerPattern:-1,moveLimitPerPattern:-1,bonusTimePerPattern:0,moduloPerPattern:2,firstTimeScore:100});let K=at;class Ie{constructor({id:e,layout:n,timeLimitPerPattern:s,moveLimitPerPattern:i,bonusTimePerPattern:r,moduloPerPattern:o}){es(e,n),this.id=e,this.layout=n,this.timeLimitPerPattern=s,this.moveLimitPerPattern=i,this.bonusTimePerPattern=r,this.moduloPerPattern=o}static fromId(e,n){const s=ee.fromId(e);return new Ie({layout:s,...n})}copy(){return new Ie({...this,layout:this.layout.copy()})}}const kt=class kt{constructor(e){es(e),this.settings=e.settings,this.id=e.id,this.firstTime=!0,this.temporaryScore=0,this.latestAddedScore=0}init(){if(this.state=kt.STATE.NOT_STARTED,this.patternIndex=0,this.timeRemaining=this.settings.timeLimit,this.movesRemaining=this.settings.moveLimit,this.temporaryScore=0,this.settings.isInfinite)this.patternGenerator=this.createPatternGenerator(),this.currentPattern=this.patternGenerator.next().value;else{if(this.patternsToBePlayed=this.generatePatternsToBePlayed(),this.difficulties=this.settings.difficulty(this.patternsToBePlayed),this.difficulties.length!==this.patternsToBePlayed.length)throw new Error(`Invalid difficulty array. Expected ${this.patternsToBePlayed.length} elements, got ${difficulties.length}.`);this.randomizePatterns(this.difficulties),this.currentPattern=this.patternsToBePlayed[0]}this.patternTime=this.currentPattern.timeLimitPerPattern,this.patternMoves=this.currentPattern.moveLimitPerPattern,this.patternModulo=this.currentPattern.moduloPerPattern,this.patternBonusTime=this.currentPattern.bonusTimePerPattern,clearInterval(this.timerId),this.timerId=null,this.advanceTimers=!0}start(){this.advanceTimers=!0,this.state=kt.STATE.IN_PROGRESS,clearInterval(this.timerId),this.timerId=setInterval(()=>{if(this.settings.timeLimit!==-1&&this.advanceTimers&&(this.timeRemaining--,this.timeRemaining<=0)){this.lost(kt.STATE.LOST_TIME);return}if(this.patternTime!==-1&&this.advanceTimers&&(this.patternTime--,this.patternTime<=0)){this.lost(kt.STATE.LOST_TIME);return}},1e3)}pause(){this.state=kt.STATE.PAUSED,this.advanceTimers=!1}resume(){this.state=kt.STATE.IN_PROGRESS,this.advanceTimers=!0}quit(){this.state=kt.STATE.NOT_STARTED,clearInterval(this.timerId)}handleClick(){if(this.state===kt.STATE.IN_PROGRESS){if(this.currentPattern.layout.isSolved(this.patternModulo)){if(this.patternBonusTime!==-1&&(this.timeRemaining+=this.patternBonusTime),this.patternIndex++,this.settings.isInfinite){const e=this.settings.difficulty(this.patternIndex);this.temporaryScore+=Math.round(e*(1.1+e/(this.currentPattern.layout.nTiles()*.8+10))*(this.patternTime===-1?1:1.5)*(this.patternMoves===-1?1:1.5)),this.currentPattern=this.patternGenerator.next().value}else{if(this.patternIndex===this.settings.patternCount){this.won();return}this.currentPattern=this.patternsToBePlayed[this.patternIndex]}this.patternTime=this.currentPattern.timeLimitPerPattern,this.patternMoves=this.currentPattern.moveLimitPerPattern,this.patternModulo=this.currentPattern.moduloPerPattern,this.patternBonusTime=this.currentPattern.bonusTimePerPattern;return}if(this.settings.moveLimit!==-1&&(this.movesRemaining--,this.movesRemaining<=0)){this.lost(kt.STATE.LOST_MOVES);return}if(this.patternMoves!==-1&&(this.patternMoves--,this.patternMoves<=0)){this.lost(kt.STATE.LOST_MOVES);return}}}generatePatternsToBePlayed(){if(this.settings.isSequence){const e=[this.settings.patternSequence.initialState.copy()];for(let n=1;n<this.settings.patternCount;n++)e.push(this.settings.patternSequence.transition(e[n-1]));return e}else if(this.settings.patternListOrder===K.LIST_ORDERS.LINEAR){const e=[];for(let n=0;n<this.settings.patternCount;n++)e.push(this.settings.patternList[n%this.settings.patternList.length].copy());return e}else if(this.settings.patternListOrder===K.LIST_ORDERS.RANDOM){const e=[],n=[...this.settings.patternList];for(let s=0;s<this.settings.patternCount;s++){const i=Math.floor(Math.random()*n.length);e.push(n.splice(i,1)[0].copy()),n.length===0&&n.push(...this.settings.patternList)}return e}else throw new Error(`Invalid pattern list order '${this.settings.patternListOrder}'`)}randomizePatterns(e){let n=0;for(const s of this.patternsToBePlayed){const i=e[n++];if(i==null)throw new Error("Invalid difficulty array.");s.layout=s.layout.generatePosition(i,s.moduloPerPattern)}}won(){this.state=kt.STATE.WON,clearInterval(this.timerId);const e=Y();if(!this.settings.isInfinite){let n=0;this.firstTime&&(this.firstTime=!1,n+=this.settings.firstTimeScore);const s=this.difficulties.map((o,a)=>{const l=this.patternsToBePlayed[a],c=l.timeLimitPerPattern===-1?1:1.5,u=l.moveLimitPerPattern===-1?1:1.5;return Math.round(o*(1.1+o/(this.patternsToBePlayed[a].layout.nTiles()*.8+10)))*c*u}).reduce((o,a)=>o+a,0),i=this.settings.timeLimit===-1?1:1.5,r=this.settings.moveLimit===-1?1:1.5;n+=s*i*r*2**this.unlockCategory,e.stats.challengesCompleted.push(this.id),e.score+=n,this.latestAddedScore=n}}lost(e){if(this.state=e,clearInterval(this.timerId),this.settings.isInfinite){const n=Y();n.score+=this.temporaryScore*(this.unlockCategory+1)}}*createPatternGenerator(){if(this.settings.isSequence){const e=this.settings.patternSequence.initialState.copy();for(e.layout=e.layout.generatePosition(this.settings.difficulty(this.patternIndex),e.moduloPerPattern),yield e;;){const n=this.settings.patternSequence.transition(this.currentPattern);n.layout=n.layout.generatePosition(this.settings.difficulty(this.patternIndex),n.moduloPerPattern),yield n.copy()}}else if(this.settings.patternListOrder===K.LIST_ORDERS.LINEAR)for(;;)for(const e of this.settings.patternList){const n=e.copy();n.layout=n.layout.generatePosition(this.settings.difficulty(this.patternIndex),n.moduloPerPattern),yield n}else if(this.settings.patternListOrder===K.LIST_ORDERS.RANDOM)for(;;){const e=[...this.settings.patternList];for(;e.length;){const n=Math.floor(Math.random()*e.length),s=e.splice(n,1)[0].copy();s.layout=s.layout.generatePosition(this.settings.difficulty(this.patternIndex),s.moduloPerPattern),yield s}}else throw new Error(`Invalid pattern list order '${this.settings.patternListOrder}'`)}};jt(kt,"STATE",{NOT_STARTED:0,IN_PROGRESS:1,WON:2,LOST_TIME:3,LOST_MOVES:4,PAUSED:5});let Cs=kt;class ps{constructor(e,n){this.initialState=e.copy(),this.transition=n}}const{LINEAR:mt,RANDOM:st}=K.LIST_ORDERS;function gt(t,e,n=1e3){for(let s=0;s<n;s++){let i=e,r=[];for(let o=0;o<t.length;o++){let[a,l]=t[o],c=pk(i,t,o);if(c<a)break;let u=mk(a,Math.min(l,c));r.push(u),i-=u}if(i===0)return r}return null}function pk(t,e,n){let s=t;for(let i=n+1;i<e.length;i++)s-=e[i][0];return s}function mk(t,e){return Math.floor(Math.random()*(e-t+1))+t}const an=(t,e)=>()=>new Array(t).fill(e),ln=(t,e,n)=>()=>gt(new Array(e).fill(t),n),Ee=t=>t.map((e,n)=>Ie.fromId(e,{id:n})),Xl=t=>{const e=t.layout.copy(),{exclude:n}=e,s=e.width*e.height,i=Math.floor(Math.random()*s);if(n.length===s)return t;if(n.includes(i))return Xl(t.copy());n.push(i);const r=new ee({...e,exclude:n});return new Ie({...t,layout:r})},Jl=t=>{const e=t.layout.copy(),{exclude:n}=e,s=e.width*e.height,i=Math.floor(Math.random()*s);if(n.length===0)return t;if(!n.includes(i))return Jl(t.copy());n.splice(n.indexOf(i),1);const r=new ee({...e,exclude:n});return new Ie({...t,layout:r})},rl=t=>Jl(Jl(Xl(Xl(t)))),gk=(t,e)=>{let n=t.map(s=>[...s]);for(let s=0;s<e;s++)n=_k(n);return n},_k=t=>{const e=t.map(n=>[...n]);for(let n=0;n<1;n++)e.unshift(new Array(t[0].length).fill(-1)),e.push(new Array(t[0].length).fill(-1)),e.forEach(s=>{s.unshift(-1),s.push(-1)});return e},ol=t=>{const n=t.layout.matrix.map((i,r)=>i.map((o,a)=>{const c=yk(t.layout,a,r).filter(u=>u!==-1).length;return o!==-1?c===2||c===3?1:-1:c===3?1:-1})),s=t.layout.copy();return s.setMatrix(n),new Ie({...t,layout:s})},yk=(t,e,n)=>{const{width:s,height:i}=t,r=[];for(let o=-1;o<=1;o++){const a=((n+o)%i+i)%i;if(!(a<0||a>=i))for(let l=-1;l<=1;l++){const c=((e+l)%s+s)%s;c<0||c>=s||o===0&&l===0||r.push(t.matrix[a][c])}}return r},zs=(t,e)=>{const n=ee.fromId(t),s=gk(n.matrix,e);return new Ie({id:t,layout:new ee({width:n.width+2*e,height:n.height+2*e,exclude:ee.getExcludeFromMatrix(s)})})},jo=[{title:"Category 1",unlockCategory:0,allUnlocked:!1,challenges:[new ne({id:0,title:"Normal",settings:new K({timeLimit:60,patternList:Ee([0,14,20,21,22,23,46]),patternCount:4,difficulty:ln([3,5],4,19)})}),new ne({id:1,title:"Hard",settings:new K({timeLimit:60,patternList:Ee([0,14,20,21,22,23,46]),patternCount:8,difficulty:ln([3,5],8,37)})}),new ne({id:2,title:"Expert",settings:new K({timeLimit:60,patternList:Ee([0,14,20,21,22,23,46]),patternCount:16,difficulty:ln([3,6],16,70)})})]},{title:"Think Fast",unlockCategory:0,allUnlocked:!1,challenges:[new ne({id:3,title:"Normal",settings:new K({timeLimit:60,patternList:[new Ie({id:0,layout:ee.fromId(0),moveLimitPerPattern:7})],patternCount:5,patternListOrder:mt,difficulty:an(5,3)})}),new ne({id:4,title:"Hard",settings:new K({timeLimit:60,patternList:[new Ie({id:0,layout:ee.fromId(0),moveLimitPerPattern:5})],patternCount:7,patternListOrder:st,difficulty:an(7,3)})}),new ne({id:5,title:"Expert",settings:new K({timeLimit:60,patternList:[new Ie({id:0,layout:ee.fromId(0),moveLimitPerPattern:3})],patternCount:30,patternListOrder:st,difficulty:an(30,3)})})]},{title:"Read",unlockCategory:1,allUnlocked:!1,challenges:[new ne({id:6,title:"Normal",settings:new K({patternList:Ee([119,109,110,111,142,143,144,145,131,166,146,130,132,133,156,167,168,169,161,170,171,172,173,174,175,176]),patternCount:26,patternListOrder:mt,difficulty:an(26,3),defaults:{timeLimitPerPattern:10}})})]},{title:"Count",unlockCategory:1,allUnlocked:!1,challenges:[new ne({id:7,title:"Count",settings:new K({moveLimit:45,patternList:Ee([156,157,158,159,160,161,162,163,164,165]),patternCount:10,patternListOrder:mt,difficulty:an(10,3)})})]},{title:"Category 3",unlockCategory:2,allUnlocked:!1,challenges:[new ne({id:8,title:"Normal",settings:new K({timeLimit:60,patternList:Ee([1,10,11,24,25,27,28,86]),patternCount:6,patternListOrder:st,difficulty:ln([5,7],6,34)})}),new ne({id:9,title:"Hard",settings:new K({timeLimit:60,patternList:Ee([1,10,11,24,25,27,28,86]),patternCount:8,patternListOrder:st,difficulty:()=>gt([[7,11],[6,10],[4,7],[7,11],[7,11],[4,6],[4,6],[4,7]],46)})}),new ne({id:10,title:"Expert",settings:new K({timeLimit:75,patternList:Ee([1,10,11,24,25,27,28,86]),patternCount:16,patternListOrder:st,difficulty:()=>gt([[5,11],[6,10],[4,7],[5,11],[5,11],[4,6],[4,6],[4,7],[5,11],[6,10],[4,7],[5,11],[5,11],[4,6],[4,6],[4,7]],86)})})]},{title:"Tile Centipede",unlockCategory:2,allUnlocked:!1,challenges:[new ne({id:11,title:"Normal",settings:new K({timeLimit:50,patternList:Ee([86,183,184,185]),patternCount:4,patternListOrder:mt,difficulty:()=>gt([[4,5],[5,7],[8,13],[10,18]],30)})}),new ne({id:12,title:"Hard",settings:new K({timeLimit:50,patternList:Ee([86,183,184,185]),patternCount:4,patternListOrder:mt,difficulty:()=>gt([[4,5],[5,7],[9,13],[13,18]],41)})}),new ne({id:13,title:"Expert",settings:new K({timeLimit:30,patternList:Ee([86,183,184,185]),patternCount:4,patternListOrder:mt,difficulty:()=>gt([[4,5],[5,7],[9,13],[13,18]],40)})})]},{title:"Category 4",unlockCategory:3,allUnlocked:!1,challenges:[new ne({id:14,title:"Normal",settings:new K({timeLimit:60,patternList:Ee([26,30,33,62,85,100,128]),patternCount:6,patternListOrder:st,difficulty:ln([4,8],6,40)})}),new ne({id:15,title:"Hard",settings:new K({timeLimit:60,patternList:Ee([26,30,33,62,85,100,128]),patternCount:7,patternListOrder:st,difficulty:()=>gt([[7,11],[5,7],[5,8],[5,8],[4,8],[4,8],[6,12]],45)})}),new ne({id:16,title:"Expert",settings:new K({timeLimit:70,patternList:Ee([26,30,33,62,85,100,128]),patternCount:14,patternListOrder:st,difficulty:()=>gt([[7,11],[5,7],[5,8],[5,8],[4,8],[4,8],[6,12],[7,11],[5,7],[5,8],[5,8],[4,8],[4,8],[6,12]],85)})})]},{title:"Unconventional",unlockCategory:3,allUnlocked:!1,challenges:[new ne({id:17,title:"Normal",settings:new K({patternList:Ee([29,29,29,29]),patternCount:4,patternListOrder:mt,difficulty:()=>[3,4,5,6]})}),new ne({id:18,title:"Hard",settings:new K({timeLimit:60,patternList:Ee([29,29,29,29]),patternCount:4,patternListOrder:mt,difficulty:()=>[4,5,6,7]})}),new ne({id:19,title:"Expert",settings:new K({patternList:[new Ie({id:29,layout:ee.fromId(29),moveLimitPerPattern:20}),new Ie({id:29,layout:ee.fromId(29),moveLimitPerPattern:20}),new Ie({id:29,layout:ee.fromId(29),moveLimitPerPattern:20}),new Ie({id:29,layout:ee.fromId(29),moveLimitPerPattern:20}),new Ie({id:29,layout:ee.fromId(29),moveLimitPerPattern:20}),new Ie({id:29,layout:ee.fromId(29),moveLimitPerPattern:20})],patternCount:6,patternListOrder:mt,difficulty:()=>[3,4,5,6,7,8]})})]},{title:"Category 5",unlockCategory:4,allUnlocked:!1,challenges:[new ne({id:20,title:"Normal",settings:new K({timeLimit:45,patternList:Ee([2,37,38,53,56,58,138,31]),patternCount:6,patternListOrder:st,difficulty:ln([5,8],6,45)})}),new ne({id:21,title:"Hard",settings:new K({timeLimit:60,patternList:Ee([2,37,38,53,56,58,138,31]),patternCount:10,patternListOrder:st,difficulty:()=>gt([[5,9],[5,9],[5,9],[4,7],[5,9],[5,5],[4,6],[5,9],[5,9],[5,9]],69)})}),new ne({id:22,title:"Expert",settings:new K({timeLimit:60,patternList:Ee([2,37,38,53,56,58,138,31]),patternCount:16,patternListOrder:st,difficulty:()=>gt([[5,9],[5,9],[5,9],[4,7],[5,9],[5,5],[4,6],[5,9],[5,9],[5,9],[5,9],[4,7],[5,9],[5,5],[4,6],[5,9]],95)})})]},{title:"Category 6",unlockCategory:5,allUnlocked:!1,challenges:[new ne({id:23,title:"Normal",settings:new K({timeLimit:60,patternList:Ee([36,48,49,69,70,84,102,103,106]),patternCount:6,patternListOrder:st,difficulty:ln([6,9],6,50)})}),new ne({id:24,title:"Hard",settings:new K({timeLimit:60,patternList:Ee([36,48,49,69,70,84,102,103,106]),patternCount:9,patternListOrder:st,difficulty:()=>gt([[5,8],[5,8],[5,8],[8,12],[6,9],[6,9],[6,6],[9,12],[10,14]],80)})}),new ne({id:25,title:"Expert",settings:new K({timeLimit:120,patternList:Ee([36,48,49,69,70,84,102,103,106]),patternCount:18,patternListOrder:st,difficulty:()=>gt([[5,8],[5,8],[5,8],[8,12],[6,9],[6,9],[6,6],[9,12],[10,14],[5,8],[5,8],[5,8],[8,12],[6,9],[6,9],[6,6],[9,12],[10,14]],130)})})]},{title:"Corrupted",unlockCategory:4,allUnlocked:!0,challenges:[new ne({id:26,title:"Normal (5x5)",settings:new K({timeLimit:60,patternSequence:new ps(zs(2,1),rl),difficulty:t=>Math.floor(7*Math.log10(t+1)+3),defaults:{bonusTimePerPattern:5}})}),new ne({id:27,title:"Hard (5x5)",settings:new K({timeLimit:30,patternSequence:new ps(zs(2,1),rl),difficulty:t=>Math.floor(7*Math.log10(t+1)+3),defaults:{bonusTimePerPattern:5}})}),new ne({id:28,title:"Easy (5x5)",settings:new K({timeLimit:45,patternSequence:new ps(zs(2,1),rl),difficulty:t=>Math.floor(7*Math.log10(t+1)+3),defaults:{bonusTimePerPattern:15}})})]},{title:"Snake",unlockCategory:5,allUnlocked:!1,challenges:[new ne({id:29,title:"Normal",settings:new K({moveLimit:45,patternList:Ee([156]),patternCount:1,patternListOrder:st,difficulty:an(10,3)})}),new ne({id:30,title:"Hard",settings:new K({moveLimit:45,patternList:Ee([156,157,158,159,160,161,162,163,164,165]),patternCount:10,patternListOrder:st,difficulty:an(10,3)})}),new ne({id:31,title:"Survival",settings:new K({timeLimit:10,patternList:Ee([156,157,158,159,160,161,162,163,164,165]),patternCount:10,patternListOrder:mt,difficulty:an(10,3)})})]},{title:"Category 7",unlockCategory:6,allUnlocked:!1,challenges:[new ne({id:32,title:"Normal",settings:new K({timeLimit:60,patternList:Ee([15,44,47,52,65,87,97,101,117]),patternCount:6,patternListOrder:st,difficulty:ln([7,10],6,50)})}),new ne({id:33,title:"Hard",settings:new K({timeLimit:80,patternList:Ee([15,44,47,52,65,87,97,101,117]),patternCount:9,patternListOrder:st,difficulty:()=>gt([[5,9],[9,14],[7,10],[8,12],[10,15],[10,17],[8,13],[10,14],[8,13]],90)})}),new ne({id:34,title:"Expert",settings:new K({timeLimit:90,patternList:Ee([15,44,47,52,65,87,97,101,117]),patternCount:18,patternListOrder:st,difficulty:()=>gt([[5,9],[9,14],[7,10],[8,12],[10,15],[10,17],[8,13],[10,14],[8,13],[5,9],[9,14],[7,10],[8,12],[10,15],[10,17],[8,13],[10,14],[8,13]],155)})})]},{title:"Metamorphosis",unlockCategory:6,allUnlocked:!1,challenges:[new ne({id:35,title:"Normal",settings:new K({timeLimit:50,patternList:Ee([97,188,189,190,65]),patternCount:5,patternListOrder:mt,difficulty:ln([6,9],5,39)})}),new ne({id:36,title:"Hard",settings:new K({timeLimit:55,patternList:Ee([65,191,192,193,101]),patternCount:5,patternListOrder:mt,difficulty:ln([8,12],5,50)})}),new ne({id:37,title:"EXPERT TODO",settings:new K({moveLimit:45,patternList:Ee([97,188,189,190,65]),patternCount:5,patternListOrder:mt,difficulty:an(5,5)})})]},{title:"Game of Life",unlockCategory:7,allUnlocked:!0,challenges:[new ne({id:38,title:"Q survival",settings:new K({timeLimit:30,patternSequence:new ps(zs(168,6),ol),difficulty:t=>Math.floor(7*Math.log10(t+1)+3),defaults:{bonusTimePerPattern:15}})}),new ne({id:39,title:"Smiley survival",settings:new K({timeLimit:30,patternSequence:new ps(zs(186,8),ol),difficulty:t=>Math.floor(7*Math.log10(t+1)+3),defaults:{bonusTimePerPattern:15}})}),new ne({id:40,title:"Arrow survival",settings:new K({timeLimit:30,patternSequence:new ps(zs(187,6),ol),difficulty:t=>Math.floor(7*Math.log10(t+1)+3),defaults:{bonusTimePerPattern:15}})})]},{title:"Back to basics",unlockCategory:7,allUnlocked:!1,challenges:[new ne({id:41,title:"Normal",settings:new K({timeLimit:100,patternList:[new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:2}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:3}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:4})],patternCount:3,patternListOrder:mt,difficulty:an(3,7)})}),new ne({id:42,title:"Hard",settings:new K({timeLimit:100,patternList:[new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:2}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:3}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:4}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:5})],patternCount:4,patternListOrder:mt,difficulty:()=>gt([[5,7],[7,12],[9,12],[9,12]],34)})}),new ne({id:43,title:"Expert",settings:new K({timeLimit:100,patternList:[new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:2}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:3}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:4}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:5}),new Ie({id:11,layout:ee.fromId(11),moduloPerPattern:6})],patternCount:5,patternListOrder:mt,difficulty:()=>gt([[5,7],[7,12],[9,12],[9,12],[10,13]],42)})})]}].map(t=>(t.challenges.map(e=>(e.process.unlockCategory=t.unlockCategory,e)),t)),zh=t=>`${t}`,qo={timePlayed:{name:"Time Played",display:t=>{const e=Math.floor(t/86400),n=Math.floor(t/3600)%24,s=Math.floor(t/60)%60,i=t%60;return`${e}d ${n}h ${s}m ${i}s`}},layoutsSolved:{name:"Layouts Solved",display:zh},tilesSwapped:{name:"Tiles Swapped",display:zh},puzzlesCompleted:{initialValue:[],name:"Puzzles Completed",display:t=>`${t.length} / ${Nt.PUZZLES.length}`},challengesCompleted:{initialValue:[],name:"Challenges Completed",display:t=>`${t.length} / ${jo.length}`}},vk=Object.fromEntries(Object.keys(qo).map(t=>[t,qo[t].initialValue??0])),xn=Re(ee.TILES_TO_FLIP);globalThis.window&&!window.hasOwnProperty("tilesToFlip")&&Object.defineProperty(window,"tilesToFlip",{get:()=>xn.value,set:t=>{xn.value=t}});const ae=Re(2);globalThis.window&&!window.hasOwnProperty("modulo")&&Object.defineProperty(window,"modulo",{get:()=>ae.value,set:t=>{if(typeof t!="number")throw new Error("Modulo must be a number");if(t<2)throw new Error("Modulo must be greater than 1");ae.value=t}});const Pi=t=>{if(t<2)throw new Error("Modulo must be greater than 1");ae.value=t},si=Ne(()=>{const t=$t.tilesColor.value[0],e=$t.tilesColor.value[1],n={r:e.r-t.r,g:e.g-t.g,b:e.b-t.b};return new Array(ae.value).fill().map((s,i)=>`rgb(${n.r*(i/(ae.value-1))+t.r},${n.g*(i/(ae.value-1))+t.g},${n.b*(i/(ae.value-1))+t.b})`)}),al=Ne(()=>{const t=$t.tilesColor.value[0],e=$t.tilesColor.value[1],n={r:e.r-t.r,g:e.g-t.g,b:e.b-t.b};return new Array(ae.value).fill().map((s,i)=>`rgb(${n.r*.4*(i/(ae.value-1))+t.r+36},${n.g*.4*(i/(ae.value-1))+t.g+36},${n.b*.4*(i/(ae.value-1))+t.b+36})`)}),ll=Ne(()=>{const t=$t.tilesColor.value[0],e=$t.tilesColor.value[1],n={r:e.r-t.r,g:e.g-t.g,b:e.b-t.b};return new Array(ae.value).fill().map((s,i)=>`rgb(${n.r*.75*(i/(ae.value-1))+t.r+50},${n.g*.75*(i/(ae.value-1))+t.g+50},${n.b*.75*(i/(ae.value-1))+t.b+50})`)}),$t={backgroundColor:{name:"Background Color",options:[{main:"#bbb2ea",dark:"#988fd1"},{main:"#adad85",dark:"#9d9d6c"},{main:"#7a7a7a",dark:"#666"},{main:"#FF9D81",dark:"#FF7F5c"},{main:"#83769C",dark:"#75678e"},{main:"#7be3ad",dark:"#57db97"}],get value(){const{settings:t}=Y();return this.options[t.backgroundColor]},onChange(t){document.documentElement.style.setProperty("--root-bg-color",this.options[t].main),document.documentElement.style.setProperty("--root-bg-color-dark",this.options[t].dark)},css(t){return`
        background-color: ${this.options[t].main};
      `},unlocked:5},tilesColor:{name:"Tiles Color",options:[[{r:0,g:0,b:0},{r:255,g:255,b:255}],[{r:50,g:50,b:90},{r:200,g:100,b:100}],[{r:8,g:33,b:59},{r:88,g:131,b:173}]],get value(){const{settings:t}=Y();return this.options[t.tilesColor]},onChange(t){},css(t){return`
        width: 50px;
        --value-1: rgb(${this.options[t][0].r}, ${this.options[t][0].g}, ${this.options[t][0].b});
        --value-2: rgb(${this.options[t][1].r}, ${this.options[t][1].g}, ${this.options[t][1].b});
      `},unlocked:2},colorBlind:{name:"Color Blind",options:["Off","On"],get value(){const{settings:t}=Y();return this.options[t.colorBlind]},onChange(t){},text(t){return this.options[t]},unlocked:2},hoverTiles:{name:"Hover on Tiles",options:["Off","On"],get value(){const{settings:t}=Y();return this.options[t.hoverTiles]},onChange(t){},text(t){return this.options[t]},unlocked:2},tilesSVG:{name:"Tiles Shape",options:["Squircle","Square","Round","SpikeTile"],selected:0,get value(){const{settings:t}=Y();return this.options[t.tilesSVG]},onChange(t){},css(t){return"width: 50px;"},unlocked:3},spread:{name:"Spread",options:[[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]],[[-1,-1],[0,0],[-1,1],[1,-1],[1,1]],[[-1,0],[0,-1],[1,0],[0,0],[0,1]],[[0,0]],[[0,0],[0,-1],[0,-2],[1,-2],[2,-2],[1,0],[2,0],[2,1],[2,2],[0,1],[0,2],[-1,2],[-2,2],[-1,0],[-2,0],[-2,-1],[-2,-2]]],get value(){const{settings:t}=Y();return this.options[t.spread]},text(t){if(t===0)return"□";if(t===1)return"✖";if(t===2)return"+";if(t===3)return"alexei";if(t===4)return"aaaaa"},onChange(t){xn.value=this.options[t]},unlocked:4},tileAnimation:{name:"Tile Animation",options:[{name:"flip",mode:"out-in"},{name:"fade",mode:"default"},{name:"bounce",mode:"out-in"},{name:"spin",mode:"out-in"},{name:"none",mode:"out-in"}],get value(){const{settings:t}=Y();return this.options[t.tileAnimation]},onChange(t){},text(t){return this.options[t].name},unlocked:4}},wk=Object.fromEntries(Object.keys($t).map(t=>[t,$t[t].selected??0])),Y=B_("store",()=>{const t=Re({}),e=Re({}),n=Re({}),s=Re(2),i=Re([0,1,2]),r=Re(2),o=Re(!1),a=Re(0),l=Re(0),c=Re(0),u=Re(!1),d=Re(!1),h=Re(!1),m=Re(null);globalThis.window&&!window.hasOwnProperty("score")&&Object.defineProperty(window,"score",{get:()=>c.value,set:I=>{c.value=I}});const g=[50,750,2500,7e3,15e3,5e4,12e4,3e5,8e5,3e6,2e7,9e7,4e8,2e9,1e10,5e10,25e10,4e11],w=Ne(()=>{const I=g.findIndex(Z=>Z>c.value);return I===-1?0:g[I]}),M=Ne(()=>{const I=g.findIndex(Z=>Z>c.value);return I===-1?g.length-1:I>=1?I-1:I}),P=Ne(()=>M.value),L=Ne(()=>M.value),z=Ne(()=>jo.filter(I=>I.unlockCategory<=M.value).flatMap(I=>I.allUnlocked?I.challenges.map(Z=>Z.id):I.challenges.filter((Z,qe)=>qe===0||q.value.challengesCompleted.includes(I.challenges[qe-1].id)).map(Z=>Z.id)));function $(){c.value=g[g.length-1],u.value=!0}function se(I,Z){i.value.splice(I,1),i.value.push(Z)}const ve=Re({...wk});En(ve,I=>{for(const Z of Object.keys(ve.value))$t[Z].onChange(ve.value[Z])},{deep:!0});const q=Re({...vk});setInterval(()=>{q.value.timePlayed+=10},1e4);function R(I){t.value=I}R(ee.fromId(0));function U(I){e.value=I}function G(I){n.value=I}function fe(I){r.value=I}return to(s,"difficulty"),to(q,"stats"),to(ve,"settings"),to(c,"score"),{currentLayout:t,currentPuzzle:e,currentChallenge:n,isRandomFreeplay:o,difficulty:s,setLayout:R,setPuzzle:U,setChallenge:G,unlockedChallenges:z,stats:q,currentTasks:i,maxTask:r,setTask:se,setMaxTask:fe,unlockedCategoriesFP:P,unlockedCategoriesPZ:L,settings:ve,menuViewIndex:a,savedMenuScroll:l,score:c,nextScore:w,currentCategory:M,unlockAll:$,categories:g,hasHadOtherGameModesPopup:u,hasHadPuzzleExplanationPopup:d,hasHadChallengeExplanationPopup:h,selectedChallengeGroup:m}}),he=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},Ck={components:{RouterView:y1},setup(){Y()}};function bk(t,e,n,s,i,r){const o=Cg("router-view");return v(),Pe(o,null,{default:Me(({Component:a})=>[E(sn,{name:"fade",mode:"out-in"},{default:Me(()=>[(v(),Pe(ra(a)))]),_:2},1024)]),_:1})}const Ek=he(Ck,[["render",bk]]),Hr="/tileswap-naenae/images/svg/lock.svg",Tk={FREEPLAY:"freeplay layout",PUZZLE:"puzzle",CHALLENGE:"challenge"},Ve=class Ve{constructor({timesRequired:e,targetId:n,type:s,difficulty:i}){this.timesRequired=e,this.targetIds=n,this.type=s,this.targetsDone=[],this.id=-1,this.difficulty=i??-1}get completed(){return this.targetsDone.length>=this.timesRequired*this.targetIds.length}get progress(){return{text:`${this.targetsDone.length}/${this.timesRequired*this.targetIds.length}`,value:this.targetsDone.length/(this.timesRequired*this.targetIds.length)}}get text(){return`Complete the ${this.targetIds.length>1?this.targetIds.length:""} 
            highlighted ${Tk[this.type]}
            ${this.targetIds.length>1?"s":""} 
            ${this.timesRequired} time${this.timesRequired>1?"s":""} 
            ${this.timesRequired>1&&this.targetIds.length>1?"each":""} 
            ${this.difficulty!=-1?this.difficultyText():""}`}claim(){const{currentTasks:e,setTask:n,maxTask:s,setMaxTask:i}=Y(),r=e.indexOf(this.id);i(s+1);const o=s<Ve.TASKS.length-1?s+1:-1;n(r,o)}difficultyText(){if(this.type!==Ve.TASK_TYPES.FREEPLAY)return`in less than ${this.difficulty} ${this.type===Ve.TASK_TYPES.PUZZLE?"moves":"seconds"}`;const e=ee.LAYOUTS.filter(r=>r.id===this.targetIds[0])[0],n=["very easy","easy","normal","hard","very hard"],s=e.width*e.height-e.exclude.length;return`in ${n[Math.floor((this.difficulty-1)/(s/n.length))]} mode`}static isTaskTarget(e,n){const{currentTasks:s}=Y();return s.filter(i=>i!==-1).filter(i=>Ve.TASKS[i].type===n).some(i=>{const r=Ve.TASKS[i];return r.targetIds.includes(e)?r.targetsDone.reduce((o,a)=>o+(a===e?1:0),0)<r.timesRequired:!1})}static advanceTasks(e,n,s){const{currentTasks:i}=Y();i.filter(r=>r!==-1).filter(r=>Ve.TASKS[r].type===n).filter(r=>Ve.TASKS[r].targetIds.includes(e)).filter(r=>(n===Ve.TASK_TYPES.FREEPLAY?Ve.TASKS[r].difficulty<=s:Ve.TASKS[r].difficulty>=s)||Ve.TASKS[r].difficulty===-1).filter(r=>{const o=Ve.TASKS[r];return o.targetsDone.reduce((a,l)=>a+(l===e?1:0),0)<o.timesRequired}).forEach(r=>{Ve.TASKS[r].targetsDone.push(e)})}static generateTask(e,n){let s=[];if(n===Ve.TASK_TYPES.PUZZLE){const i=Math.floor(Math.min(e*Nt.PUZZLES.length/100,Nt.PUZZLES.length*.9)),r=Math.floor(Nt.PUZZLES.length/10);s.push(Math.min(Math.floor(Math.random()*r+i),Nt.PUZZLES.length-1));const o=Nt.PUZZLES.filter(l=>l.id===s[0])[0],a=e<=30?-1:e<=60?o.silverMoves:o.solution.length;return new Ve({timesRequired:1,targetId:s,type:n,difficulty:Math.ceil(a)})}}};jt(Ve,"TASK_TYPES",{FREEPLAY:"FREEPLAY",PUZZLE:"PUZZLE",CHALLENGE:"CHALLENGE"}),jt(Ve,"TASKS",[new Ve({timesRequired:2,targetId:[1],type:Ve.TASK_TYPES.FREEPLAY,difficulty:16}),Ve.generateTask(Math.random()*99+1,Ve.TASK_TYPES.PUZZLE),new Ve({timesRequired:1,targetId:[1],type:Ve.TASK_TYPES.CHALLENGE,difficulty:2})].map((e,n)=>(e.id=n,e)));let ft=Ve;const kk=["data-level","title"],Ik={key:0},Sk={key:1},xk=["src"],Pk={props:["layout","completion"],data(){return{tileSizePreview:1/Math.sqrt(this.layout.height*this.layout.width)*50}},computed:{includedTiles(){return new Array(this.layout.width*this.layout.height).fill(0).map((t,e)=>e).filter(t=>!this.layout.exclude.includes(t))},isTaskTarget(){return ft.isTaskTarget(this.layout.id,ft.TASK_TYPES.FREEPLAY)},unlocked(){const t=Y();return this.layout.unlockCategory<=t.unlockedCategoriesFP||this.layout.unlockCategory>=t.categories.length}},methods:{openGame(){if(!this.unlocked)return;const t=Y();t.isRandomFreeplay=!1,t.setLayout(this.layout),this.$router.push("/freeplayGame")}}},Rk=Object.assign(Pk,{__name:"LayoutSelectionButton",setup(t){return(e,n)=>(v(),C("div",{onClick:n[0]||(n[0]=(...s)=>e.openGame&&e.openGame(...s)),"data-level":t.completion,class:ht(["container",{"is-task-target":e.isTaskTarget,locked:!e.unlocked}]),title:`${t.layout.width}x${t.layout.height} - ${t.layout.exclude.length} (id: ${t.layout.id})`},[e.unlocked?(v(),C("div",Ik,[(v(!0),C(_e,null,Qe(e.includedTiles,s=>(v(),C("div",{key:"t"+s,class:"tile",style:Ht({transform:`translate(${e.tileSizePreview*(s%t.layout.width-t.layout.width/2)+50}px, ${e.tileSizePreview*(Math.floor(s/t.layout.width)-t.layout.height/2)+50}px)`,width:`${e.tileSizePreview-1}px`,height:`${e.tileSizePreview-1}px`})},null,4))),128))])):(v(),C("div",Sk,[y("img",{src:me(Hr)},null,8,xk)]))],10,kk))}}),Mk=he(Rk,[["__scopeId","data-v-8137bd4f"]]),xa={TOUCHSTART:"ontouchstart"in window?"touchstart":"click",TOUCHEND:"ontouchend"in window?"touchend":"click"};const Eu={props:["text","black","event","trigger","disabled"],emits:["pressed"],computed:{backgroundColor(){return this.black!==void 0?"var(--shadow-color)":"var(--hl-color)"},color(){return this.black!==void 0?"var(--hl-text-color)":"var(--shadow-text-color)"},clickEvent(){return this.trigger!==void 0?this.trigger:xa.TOUCHEND},isDisabled(){return this.disabled===""?!0:this.disabled!==void 0?this.disabled:!1}},methods:{handleClick(){this.$emit("pressed")}}},Hh=()=>{wi(t=>({"713b80aa":t.backgroundColor,"2a4f288e":t.color}))},Wh=Eu.setup;Eu.setup=Wh?(t,e)=>(Hh(),Wh(t,e)):Hh;const Ak=["disabled"];function Ok(t,e,n,s,i,r){return v(),C("button",{class:ht({disabled:r.isDisabled}),onClick:e[0]||(e[0]=(...o)=>r.handleClick&&r.handleClick(...o)),disabled:r.isDisabled},re(n.text),11,Ak)}const X=he(Eu,[["render",Ok],["__scopeId","data-v-0001135f"]]),Lk={props:["text","to","black","disabled"],methods:{onClick(){this.$router.push(this.to)}}},Ri=Object.assign(Lk,{__name:"LinkButton",setup(t){return(e,n)=>(v(),Pe(X,{black:t.black,text:t.text,onPressed:e.onClick,disabled:t.disabled},null,8,["black","text","onPressed","disabled"]))}});const Nk={props:["icon"],emits:["pressed"],data(){return{EVENTS:xa}},methods:{handleClick(){this.$emit("pressed")}}},Dk=["src"];function $k(t,e,n,s,i,r){return v(),C("main",{class:"icon-container",onClick:e[0]||(e[0]=(...o)=>r.handleClick&&r.handleClick(...o))},[y("div",null,[y("img",{src:n.icon},null,8,Dk)])])}const Ks=he(Nk,[["render",$k],["__scopeId","data-v-c2c00616"]]);const Tu={props:["text"],computed:{display(){return this.text?"flex":"none"},margin(){return this.text?"10px 0":"0"}}},jh=()=>{wi(t=>({"13eb5496":t.margin,c9bfb24c:t.display}))},qh=Tu.setup;Tu.setup=qh?(t,e)=>(jh(),qh(t,e)):jh;const Fk=["data-text"];function Uk(t,e,n,s,i,r){return v(),C("div",null,[y("hr",{class:"separator","data-text":n.text},null,8,Fk)])}const ku=he(Tu,[["render",Uk],["__scopeId","data-v-47bcbd8d"]]),Vk="/tileswap-naenae/images/svg/random.svg";const $m=t=>(Ft("data-v-15a12c14"),t=t(),Ut(),t),Bk=$m(()=>y("h1",{class:"title"},"FreePlay",-1)),zk=$m(()=>y("br",null,null,-1)),Hk={class:"text-center tools"},Wk={class:"layouts"},jk={data(){const{CATEGORIES:t}=ee;return{categories:t.filter(e=>e.length>0)}},computed:{showLayoutEditor(){return!1}},methods:{goHome(){this.$router.push("/")},startRandomFreeplay(){const t=Y();t.isRandomFreeplay=!0,t.setLayout(ee.getRandomLayout()),this.$router.push("/freeplayGame")}}},qk=Object.assign(jk,{__name:"FreeplaySelection",setup(t){return(e,n)=>(v(),C("main",null,[Bk,zk,y("div",null,[y("div",Hk,[E(Ks,{icon:me(Vk),onPressed:e.startRandomFreeplay},null,8,["icon","onPressed"]),e.showLayoutEditor?(v(),Pe(Ri,{key:0,to:"layout-editor",text:"✎"})):je("",!0)]),(v(!0),C(_e,null,Qe(e.categories,(s,i)=>(v(),C("div",{key:i},[y("div",Wk,[E(ku,{text:i+1},null,8,["text"]),(v(!0),C(_e,null,Qe(s,(r,o)=>(v(),Pe(Mk,{layout:r,completion:r.id,key:o},null,8,["layout","completion"]))),128))])]))),128))])]))}}),Fm=he(qk,[["__scopeId","data-v-15a12c14"]]);const Gk={key:0},Kk={key:1},Yk=["src"],Qk={props:["puzzle"],data(){const{width:t,height:e}=this.puzzle.target;return{tileSizePreview:1/Math.sqrt(t*e)*50}},computed:{layout(){return this.puzzle.target},includedTiles(){return new Array(this.layout.width*this.layout.height).fill(0).map((t,e)=>e).filter(t=>!this.layout.exclude.includes(t))},isTaskTarget(){return ft.isTaskTarget(this.puzzle.id,ft.TASK_TYPES.PUZZLE)},buttonColor(){const t=this.puzzle.solution.length,e=this.puzzle.completionMoves;return this.puzzle.solved?e<=t?"var(--success-color)":e<=this.puzzle.silverMoves?"var(--silver-color)":"var(--bronze-color)":"var(--hl-color)"},unlocked(){const t=Y();return this.puzzle.unlockCategory<=t.unlockedCategoriesPZ}},methods:{openGame(){if(!this.unlocked)return;Y().setPuzzle(this.puzzle),Pi(this.puzzle.modulo),this.$router.push("/puzzleGame")}}},Xk=Object.assign(Qk,{__name:"PuzzleSelectionButton",setup(t){return wi(e=>({"0eea7595":e.buttonColor})),(e,n)=>(v(),C("div",{class:ht(["container",{"is-task-target":e.isTaskTarget,locked:!e.unlocked}]),onClick:n[0]||(n[0]=(...s)=>e.openGame&&e.openGame(...s))},[e.unlocked?(v(),C("div",Gk,[(v(!0),C(_e,null,Qe(e.includedTiles,s=>(v(),C("div",{key:"t"+s,class:"tile",style:Ht({backgroundColor:(t.puzzle.solved?t.puzzle.targetIsWhite(s):t.puzzle.baseIsWhite(s))?"var(--puzzle-white)":"var(--shadow-color)",transform:`translate(${e.tileSizePreview*(s%e.layout.width-e.layout.width/2)+50}px, ${e.tileSizePreview*(Math.floor(s/e.layout.width)-e.layout.height/2)+50}px)`,width:`${e.tileSizePreview-1}px`,height:`${e.tileSizePreview-1}px`})},null,4))),128))])):(v(),C("div",Kk,[y("img",{src:me(Hr)},null,8,Yk)]))],2))}}),Jk=he(Xk,[["__scopeId","data-v-bd798615"]]);const Zk=t=>(Ft("data-v-59afb3a8"),t=t(),Ut(),t),eI=Zk(()=>y("h1",{class:"title"},"Puzzles",-1)),tI={class:"layouts"},nI={data(){return{categories:Nt.CATEGORIES.filter(t=>t.length>0)}}},sI=Object.assign(nI,{__name:"PuzzleSelection",setup(t){return(e,n)=>(v(),C("main",null,[eI,(v(!0),C(_e,null,Qe(e.categories,(s,i)=>(v(),C("div",{key:i},[E(ku,{text:i+1},null,8,["text"]),y("div",tI,[(v(!0),C(_e,null,Qe(s,(r,o)=>(v(),Pe(Jk,{puzzle:r,key:o},null,8,["puzzle"]))),128))])]))),128))]))}}),Um=he(sI,[["__scopeId","data-v-59afb3a8"]]);function Zl(t){const e=Math.floor(t/60).toString(),n=(t%60).toString();return`${e.padStart(2,"0")}:${n.padStart(2,"0")}`}const iI=["innerHTML","title"],rI=["title"],oI=["src"],aI={props:["challenge","locked"],computed:{formattedChall(){const t=this.challenge.settings.moveLimit.toString(),e=this.challenge.settings.patternCount.toString(),n="0";return(this.challenge.title?this.challenge.title:Zl(this.challenge.settings.timeLimit)+"<br>"+(t>0?t+" moves<br>":"no move limit<br>")+e+" layouts")+` ${"<br>("+n+")"}`},isTaskTarget(){return ft.isTaskTarget(this.challenge.id,ft.TASK_TYPES.CHALLENGE)}}},lI=Object.assign(aI,{__name:"ChallengeSelectionButton",setup(t){return wi(e=>({c72b297e:e.color})),(e,n)=>t.locked?(v(),C("div",{key:1,class:"locked",title:`id: ${t.challenge.id}`},[y("img",{src:me(Hr)},null,8,oI)],8,rI)):(v(),C("div",{key:0,class:ht([{"is-task-target":e.isTaskTarget,"is-completed":t.challenge.maxPercent===100},"challenge-button"]),innerHTML:e.formattedChall,title:`id: ${t.challenge.id}`},null,10,iI))}}),cI=he(lI,[["__scopeId","data-v-439f2970"]]);const uI={key:1,class:"locked"},dI=["src"],hI={props:["category","locked"]},fI=Object.assign(hI,{__name:"ChallengeCategoryButton",setup(t){return(e,n)=>t.locked?(v(),C("div",uI,[y("img",{src:me(Hr)},null,8,dI)])):(v(),Pe(X,{key:0,class:"category-button",text:t.category.title},null,8,["text"]))}}),pI=he(fI,[["__scopeId","data-v-af6ef73b"]]);const mI={props:["modelValue"],emits:["update:modelValue"],methods:{close(){this.$emit("update:modelValue",!1)}}},gI={class:"modal"};function _I(t,e,n,s,i,r){return v(),C("div",null,[E(sn,{name:"fade"},{default:Me(()=>[xs(y("div",gI,[y("div",null,[bg(t.$slots,"default",{},void 0,!0)])],512),[[ca,n.modelValue]])]),_:3})])}const Tt=he(mI,[["render",_I],["__scopeId","data-v-63e88bd8"]]);const yI=t=>(Ft("data-v-363eb19a"),t=t(),Ut(),t),vI={class:"challenge-selection-container"},wI={key:0,class:"title"},CI={key:1,class:"title"},bI={key:0},EI={key:1},TI=["innerHTML"],kI=yI(()=>y("h1",null," In this mode, you have to complete the pattern in the given time or moves. You can only swap the tiles in the pattern. The pattern will change after every successful completion. You can pause the game at any time. ",-1)),II={data(){return Y(),{categories:new Array(new Set(jo.map(e=>e.unlockCategory)).size).fill().map((e,n)=>jo.filter(s=>s.unlockCategory===n)).filter(e=>e.length>0),showModal:!1,showIntroductionModal:!1}},computed:{selectedChallengeGroup(){return Y().selectedChallengeGroup},selectedChallenge(){return Y().currentChallenge}},methods:{start(){this.$router.push("/challengeGame")},selectChallenge(t){if(!this.isUnlocked(t))return;t.process.init();const e=Y();e.setChallenge(t),Pi(t.process.patternModulo),e.setLayout(t.process.currentPattern.layout),this.showModal=!0},selectChallengeGroup(t){if(!this.isUnlocked(t))return;const e=Y();e.selectedChallengeGroup=t,e.hasHadChallengeExplanationPopup||(this.showIntroductionModal=!0,e.hasHadChallengeExplanationPopup=!0)},isUnlocked(t){const{unlockedChallenges:e}=Y();if(t instanceof ne)return e.includes(t.id);for(let n=0;n<t.challenges.length;n++)if(e.includes(t.challenges[n].id))return!0;return!1},back(){const t=Y();t.selectedChallengeGroup=null}}},SI=Object.assign(II,{__name:"ChallengeSelection",setup(t){return(e,n)=>(v(),C("div",vI,[e.selectedChallengeGroup?(v(),C("h1",CI,re(e.selectedChallengeGroup.title),1)):(v(),C("h1",wI,"Challenges")),e.selectedChallengeGroup?(v(),Pe(X,{key:2,class:"top right",text:"back",onPressed:e.back},null,8,["onPressed"])):je("",!0),E(sn,{name:"fade",mode:"out-in"},{default:Me(()=>[(v(),C("div",{class:"container",key:e.selectedChallengeGroup},[e.selectedChallengeGroup?(v(),C("div",bI,[(v(!0),C(_e,null,Qe(e.selectedChallengeGroup.challenges,s=>(v(),Pe(cI,{key:s.id,challenge:s,locked:!e.isUnlocked(s),onClick:i=>e.selectChallenge(s)},null,8,["challenge","locked","onClick"]))),128))])):(v(),C("div",EI,[(v(!0),C(_e,null,Qe(e.categories,(s,i)=>(v(),C("div",{key:i},[E(ku,{text:i+1},null,8,["text"]),(v(!0),C(_e,null,Qe(s,r=>(v(),Pe(pI,{key:r.title,category:r,locked:!e.isUnlocked(r),onClick:o=>e.selectChallengeGroup(r)},null,8,["category","locked","onClick"]))),128))]))),128))]))]))]),_:1}),E(Tt,{modelValue:e.showModal,"onUpdate:modelValue":n[1]||(n[1]=s=>e.showModal=s)},{default:Me(()=>[y("div",{innerHTML:e.selectedChallenge.description},null,8,TI),E(X,{black:"",text:"start!",onPressed:n[0]||(n[0]=s=>{e.showModal=!1,e.start()})})]),_:1},8,["modelValue"]),E(Tt,{modelValue:e.showIntroductionModal,"onUpdate:modelValue":n[3]||(n[3]=s=>e.showIntroductionModal=s)},{default:Me(()=>[kI,E(X,{black:"",text:"got it!",onPressed:n[2]||(n[2]=s=>e.showIntroductionModal=!1)})]),_:1},8,["modelValue"])]))}}),Vm=he(SI,[["__scopeId","data-v-363eb19a"]]),xI={props:["color"]},PI={width:"100%",height:"100%",viewBox:"0 0 79.374998 79.375002",version:"1.1",id:"svg2365","inkscape:version":"1.1.1 (3bf5ae0d25, 2021-09-20)","sodipodi:docname":"spike tile.svg","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},RI=y("defs",{id:"defs2362"},null,-1),MI={"inkscape:groupmode":"layer",id:"layer2","inkscape:label":"Calque 2"},AI=y("g",{"inkscape:label":"Calque 1","inkscape:groupmode":"layer",id:"layer1"},null,-1);function OI(t,e,n,s,i,r){return v(),C("svg",PI,[RI,y("g",MI,[y("path",{id:"rect14225",style:Ht([{fill:n.color},{"fill-opacity":"1",stroke:"none","stroke-width":"25.8844","stroke-linecap":"round","stroke-linejoin":"round","stroke-opacity":"0.97992","paint-order":"fill markers stroke"}]),d:"m 26.051013,2.1329395 c -0.280307,0 -0.560419,0.2218214 -0.775192,0.6642568 L 19.250381,15.20586 c -0.03632,0.07476 -0.06557,0.158085 -0.09569,0.239907 -0.272635,0.503967 -0.845653,1.512566 -1.345147,2.048236 -0.414097,0.444087 -1.181924,0.945319 -1.722347,1.271651 -0.218787,0.05195 -0.423681,0.120896 -0.606014,0.209384 L 3.0725302,25.000479 c -0.4424263,0.214801 -0.6656414,0.493523 -0.6656414,0.773807 0,0.280306 0.2232085,0.561805 0.6656414,0.776581 l 11.3963318,5.533142 c 0.112761,0.160036 0.195657,0.331364 0.259336,0.514487 -0.06309,0.194511 -0.156905,0.384143 -0.277353,0.567181 L 3.0711553,38.690499 c -0.4424257,0.214802 -0.6642565,0.493523 -0.6642565,0.773808 0,0.280306 0.2218152,0.561811 0.6642565,0.776581 l 11.3852337,5.528984 c 0.118611,0.164764 0.205962,0.339035 0.271808,0.528354 -0.06167,0.190034 -0.152587,0.376169 -0.26903,0.554698 L 3.0711553,52.38191 c -0.4424257,0.214802 -0.6642565,0.49352 -0.6642565,0.773808 0,0.280306 0.2232085,0.560421 0.6656414,0.775194 l 12.4086568,6.025441 c 0.41257,0.12556 0.597701,0.207062 0.863874,0.262106 0.564542,0.158158 1.265238,0.403385 1.664105,0.733597 0.820561,0.649608 0.857184,1.613332 1.241147,2.419879 l 6.02405,12.408666 c 0.214801,0.442425 0.49491,0.664256 0.775197,0.664256 0.280307,0 0.560415,-0.221815 0.775197,-0.664256 l 5.534541,-11.396329 c 0.160037,-0.112755 0.329974,-0.197016 0.513094,-0.260705 0.19451,0.06309 0.384146,0.156906 0.567181,0.277363 l 5.524825,11.379693 c 0.214802,0.442425 0.494911,0.664252 0.775195,0.664252 0.280306,0 0.561808,-0.221815 0.776581,-0.664252 l 5.5276,-11.385241 c 0.164764,-0.118611 0.340419,-0.205971 0.529735,-0.271789 0.190065,0.06165 0.374785,0.152584 0.553317,0.269033 l 5.528983,11.388016 c 0.214802,0.442425 0.494904,0.664252 0.775192,0.664252 0.280306,0 0.560421,-0.221815 0.775194,-0.664252 l 6.025444,-12.408663 c 0.09701,-0.199834 0.17015,-0.42865 0.223286,-0.671188 0.225135,-0.499538 0.588158,-1.201415 1.012325,-1.605861 0.698724,-0.666238 2.297853,-1.225889 2.297853,-1.225889 v -0.06378 c 0.0191,-0.0085 0.03955,-0.01597 0.05824,-0.02505 L 76.231999,53.75475 c 0.442431,-0.214801 0.665643,-0.49352 0.665643,-0.773807 0,-0.280306 -0.223224,-0.560422 -0.665643,-0.775198 L 64.835667,46.671216 C 64.722912,46.51118 64.640029,46.34124 64.57634,46.15812 c 0.06309,-0.194542 0.156905,-0.385534 0.277363,-0.568569 l 11.379693,-5.524822 c 0.442428,-0.214801 0.664252,-0.493523 0.664252,-0.77381 0,-0.280306 -0.221815,-0.561809 -0.664252,-0.776582 L 64.848155,32.986744 c -0.118611,-0.164764 -0.205972,-0.340419 -0.27179,-0.529738 0.06165,-0.190034 0.152584,-0.374788 0.269034,-0.553317 l 11.388016,-5.52898 c 0.442427,-0.214802 0.664252,-0.494911 0.664252,-0.775198 0,-0.280306 -0.223224,-0.560421 -0.665643,-0.775194 L 63.823434,18.798873 C 63.567332,18.674533 63.266106,18.586232 62.945617,18.534004 62.439575,18.241047 61.823493,17.840049 61.46734,17.43708 60.851471,16.74026 60.215105,15.137846 60.215105,15.137846 h -0.0166 L 54.207644,2.7972073 C 53.992843,2.3547816 53.712743,2.1329501 53.432456,2.1329501 c -0.280306,0 -0.560425,0.2218214 -0.775198,0.6642572 L 47.12273,14.19354 c -0.160037,0.112761 -0.32998,0.197025 -0.5131,0.260705 -0.194542,-0.06309 -0.384149,-0.156905 -0.567185,-0.277344 L 40.517623,2.7972095 C 40.302822,2.3547841 40.02272,2.1329527 39.742432,2.1329527 c -0.280275,0 -0.561808,0.2218214 -0.776581,0.6642568 L 33.438254,14.182449 c -0.164764,0.118588 -0.340416,0.205964 -0.529735,0.271795 -0.190065,-0.06167 -0.374791,-0.152587 -0.55332,-0.269024 L 26.826219,2.7972054 C 26.61143,2.3547797 26.331308,2.1329483 26.051022,2.1329483 Z M 63.802574,32.407138 v 0.0014 l -0.01409,0.04299 0.0085,0.02505 c -0.01033,-0.0047 -0.02161,-0.0091 -0.03191,-0.01409 v -0.03883 c 0.01221,-0.0056 0.02536,-0.01096 0.03745,-0.0166 z m 0.0027,13.691411 -0.01659,0.0527 0.0056,0.01534 c -0.0097,-0.0047 -0.01941,-0.0094 -0.02912,-0.01409 v -0.03607 c 0.01346,-0.0059 0.02693,-0.0119 0.04024,-0.01785 z M 32.893248,63.27764 h 0.0056 c 0.01096,0.02536 0.02192,0.05026 0.03328,0.0749 l -0.05408,-0.01534 -0.01409,0.0041 c 0.01002,-0.02098 0.01973,-0.04218 0.02912,-0.06378 z m 13.690021,0 h 0.0056 c 0.01065,0.02442 0.02223,0.04828 0.03329,0.07211 l -0.04299,-0.01221 -0.0263,0.0069 c 0.01033,-0.02223 0.02067,-0.04406 0.03037,-0.06657 z","sodipodi:nodetypes":"ccccscccscccccsccccssccccccscccccsccccsscccsccccscccccsccccsscccscccscccccscccccccccccccccccccccccccccccccccccc"},null,4)]),AI])}const Bm=he(xI,[["render",OI]]),LI={props:["color","borderColor"]},NI={width:"100%",height:"100%",viewBox:"0 0 300 300",version:"1.1",id:"svg5","inkscape:version":"1.1.1 (3bf5ae0d25, 2021-09-20)","sodipodi:docname":"round.svg","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},DI=y("defs",{id:"defs2"},null,-1),$I={"inkscape:label":"Calque 1","inkscape:groupmode":"layer",id:"layer1"};function FI(t,e,n,s,i,r){return v(),C("svg",NI,[DI,y("g",$I,[y("circle",{style:Ht([{"stroke-width":"10"},{fill:n.color,stroke:n.borderColor,stroke_miterlimit:4,stroke_dasharray:"none",paint_order:"fill markers stroke"}]),id:"path846",cx:"150",cy:"150",r:"145"},null,4)])])}const zm=he(LI,[["render",FI]]),UI={props:["color","borderColor"]},VI={width:"100%",height:"100%",viewBox:"0 0 300 300",version:"1.1",id:"svg5","inkscape:version":"1.1.1 (3bf5ae0d25, 2021-09-20)","sodipodi:docname":"round.svg","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},BI=y("defs",{id:"defs2"},null,-1),zI={id:"layer1"};function HI(t,e,n,s,i,r){return v(),C("svg",VI,[BI,y("g",zI,[y("rect",{style:Ht([{"stroke-width":"10"},{fill:n.color,stroke:n.borderColor,stroke_miterlimit:4,stroke_dasharray:"none",paint_order:"fill markers stroke"}]),width:"290",height:"290",x:"5",y:"5",rx:"70"},null,4)])])}const Hm=he(UI,[["render",HI]]),WI={props:["color","borderColor"]},jI={width:"100%",height:"100%",viewBox:"0 0 300 300",version:"1.1",id:"svg5","inkscape:version":"1.1.1 (3bf5ae0d25, 2021-09-20)","sodipodi:docname":"square.svg","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},qI=y("defs",{id:"defs2"},null,-1),GI={id:"layer1"};function KI(t,e,n,s,i,r){return v(),C("svg",jI,[qI,y("g",GI,[y("rect",{style:Ht([{"stroke-width":"10"},{fill:n.color,stroke:n.borderColor,stroke_miterlimit:4,stroke_dasharray:"none",paint_order:"fill markers stroke"}]),width:"290",height:"290",x:"5",y:"5"},null,4)])])}const Wm=he(WI,[["render",KI]]),YI={props:["color","shape","border-color"],components:{SpikeTile:Bm,Round:zm,Squircle:Hm,Square:Wm}};function QI(t,e,n,s,i,r){return v(),C("div",null,[(v(),Pe(ra(n.shape),{color:n.color,borderColor:t.borderColor},null,8,["color","borderColor"]))])}const XI=he(YI,[["render",QI]]);const JI={style:{display:"inline-block",position:"relative"}},ZI={props:["tile","visible","small","position","layout","enableClickOnHiddenTiles","borderColor"],data(){return{tileSize:"30px",flipped:!1,frontColor:si.value[this.tile],backColor:si.value[this.mod(this.tile+1)],frontOutline:al.value[this.tile],backOutline:al.value[this.mod(this.tile+1)],frontHighlight:ll.value[this.tile],backHighlight:ll.value[this.mod(this.tile+1)],tileSVG:$t.tilesSVG.value,animation:$t.tileAnimation.value,gradient:si,outlineGradient:al,highlightGradient:ll}},watch:{tile(t){this.flipped=!this.flipped,this.flipped?(this.backColor=this.gradient[t],this.backHighlight=this.highlightGradient[t]):(this.frontColor=this.gradient[t],this.frontHighlight=this.highlightGradient[t])}},methods:{mod(t){return(t%ae.value+ae.value)%ae.value}},mounted(){const t=()=>{const{width:e,height:n}=this.layout.actualSize(),s=1/(Math.sqrt(e**2+n**2)*(window.innerWidth>600?.5:.8))*250*(this.$props.small!==void 0?.5:1);this.tileSize=s+"px"};En(()=>this.layout,t,{deep:!0,immediate:!1}),t(),window.addEventListener("resize",t),this.$nextTick(t),window.addEventListener("orientationchange",t)}},eS=Object.assign(ZI,{__name:"Tile",setup(t){return wi(e=>({"9042a138":e.tileSize,"51de8952":t.visible?1:0,f1e803fc:t.enableClickOnHiddenTiles||t.visible?"auto":"none","051a5ec0":t.visible?"pointer":"default"})),(e,n)=>(v(),C("div",JI,[E(sn,{name:e.animation.name,mode:e.animation.mode},{default:Me(()=>[(v(),C("div",{key:t.tile,style:{position:"absolute"}},[E(XI,{color:me(si)[t.tile],shape:e.tileSVG,borderColor:t.borderColor},null,8,["color","shape","borderColor"])]))]),_:1},8,["name","mode"])]))}}),tS=he(eS,[["__scopeId","data-v-c1272b62"]]),Go=Re(!1);globalThis.window&&!window.hasOwnProperty("devMode")&&Object.defineProperty(window,"devMode",{get:()=>Go.value,set:t=>{if(typeof t!="boolean")throw new Error("devMode value must be a boolean");Go.value=t}});const vn=Ne(()=>Go.value),jm=t=>{Go.value=t},nS=t=>bu({state:t,tilesToFlip:xn.value,modulo:ae.value});const sS={props:["modelValue","small","disabled","solution","target","forcedHover","highlightedTiles","enableClickOnHiddenTiles"],emits:["update:modelValue","swap","tileClick"],data(){const{currentChallenge:t,settings:e}=Y();return{currentChallenge:t,settings:e,gradient:si,hoveredTile:null}},computed:{matrix(){return this.modelValue.actualSize().matrix},paddingX(){return this.modelValue.actualSize().paddingLeft},paddingY(){return this.modelValue.actualSize().paddingTop}},methods:{onTileClick(t,e){if(this.$emit("tileClick",t*this.modelValue.matrix[0].length+e,t,e),this.disabled===void 0||this.disabled===!1&&this.modelValue.matrix[t][e]!==-1){const n=Y(),s=this.modelValue.copy(),i=s.swapTiles(t,e,1,ae.value,xn.value);n.stats.tilesSwapped+=i,this.$emit("update:modelValue",s),this.$emit("swap",t*this.modelValue.matrix[0].length+e,t,e)}},shouldHover(t,e){return this.hoveredTile===null?!1:xn.value.map(([n,s])=>[n+this.hoveredTile.tile,s+this.hoveredTile.row]).some(([n,s])=>n===e&&s===t)},mouseOver(t,e){this.hoveredTile={row:t,tile:e}},mouseLeave(t,e){this.hoveredTile=null}}},iS=Object.assign(sS,{__name:"Layout",setup(t){return(e,n)=>(v(),C("div",null,[y("div",null,[(v(!0),C(_e,null,Qe(e.matrix,(s,i)=>{var r;return v(),C("div",{class:"row",key:"row"+i+((r=e.currentChallenge)==null?void 0:r.currentPattern)+me(ae)},[(v(!0),C(_e,null,Qe(s,(o,a)=>{var l,c,u;return v(),Pe(tS,Cc({class:["tile",{solution:me(vn)&&t.solution&&t.solution[i+e.paddingY][a+e.paddingX]>=1,"color-blind":e.settings.colorBlind===1,highlight:(l=t.highlightedTiles)==null?void 0:l.some(([d,h])=>d===a+e.paddingX&&h===i+e.paddingY),hover:e.shouldHover(i+e.paddingY,a+e.paddingX)&&e.settings.hoverTiles===1&&t.disabled!==""||((c=t.forcedHover)==null?void 0:c.some(([d,h])=>d===a+e.paddingX&&h===i+e.paddingY))}],small:t.small,enableClickOnHiddenTiles:t.enableClickOnHiddenTiles,tile:o,"data-tile":`${o+1}`,visible:o!==-1,layout:t.modelValue,position:[i+e.paddingY,a+e.paddingX],key:i+e.paddingX+""+a+e.paddingY+((u=e.currentChallenge)==null?void 0:u.currentPattern)+t.modelValue.id,"data-moves":t.solution&&me(ae)!==2?t.solution[i+e.paddingY][a+e.paddingX]:"",borderColor:t.target?me(si)[t.target[i+e.paddingY][a+e.paddingX]]:"none"},{[qi(me(xa).TOUCHSTART)]:d=>e.onTileClick(i+e.paddingY,a+e.paddingX)},{onMouseover:d=>o!==-1&&e.mouseOver(i+e.paddingY,a+e.paddingX),onMouseleave:d=>o!==-1&&e.mouseLeave(i+e.paddingY,a+e.paddingX)}),null,16,["small","enableClickOnHiddenTiles","tile","data-tile","visible","layout","position","class","data-moves","borderColor","onMouseover","onMouseleave"])}),128))])}),128))])]))}}),en=he(iS,[["__scopeId","data-v-bcea0dc1"]]);const rS={name:"MultiRangeSlider",props:{baseClassName:{type:String,default:"multi-range-slider"},min:{type:Number},max:{type:Number},minValue:{type:Number},maxValue:{type:Number},step:{type:Number,default:1},preventWheel:{type:Boolean,default:!1},ruler:{type:Boolean,default:!0},label:{type:Boolean,default:!0},labels:{type:Array},minCaption:{type:String},maxCaption:{type:String},rangeMargin:{type:Number}},data(){let t=this.labels||[],e=this.min===void 0?0:this.min,n=t.length?t.length-1:100,s=this.max===void 0?n:this.max,i=this.minValue===void 0?25:this.minValue;t.length&&this.minValue===void 0&&(i=1);let r=this.maxValue||75;if(t.length&&this.maxValue===void 0&&(r=t.length-2),s<=e)throw new Error("Invalid props min or max");if(i>r)throw new Error("Invalid props minValue or maxValue");let o=this.rangeMargin===void 0?this.step:this.rangeMargin,a=o%this.step;return a&&(o=o+this.step-a),{valueMin:i<e?e:i,valueMax:r>s?s:r,interVal:null,startX:null,mouseMoveCounter:null,barBox:null,barValue:0,rangeMarginValue:o}},methods:{onBarLeftClick(){this.valueMin-this.step>=this.minimum?this.valueMin-=this.step:this.valueMin=this.minimum},onInnerBarLeftClick(){this.valueMin+this.rangeMarginValue<this.valueMax&&(this.valueMin+=this.step)},onBarRightClick(){this.valueMax+this.step<=this.maximum?this.valueMax+=this.step:this.valueMax=this.maximum},onInnerBarRightClick(){this.valueMax-this.rangeMarginValue>this.valueMin&&(this.valueMax-=this.step)},onInputMinChange(t){let e=parseFloat(t.target.value);e<=this.valueMax-this.rangeMarginValue&&e>=this.minimum?this.valueMin=e:t.target.value=this.valueMin},onInputMaxChange(t){let e=parseFloat(t.target.value);e>=this.valueMin+this.rangeMarginValue&&e<=this.maximum?this.valueMax=e:t.target.value=this.valueMax},onLeftThumbMousedown(t){if(t.preventDefault(),this.startX=t.clientX,t.type==="touchstart")if(t.touches.length===1)this.startX=t.touches[0].clientX;else return;this.mouseMoveCounter=0,this.barValue=this.valueMin,this.barBox=t.target.parentNode.getBoundingClientRect(),document.addEventListener("mousemove",this.onLeftThumbMousemove),document.addEventListener("mouseup",this.onLeftThumbMouseup),document.addEventListener("touchmove",this.onLeftThumbMousemove),document.addEventListener("touchend",this.onLeftThumbMouseup)},onLeftThumbMousemove(t){this.mouseMoveCounter++;let e=t.clientX;t.type==="touchmove"&&(e=t.touches[0].clientX);let s=(e-this.startX)/this.barBox.width,i=this.barValue+(this.maximum-this.minimum)*s,r=i%this.step;i-=r,i<this.minimum?i=this.minimum:i>this.valueMax-this.rangeMarginValue&&(i=this.valueMax-this.rangeMarginValue),this.valueMin=i},onLeftThumbMouseup(){document.removeEventListener("mousemove",this.onLeftThumbMousemove),document.removeEventListener("mouseup",this.onLeftThumbMouseup),document.removeEventListener("touchmove",this.onLeftThumbMousemove),document.removeEventListener("touchend",this.onLeftThumbMouseup)},onRightThumbMousedown(t){if(t.preventDefault(),this.startX=t.clientX,t.type==="touchstart")if(t.touches.length===1)this.startX=t.touches[0].clientX;else return;this.mouseMoveCounter=0,this.barValue=this.valueMax,this.barBox=t.target.parentNode.getBoundingClientRect(),document.addEventListener("mousemove",this.onRightThumbMousemove),document.addEventListener("mouseup",this.onRightThumbMouseup),document.addEventListener("touchmove",this.onRightThumbMousemove),document.addEventListener("touchend",this.onRightThumbMouseup)},onRightThumbMousemove(t){this.mouseMoveCounter++;let e=t.clientX;t.type==="touchmove"&&(e=t.touches[0].clientX);let s=(e-this.startX)/this.barBox.width,i=this.barValue+(this.maximum-this.minimum)*s,r=i%this.step;i-=r,i<this.valueMin+this.rangeMarginValue?i=this.valueMin+this.rangeMarginValue:i>this.maximum&&(i=this.maximum),this.valueMax=i},onRightThumbMouseup(){document.removeEventListener("mousemove",this.onRightThumbMousemove),document.removeEventListener("mouseup",this.onRightThumbMouseup),document.removeEventListener("touchmove",this.onRightThumbMousemove),document.removeEventListener("touchend",this.onRightThumbMouseup)},onMouseWheel(t){if(this.preventWheel===!0||!t.shiftKey&&!t.ctrlKey)return;let e=this.step;t.deltaY<0&&(e=-e),t.shiftKey&&t.ctrlKey?this.valueMin+e>=this.minimum&&this.valueMax+e<=this.maximum&&(this.valueMin=this.valueMin+e,this.valueMax=this.valueMax+e):t.ctrlKey?(e=this.valueMax+e,e<this.valueMin+this.rangeMarginValue?e=this.valueMin+this.rangeMarginValue:e>this.maximum&&(e=this.maximum),this.valueMax=e):t.shiftKey&&(e=this.valueMin+e,e<this.minimum?e=this.minimum:e>this.valueMax-this.rangeMarginValue&&(e=this.valueMax-this.rangeMarginValue),this.valueMin=e)},triggerInput(){let t=0;this.step.toString().includes(".")&&(t=2);let e={min:this.minimum,max:this.maximum,minValue:parseFloat(this.valueMin.toFixed(t)),maxValue:parseFloat(this.valueMax.toFixed(t))};this.$emit("input",e)}},computed:{minimum(){return this.min===void 0?0:this.min},maximum(){let t=this.labels||[],e=t.length?t.length-1:100;return this.max===void 0?e:this.max},stepCount(){let t=this.labels||[];return t.length?t.length-1:Math.floor((this.maximum-this.minimum)/this.step)},subStepCount(){return(this.labels||[]).length&&this.step>1?(this.maximum-this.minimum)/this.step:0},barMin(){return(this.valueMin-this.minimum)/(this.maximum-this.minimum)*100},barMax(){return 100-(this.valueMax-this.minimum)/(this.maximum-this.minimum)*100},barMinVal(){let t=0;return this.step.toString().includes(".")&&(t=2),(this.valueMin||0).toFixed(t)},barMaxVal(){let t=0;return this.step.toString().includes(".")&&(t=2),(this.valueMax||100).toFixed(t)},scaleLabels(){let t=this.labels||[];return t.length===0&&(t=[],t.push(this.minimum),t.push(this.maximum)),t}},watch:{valueMin(){this.triggerInput()},valueMax(){this.triggerInput()},minValue(t){this.valueMin=t<this.minimum?this.minimum:t},maxValue(t){this.valueMax=t>this.maximum?this.maximum:t}},mounted(){}},oS={class:"bar"},aS=["min","max","step","value"],lS={class:"caption"},cS={class:"min-caption"},uS={class:"bar-inner"},dS=["min","max","step","value"],hS={class:"caption"},fS={class:"max-caption"},pS={key:0,class:"ruler"},mS={key:1,class:"sub-ruler"},gS={key:2,class:"labels"};function _S(t,e,n,s,i,r){return v(),C("div",{class:ht([n.baseClassName,i.rangeMarginValue===0?"zero-ranage-margin":""]),onMousewheel:e[10]||(e[10]=$a((...o)=>r.onMouseWheel&&r.onMouseWheel(...o),["prevent","stop"]))},[y("div",oS,[y("div",{class:"bar-left",style:Ht({width:r.barMin+"%"}),onClick:e[0]||(e[0]=(...o)=>r.onBarLeftClick&&r.onBarLeftClick(...o))},null,4),y("input",{class:"input-type-range input-type-range-min",type:"range",min:r.minimum,max:r.maximum,step:n.step,value:i.valueMin,onInput:e[1]||(e[1]=$a((...o)=>r.onInputMinChange&&r.onInputMinChange(...o),["stop","prevent"]))},null,40,aS),y("div",{class:"thumb thumb-left",onMousedown:e[2]||(e[2]=(...o)=>r.onLeftThumbMousedown&&r.onLeftThumbMousedown(...o)),onTouchstart:e[3]||(e[3]=(...o)=>r.onLeftThumbMousedown&&r.onLeftThumbMousedown(...o))},[y("div",lS,[y("span",cS,re(n.minCaption||r.barMinVal),1)])],32),y("div",uS,[y("div",{class:"bar-inner-left",onClick:e[4]||(e[4]=(...o)=>r.onInnerBarLeftClick&&r.onInnerBarLeftClick(...o))}),y("div",{class:"bar-inner-right",onClick:e[5]||(e[5]=(...o)=>r.onInnerBarRightClick&&r.onInnerBarRightClick(...o))})]),y("input",{class:"input-type-range input-type-range-max",type:"range",min:r.minimum,max:r.maximum,step:n.step,value:i.valueMax,onInput:e[6]||(e[6]=$a((...o)=>r.onInputMaxChange&&r.onInputMaxChange(...o),["stop","prevent"]))},null,40,dS),y("div",{class:"thumb thumb-right",onMousedown:e[7]||(e[7]=(...o)=>r.onRightThumbMousedown&&r.onRightThumbMousedown(...o)),onTouchstart:e[8]||(e[8]=(...o)=>r.onRightThumbMousedown&&r.onRightThumbMousedown(...o))},[y("div",hS,[y("span",fS,re(n.maxCaption||r.barMaxVal),1)])],32),y("div",{class:"bar-right",style:Ht({width:r.barMax+"%"}),onClick:e[9]||(e[9]=(...o)=>r.onBarRightClick&&r.onBarRightClick(...o))},null,4)]),n.ruler?(v(),C("div",pS,[(v(!0),C(_e,null,Qe(r.stepCount,o=>(v(),C("div",{key:o,class:"ruler-rule"}))),128))])):je("",!0),r.subStepCount?(v(),C("div",mS,[(v(!0),C(_e,null,Qe(r.subStepCount,o=>(v(),C("div",{key:o,class:"ruler-sub-rule"}))),128))])):je("",!0),n.label?(v(),C("div",gS,[(v(!0),C(_e,null,Qe(r.scaleLabels,o=>(v(),C("div",{class:"label",key:o},re(o),1))),128))])):je("",!0)],34)}const yS=he(rS,[["render",_S]]);const vS={class:"diff"},wS={props:["modelValue","max"],emits:["update:modelValue"],data(){return{minValue:3,maxValue:5,difficulties:["very easy","easy","normal","hard","very hard"]}},computed:{difficultyText(){const t=(this.minValue+this.maxValue)/2;return this.difficulties[Math.floor((t-1)/(this.max/this.difficulties.length))]}},watch:{minValue(){this.$emit("update:modelValue",[this.minValue,this.maxValue])},maxValue(){this.$emit("update:modelValue",[this.minValue,this.maxValue])},max(){this.maxValue>this.max&&(this.maxValue=this.max,this.minValue>this.maxValue&&(this.minValue=this.maxValue-1))}},mounted(){this.maxValue>this.max&&(this.maxValue=this.max,this.minValue>this.maxValue&&(this.minValue=this.maxValue-1))},methods:{updateValue(t){this.minValue=t.minValue,this.maxValue=t.maxValue,this.$emit("update:modelValue",[t.minValue,t.maxValue])}}},qm=Object.assign(wS,{__name:"DifficultySlider",setup(t){return(e,n)=>(v(),C("div",vS,[y("h2",null,"difficulty - "+re(e.difficultyText)+" ("+re(e.minValue)+" - "+re(e.maxValue)+")",1),E(me(yS),{baseClassName:"multi-range-slider custom-slider",min:2,max:t.max,step:1,ruler:!1,label:!1,minValue:e.minValue,maxValue:e.maxValue,minCaption:"",maxCaption:"",labels:[],onInput:e.updateValue},null,8,["max","minValue","maxValue","onInput"])]))}});const CS={props:["modelValue"],emits:["update:modelValue"],computed:{moduloText(){return this.modelValue}},methods:{emit(t){this.$emit("update:modelValue",parseInt(t.target.value))}}},bS={class:"diff"},ES=["value"];function TS(t,e,n,s,i,r){return v(),C("div",bS,[y("h2",null,"states - "+re(r.moduloText),1),y("input",{type:"range",min:"2",value:n.modelValue,onInput:e[0]||(e[0]=(...o)=>r.emit&&r.emit(...o)),max:"5"},null,40,ES)])}const Gm=he(CS,[["render",TS],["__scopeId","data-v-5833a5d1"]]),Wr=()=>{let t=Re(window.innerWidth),e=Re(window.innerHeight);const n=()=>t.value=window.innerWidth,s=()=>e.value=window.innerHeight;dr(()=>window.addEventListener("resize",n)),dr(()=>window.addEventListener("resize",s)),hr(()=>window.removeEventListener("resize",n)),hr(()=>window.removeEventListener("resize",s));const i=Ne(()=>t.value),r=Ne(()=>e.value);return{width:i,height:r}};const kS={props:{show:Boolean,solutionIndex:Number,solveOnClick:Boolean,solutions:Array,determinant:Number,zerows:Number},emits:["update:show","update:solutionIndex","update:solveOnClick"],data(){const{width:t}=Wr();return{windowWidth:t,isFreeplayGame:this.$router.currentRoute.value.name==="freeplayGame"}},methods:{emit(t){this.$emit("update:solveOnClick",t.target.checked)},open(){this.$router.push("/editor")},close(){jm(!1),this.$emit("update:show",!1)}},computed:{solution(){return this.solutions.length===0?null:this.solutions[this.solutionIndex].matrix}}},Pa=t=>(Ft("data-v-93da59ad"),t=t(),Ut(),t),IS=Pa(()=>y("h1",null,"DevMode",-1)),SS={key:1,class:"input"},xS=Pa(()=>y("hr",null,null,-1)),PS={key:2},RS=Pa(()=>y("p",null,"Only one solution found:",-1)),MS={key:3},AS=Pa(()=>y("p",null,"Multiple solutions found:",-1)),OS=["onClick"];function LS(t,e,n,s,i,r){return v(),Pe(sn,{name:"fade"},{default:Me(()=>[n.show?(v(),C("div",{key:0,class:ht(["devmode middle",{left:i.windowWidth>=600,center:i.windowWidth<600}])},[i.isFreeplayGame?(v(),C("div",{key:0,class:"close-dev",onClick:e[0]||(e[0]=(...o)=>r.close&&r.close(...o))},"x")):je("",!0),IS,i.isFreeplayGame?(v(),C("div",SS,[y("input",{type:"checkbox",onInput:e[1]||(e[1]=(...o)=>r.emit&&r.emit(...o))},null,32),vo(" re-solve on click ")])):je("",!0),y("p",null,"Det: "+re(n.determinant),1),xS,n.determinant!==0?(v(),C("div",PS,[RS,y("p",null,re(n.solutions[0].moves)+" moves",1)])):(v(),C("div",MS,[y("p",null,"zerows: "+re(n.zerows),1),AS,(v(!0),C(_e,null,Qe(n.solutions,(o,a)=>(v(),C("p",{class:ht(["cursor",{selected:n.solutionIndex===a}]),key:a,onClick:l=>t.$emit("update:solutionIndex",a)},re(o.moves)+" moves ",11,OS))),128))])),i.isFreeplayGame?(v(),C("div",{key:4,class:"open",onClick:e[2]||(e[2]=(...o)=>r.open&&r.open(...o))}," Open in editor ")):je("",!0)],2)):je("",!0)]),_:1})}const Km=he(kS,[["render",LS],["__scopeId","data-v-93da59ad"]]);const Iu={props:["value","max","text","barColor","backgroundColor"],computed:{progress(){return this.max==0?"100%":this.value/this.max*100+"%"},barColorOrDefault(){return this.barColor??"var(--root-bg-color)"}}},Gh=()=>{wi(t=>({"0bdbb7b3":t.progress,"354b26e8":t.barColorOrDefault}))},Kh=Iu.setup;Iu.setup=Kh?(t,e)=>(Gh(),Kh(t,e)):Gh;const NS=t=>(Ft("data-v-5f86ed57"),t=t(),Ut(),t),DS={class:"container"},$S=NS(()=>y("div",{class:"progress"},null,-1)),FS={class:"text"};function US(t,e,n,s,i,r){return v(),C("div",DS,[$S,y("div",FS,re(n.text),1)])}const os=he(Iu,[["render",US],["__scopeId","data-v-5f86ed57"]]);const Su=t=>(Ft("data-v-bfb9287f"),t=t(),Ut(),t),VS={class:"top-menu"},BS=Su(()=>y("span",null," DEV ",-1)),zS=[BS],HS={class:"top right"},WS={key:0},jS={style:{margin:"0"}},qS={style:{"font-size":"var(--font-size-xs)",margin:"14px 0"}},GS={key:1},KS=Su(()=>y("h1",null,"So far you have only been playing in Freeplay, where you are free to choose your difficulty and have no constraints.",-1)),YS=Su(()=>y("h1",null,"Swipe to change menus and go to the Puzzles and Challenges gamemodes.",-1)),QS={data(){const t=Y(),e=t.currentLayout,{width:n}=Wr();return{modalPage:0,windowWidth:n,store:t,layout:e,savedMatrix:[],difficultyRange:[3,5],difficulty:t.difficulty,latestDifficulty:t.difficulty,latestScore:0,internalModulo:ae.value,showModal:!1,showDevMode:vn.value,solutions:[],solutionIndex:0,determinant:0,zerows:0,moves:0,solveOnClick:!1}},watch:{difficulty(){this.store.difficulty=this.difficulty,this.randomize()},internalModulo(t){Pi(t),this.difficultyRange[1]>this.max&&(this.difficultyRange[1]=this.max),this.difficultyRange[0]>this.difficultyRange[1]&&(this.difficultyRange[0]=this.difficultyRange[1]-1),this.randomize()},showModal(){this.showModal||(this.store.isRandomFreeplay&&(this.store.setLayout(ee.getRandomLayout()),this.layout=this.store.currentLayout),this.randomize())}},computed:{solution(){return this.solutions.length===0?null:this.solutions[this.solutionIndex].matrix},showOtherGameModesPopup(){const t=Y();return t.score>=50&&!t.hasHadOtherGameModesPopup},max(){return(ae.value-1)*(this.layout.nTiles()-this.zerows)}},methods:{handleClick(t,e,n){if(this.moves++,vn.value)if(this.solveOnClick)this.updateSolutions();else for(const s of this.solutions)s.matrix[e][n]=((s.matrix[e][n]-1)%ae.value+ae.value)%ae.value;this.layout.isSolved(ae.value)&&(this.store.stats.layoutsSolved++,this.showModal=!0,this.latestScore=this.layout.computeScore(this.latestDifficulty),this.store.score+=this.latestScore,ft.advanceTasks(this.layout.id,ft.TASK_TYPES.FREEPLAY,this.store.difficulty))},randomize(){this.moves=0;const t=this.difficultyRange[0],e=this.difficultyRange[1];this.latestDifficulty=Math.floor(Math.random()*(e-t+1)+t),this.layout=this.layout.generatePosition(this.latestDifficulty,ae.value,xn.value),this.savedMatrix=this.layout.matrix.map(n=>n.map(s=>s)),this.$nextTick(()=>{try{vn.value&&this.updateSolutions()}catch(n){console.error(n),this.solution=this.layout.matrix.map(s=>s.map(i=>0))}})},reset(){this.moves=0,this.layout.matrix=this.savedMatrix.map(t=>t.map(e=>e)),vn.value&&this.updateSolutions()},updateSolutions(){const{solutions:t,shortest:e,determinant:n,zerows:s}=nS(this.layout.matrix);this.solutionIndex=e,this.solutions=t,this.determinant=n,this.zerows=s},unlockOtherGameModes(){this.showModal=!1,this.modalPage=0,this.store.hasHadOtherGameModesPopup=!0,this.$router.push("/home")}},mounted(){this.randomize(),En(vn,t=>{t&&this.updateSolutions()}),this.updateSolutions()}},XS=Object.assign(QS,{__name:"FreeplayGame",setup(t){return(e,n)=>(v(),C("div",null,[y("div",VS,[me(vn)&&e.windowWidth<600?(v(),C("div",{key:0,class:"devmode",onClick:n[0]||(n[0]=s=>e.showDevMode=!e.showDevMode)},zS)):je("",!0),E(qm,{modelValue:e.difficultyRange,"onUpdate:modelValue":n[1]||(n[1]=s=>e.difficultyRange=s),max:e.max},null,8,["modelValue","max"]),E(X,{text:"randomize",onPressed:e.randomize},null,8,["onPressed"]),E(X,{text:"reset",onPressed:e.reset},null,8,["onPressed"])]),xs(y("p",{class:ht(["move-counter top",{left:e.windowWidth<600,center:e.windowWidth>=600}])},re(e.moves)+" move"+re(e.moves>1?"s":""),3),[[ca,e.moves>0]]),y("div",HS,[E(Ri,{text:"back",to:"/home"}),e.store.score>=e.store.categories[10]?(v(),Pe(Gm,{key:0,modelValue:e.internalModulo,"onUpdate:modelValue":n[2]||(n[2]=s=>e.internalModulo=s)},null,8,["modelValue"])):je("",!0)]),y("main",null,[E(sn,{name:"fade",mode:"out-in"},{default:Me(()=>[(v(),Pe(en,{key:me(ae)+e.layout.id,modelValue:e.layout,"onUpdate:modelValue":n[3]||(n[3]=s=>e.layout=s),solution:me(vn)?e.solution:null,onSwap:e.handleClick},null,8,["modelValue","solution","onSwap"]))]),_:1})]),me(vn)?je("",!0):(v(),C("div",{key:0,class:"open-dev left bottom",onClick:n[4]||(n[4]=s=>{me(jm)(!0),e.showDevMode=!0})}," v ")),E(Km,{show:e.showDevMode,"onUpdate:show":n[5]||(n[5]=s=>e.showDevMode=s),"solution-index":e.solutionIndex,"onUpdate:solutionIndex":n[6]||(n[6]=s=>e.solutionIndex=s),"solve-on-click":e.solveOnClick,"onUpdate:solveOnClick":n[7]||(n[7]=s=>e.solveOnClick=s),solutions:e.solutions,determinant:e.determinant,zerows:e.zerows},null,8,["show","solution-index","solve-on-click","solutions","determinant","zerows"]),E(Tt,{modelValue:e.showModal,"onUpdate:modelValue":n[10]||(n[10]=s=>e.showModal=s)},{default:Me(()=>[e.modalPage===0?(v(),C("div",WS,[y("h1",jS,"you won in "+re(e.moves)+" move"+re(e.moves>1?"s":"")+"!",1),y("p",qS,"+ "+re(e.latestScore)+" score",1),E(os,{value:e.store.score,max:e.store.nextScore,barColor:"#e58f65",style:{border:"5px solid black","margin-bottom":"15px"},text:Math.floor(e.store.score)+(e.store.nextScore===0?"":" / "+e.store.nextScore)},null,8,["value","max","text"]),e.showOtherGameModesPopup?(v(),Pe(X,{key:1,text:"yay!",black:"",onPressed:n[9]||(n[9]=s=>{e.modalPage=1})})):(v(),Pe(X,{key:0,black:"",text:"yay!",onPressed:n[8]||(n[8]=s=>e.showModal=!1)}))])):e.modalPage===1?(v(),C("div",GS,[KS,YS,E(X,{text:"yay!",black:"",onPressed:e.unlockOtherGameModes},null,8,["onPressed"])])):je("",!0)]),_:1},8,["modelValue"])]))}}),JS=he(XS,[["__scopeId","data-v-bfb9287f"]]),Ym="/tileswap-naenae/images/svg/tutorial.svg";const xu=t=>(Ft("data-v-664aa9d7"),t=t(),Ut(),t),ZS={class:"puzzle-container"},ex={style:{"font-size":"var(--font-size-xs)",margin:"14px 0"}},tx=xu(()=>y("h1",null,"you gotta do what do be do be doo",-1)),nx={class:"explanation"},sx={key:0},ix={key:1},rx=xu(()=>y("h1",null,"you gotta do what do be do be doo",-1)),ox=xu(()=>y("h1",null,"and do it in as few moves as possible",-1)),ax={data(){const t=Y(),e=t.currentPuzzle,n=e.base.copy(),{width:s,height:i}=Wr();return{store:t,windowWidth:s,windowHeight:i,layout:n,puzzle:e,moves:0,maxMoves:e.moves,showWinModal:!1,showExplanationModal:!0,showIntroductionModal:!t.hasHadChallengeExplanationPopup}},computed:{completionMoves(){return this.puzzle.completionMoves===-1?"":`current best: ${this.puzzle.completionMoves} moves`},nextMedal(){const{medal:t,movesRequiredForNextMedal:e}=this.puzzle.medalFromMoves(this.puzzle.completionMoves);if(t===Nt.MEDALS.NOT_COMPLETED||t===Nt.MEDALS.GOLD)return"";if(t===Nt.MEDALS.SILVER)return`next medal: ${e} moves`;if(t===Nt.MEDALS.BRONZE)return`next medal: ${e} moves`}},watch:{showIntroductionModal(t){t||(this.store.hasHadChallengeExplanationPopup=!0)}},methods:{reset(){this.moves=0,this.layout.setMatrix(this.puzzle.base.matrix)},handleClick(){this.moves++,this.puzzle.isSolvedWith(this.layout)&&(this.showWinModal=!0,this.puzzle.completionMoves=this.moves,ft.advanceTasks(this.puzzle.id,ft.TASK_TYPES.PUZZLE,this.moves))},restart(){this.showWinModal=!1,this.reset()},quit(){this.$router.push("/home")}}},lx=Object.assign(ax,{__name:"PuzzleGame",setup(t){return(e,n)=>(v(),C("div",null,[E(Ri,{class:"top right",text:"back",to:"/home"}),E(Ks,{class:"top left",icon:me(Ym),onPressed:n[0]||(n[0]=s=>e.showExplanationModal=!0)},null,8,["icon"]),y("div",{class:ht(["info center",{top:e.windowWidth>600,bottom:e.windowWidth<=600}])},[xs(y("p",null,re(e.moves)+" move"+re(e.moves>1?"s":""),513),[[ca,e.moves>0]]),y("h1",null,re(e.completionMoves),1),y("h1",null,re(e.nextMedal),1),E(X,{text:"retry",onPressed:e.reset},null,8,["onPressed"])],2),y("main",ZS,[E(en,{modelValue:e.layout,"onUpdate:modelValue":n[1]||(n[1]=s=>e.layout=s),target:e.puzzle.target.matrix,onSwap:e.handleClick},null,8,["modelValue","target","onSwap"])]),E(Tt,{modelValue:e.showWinModal,"onUpdate:modelValue":n[3]||(n[3]=s=>e.showWinModal=s)},{default:Me(()=>[y("h1",null,"you won in "+re(e.moves)+" move"+re(e.moves>1?"s":"")+"!",1),y("h1",null,re(e.nextMedal),1),y("p",ex,"+ "+re(e.puzzle.latestAddedScore)+" score",1),E(os,{value:e.store.score,max:e.store.nextScore,barColor:"#e58f65",style:{border:"5px solid black"},text:Math.floor(e.store.score)+(e.store.nextScore===0?"":" / "+e.store.nextScore)},null,8,["value","max","text"]),E(X,{black:"",text:"yay!",onPressed:n[2]||(n[2]=s=>{e.showWinModal=!1,e.quit()})}),E(X,{black:"",text:"retry",onPressed:e.restart},null,8,["onPressed"])]),_:1},8,["modelValue"]),E(Tt,{modelValue:e.showExplanationModal,"onUpdate:modelValue":n[7]||(n[7]=s=>e.showExplanationModal=s)},{default:Me(()=>[tx,y("div",nx,[E(en,{small:"",modelValue:e.puzzle.base,"onUpdate:modelValue":n[4]||(n[4]=s=>e.puzzle.base=s),disabled:""},null,8,["modelValue"]),e.windowWidth>e.windowHeight?(v(),C("p",sx,"→")):(v(),C("p",ix,"↓")),E(en,{small:"",modelValue:e.puzzle.target,"onUpdate:modelValue":n[5]||(n[5]=s=>e.puzzle.target=s),disabled:""},null,8,["modelValue"])]),E(X,{black:"",text:"close",onPressed:n[6]||(n[6]=s=>e.showExplanationModal=!1)})]),_:1},8,["modelValue"]),E(Tt,{modelValue:e.showIntroductionModal,"onUpdate:modelValue":n[9]||(n[9]=s=>e.showIntroductionModal=s)},{default:Me(()=>[rx,ox,E(X,{black:"",text:"close",onPressed:n[8]||(n[8]=s=>e.showIntroductionModal=!1)})]),_:1},8,["modelValue"])]))}}),cx=he(lx,[["__scopeId","data-v-664aa9d7"]]);const Qm=t=>(Ft("data-v-2995fef0"),t=t(),Ut(),t),ux={class:"info center"},dx={class:"per center"},hx=Qm(()=>y("h1",null,"you won the challenge!",-1)),fx={style:{"font-size":"var(--font-size-xs)",margin:"14px 0"}},px=Qm(()=>y("h1",null,"Game is paused",-1)),mx={data(){const t=Y(),{currentChallenge:e}=t;return{store:t,currentChallenge:e,showWinModal:!1,showLostModal:!1,showPauseModal:!1,modalText:""}},mounted(){this.currentChallenge.process.start()},methods:{handleClick(){this.currentChallenge.process.handleClick(),this.currentChallenge.process.state===Cs.STATE.IN_PROGRESS&&Pi(this.currentChallenge.process.patternModulo)},pause(){this.showPauseModal=!0,this.currentChallenge.process.pause()},resume(){this.showPauseModal=!1,this.currentChallenge.process.resume()},restart(){this.currentChallenge.process.quit(),this.currentChallenge.process.init(),this.currentChallenge.process.start(),this.showPauseModal=!1,this.showLostModal=!1},quit(){this.currentChallenge.process.quit(),this.$router.push("/home")}},watch:{"currentChallenge.process.state"(t){if(t===Cs.STATE.WON){this.showWinModal=!0,ft.advanceTasks(this.currentChallenge.id,ft.TASK_TYPES.CHALLENGE,this.currentChallenge.settings.timeLimit-this.currentChallenge.process.currentTime),this.currentChallenge.process.init();return}if(t===Cs.STATE.LOST_TIME){this.modalText="no time left!",this.showLostModal=!0,this.currentChallenge.process.init();return}if(t===Cs.STATE.LOST_MOVES){this.modalText="no moves left!",this.showLostModal=!0,this.currentChallenge.process.init();return}}},computed:{formattedTime(){return this.currentChallenge.process.timeRemaining!==-1?Zl(this.currentChallenge.process.timeRemaining):""},formattedTimePer(){return this.currentChallenge.process.patternTime!==-1?Zl(this.currentChallenge.process.patternTime):""},percentageCompleted(){return this.currentChallenge.settings.isInfinite?0:Math.floor(this.currentChallenge.process.patternIndex/this.currentChallenge.settings.patternCount*100)},moves(){return this.currentChallenge.process.movesRemaining===-1?"":this.currentChallenge.process.movesRemaining},movesPer(){return this.currentChallenge.process.patternMoves===-1?"":this.currentChallenge.process.patternMoves}}},gx=Object.assign(mx,{__name:"ChallengeGame",setup(t){return(e,n)=>(v(),C("div",null,[E(X,{class:"top right",text:"pause",onPressed:e.pause},null,8,["onPressed"]),y("div",null,[y("h2",ux,re([e.formattedTime,e.moves,e.currentChallenge.settings.isInfinite?null:e.percentageCompleted+"%"].filter(s=>s).join(" - ")),1),y("h2",dx,re([e.movesPer,e.formattedTimePer].filter(s=>s).join(" - ")),1),E(os,{class:"center progress",value:e.percentageCompleted,max:100},null,8,["value"])]),y("main",null,[E(sn,{name:"fade",mode:"out-in"},{default:Me(()=>[(v(),Pe(en,{key:e.currentChallenge.process.patternIndex,modelValue:e.currentChallenge.process.currentPattern.layout,"onUpdate:modelValue":n[0]||(n[0]=s=>e.currentChallenge.process.currentPattern.layout=s),onSwap:e.handleClick},null,8,["modelValue","onSwap"]))]),_:1})]),E(Tt,{modelValue:e.showWinModal,"onUpdate:modelValue":n[2]||(n[2]=s=>e.showWinModal=s)},{default:Me(()=>[hx,y("p",fx,"+ "+re(e.currentChallenge.process.latestAddedScore)+" score",1),E(os,{value:e.store.score,max:e.store.nextScore,barColor:"#e58f65",style:{border:"5px solid black"},text:Math.floor(e.store.score)+(e.store.nextScore===0?"":" / "+e.store.nextScore)},null,8,["value","max","text"]),E(X,{black:"",text:"yay!",onPressed:n[1]||(n[1]=s=>{e.showWinModal=!1,e.quit()})})]),_:1},8,["modelValue"]),E(Tt,{modelValue:e.showLostModal,"onUpdate:modelValue":n[4]||(n[4]=s=>e.showLostModal=s)},{default:Me(()=>[y("h1",null,re(e.modalText),1),E(X,{black:"",text:"adnwkhu!",onPressed:n[3]||(n[3]=s=>{e.showLostModal=!1,e.quit()})}),E(X,{black:"",text:"restart",onPressed:e.restart},null,8,["onPressed"])]),_:1},8,["modelValue"]),E(Tt,{modelValue:e.showPauseModal,"onUpdate:modelValue":n[5]||(n[5]=s=>e.showPauseModal=s)},{default:Me(()=>[px,E(X,{black:"",text:"resume",onPressed:e.resume},null,8,["onPressed"]),E(X,{black:"",text:"restart",onPressed:e.restart},null,8,["onPressed"]),E(X,{black:"",text:"quit",onPressed:e.quit},null,8,["onPressed"])]),_:1},8,["modelValue"])]))}}),_x=he(gx,[["__scopeId","data-v-2995fef0"]]);const De=t=>(Ft("data-v-13924395"),t=t(),Ut(),t),yx={key:0},vx=De(()=>y("h1",null,"Welcome to TileSwap",-1)),wx=De(()=>y("h1",null,"To win the game, turn all the tiles white",-1)),Cx=De(()=>y("h1",null,[vo("Clicking on a tile swaps the color of "),y("span",{style:{color:"var(--success-color)"}},"this tile"),vo(" and all its neighbors")],-1)),bx={key:1},Ex=De(()=>y("h1",null,"You've won!",-1)),Tx=De(()=>y("h1",null,"You're free to continue experimenting. Continue when you're ready.",-1)),kx={key:2},Ix=De(()=>y("h1",null,"Now see what happens when tiles are missing.",-1)),Sx={key:3},xx=De(()=>y("h1",null,"You should be getting the hang of it",-1)),Px=De(()=>y("h1",null,"Let's make this a bit interesting",-1)),Rx={key:4},Mx=De(()=>y("h1",null,"Everything so far could be solved in a single click",-1)),Ax=De(()=>y("h1",null,"However as you might have seen when experimenting, things get complicated very fast",-1)),Ox=De(()=>y("h1",null,"For example when 2 clicks overlap",-1)),Lx=De(()=>y("h1",null,"[INSERT ANIMATION]",-1)),Nx={key:5},Dx=De(()=>y("h1",null,"As you might have noticed, clicking twice on the same tile is the same as not clicking on it at all.",-1)),$x=De(()=>y("h1",null,"[INSERT ANIMATION]",-1)),Fx={key:6},Ux=De(()=>y("h1",null,"Also notice that the order on which you click the tiles does not matter.",-1)),Vx=De(()=>y("h1",null,"[INSERT ANIMATION]",-1)),Bx={key:7},zx=De(()=>y("h1",null,"From now on we won't tell you when you're getting further away from the solution.",-1)),Hx=De(()=>y("h1",null,"You can go back to the initial state anytime by pressing the reset button",-1)),Wx=De(()=>y("h1",null,"[INSERT ANIMATION]",-1)),jx={key:8},qx=De(()=>y("h1",null,"Now let's progressively make a pattern harder",-1)),Gx={key:9},Kx=De(()=>y("h1",null,"Try a few different patterns",-1)),Yx={key:10},Qx=De(()=>y("h1",null,"Same concept as before, but things get harder if you mess up",-1)),Xx={key:11},Jx=De(()=>y("h1",null,"You seem to have mastered the basics",-1)),Zx=De(()=>y("h1",null,"How about we now let you choose how difficult you want it to be?",-1)),eP=De(()=>y("h1",null,"Move the slider to adjust the difficulty of the initial state",-1)),tP=De(()=>y("h1",null,"[INSERT ANIMATION]",-1)),nP={class:"top center text-center",style:{width:"max-content","max-width":"100%"}},sP={key:2},iP={data(){const t=[{matrix:[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]],solution:[12],title:"Basics 1 / 5"},{matrix:[[0,0,0,1,1],[0,0,0,1,1],[0,0,0,1,1],[1,1,1,1,1],[1,1,1,1,1]],solution:[6],title:"Basics - 2 / 5"},{matrix:[[0,0,0,1,1,1],[0,0,0,1,1,1],[0,0,0,1,1,1],[1,1,1,0,0,0],[1,1,1,0,0,0],[1,1,1,0,0,0]],solution:[7,28],title:"Basics - 3 / 5"},{matrix:[[0,0,0,1,1,1,1],[0,0,0,1,0,0,0],[0,0,0,1,0,0,0],[1,1,1,1,0,0,0],[1,0,0,0,1,1,1],[1,0,0,0,1,1,1],[1,0,0,0,1,1,1]],solution:[8,19,37],title:"Basics - 4 / 5"},{matrix:[[0,0,0],[0,0,0],[0,0,0]],solution:[4],title:"Basics - 5 / 5",showModal:!0},{matrix:[[-1,0,0,1,1],[0,0,0,1,1],[0,0,0,1,1],[1,1,1,1,1],[1,1,1,1,1]],solution:[6],title:"Missing tiles - 1 / 5"},{matrix:[[1,1,1,1,1],[1,1,1,1,1],[1,1,0,0,0],[1,1,0,0,0],[1,1,0,-1,0]],solution:[18],title:"Missing tiles - 2 / 5"},{matrix:[[1,1,1,1,1],[1,0,-1,0,1],[1,-1,0,-1,1],[1,0,-1,0,1],[1,1,1,1,1]],solution:[12],title:"Missing tiles - 3 / 5"},{matrix:[[1,1,1,1,1],[1,1,1,1,1],[0,0,0,1,1],[-1,0,0,1,1],[-1,-1,0,1,1]],solution:[16],title:"Missing tiles - 4 / 5"},{matrix:[[1,1,1,1,1],[1,1,1,1,1],[-1,0,0,1,1],[-1,0,0,1,1],[-1,-1,-1,1,1]],solution:[16],title:"Missing tiles - 5 / 5",showModal:!0},{matrix:[[1,1,0,0],[1,1,0,0],[0,0,0,0],[0,0,1,1]],solution:[7,12],title:"Corners - 1 / 3"},{matrix:[[1,1,1],[0,-1,1],[0,0,1]],solution:[6],title:"Corners - 2 / 3"},{matrix:[[1,1,1],[1,-1,0],[1,-1,0]],solution:[8],title:"Corners - 3 / 3",showModal:!0},{matrix:[[0,0,0,1,1],[0,0,0,1,1],[0,0,1,0,0],[1,1,0,0,0],[1,1,0,0,0]],solution:[6,18],title:"Overlapping clicks - 1 / 5"},{matrix:[[0,0,0,1,1],[0,0,1,0,0],[0,0,1,0,0],[1,1,0,0,0],[1,1,1,1,1]],solution:[6,13],title:"Overlapping clicks - 2 / 5"},{matrix:[[0,0,0],[1,1,1],[0,0,0],[0,0,0]],solution:[1,7],title:"Overlapping clicks - 3 / 5"},{matrix:[[0,1,0],[0,1,0],[1,1,1]],solution:[0,2],title:"Overlapping clicks - 4 / 5"},{matrix:[[1,0,0],[0,1,0],[0,0,1]],solution:[2,6],title:"Overlapping clicks - 5 / 5",showModal:!0},{matrix:[[1,0,1]],title:"On your own - 1 / 4",moves:3},{matrix:[[1,1,1],[-1,0,-1],[-1,1,-1]],title:"On your own - 2 / 4",moves:3},{matrix:[[-1,0,-1],[1,0,0],[-1,1,-1]],title:"On your own - 3 / 4",moves:3},{matrix:[[1,0,0],[0,-1,-1],[0,1,0],[-1,-1,1],[0,0,0]],title:"On your own - 4 / 4",moves:4,showModal:!0},{matrix:[[1,0,1],[1,-1,1],[1,1,1]],title:"Step-by-step 1/3",moves:3},{matrix:[[1,0,1],[1,-1,1],[1,0,1]],title:"Step-by-step 2/3",moves:6},{matrix:[[1,0,1],[1,-1,0],[1,0,1]],title:"Step-by-step 3/3",moves:5,showModal:!0},{matrix:[[0,-1,0],[-1,0,-1],[0,-1,1]],title:"Others 1/3",moves:3},{matrix:[[1,0,-1],[0,-1,1],[-1,1,1]],title:"Others 2/3",moves:2},{matrix:[[1,1,-1],[0,-1,1],[-1,0,0]],title:"Others 3/3",moves:3,showModal:!0},{matrix:[[0,0,1,0],[0,0,1,0],[1,1,0,1],[1,1,0,1]],title:"Final steps - 1 / 5",moves:4},{matrix:[[0,0,1,1,1],[1,1,1,1,1],[1,1,0,0,0],[1,1,1,1,1],[0,0,1,1,1]],title:"Final steps - 2 / 5",moves:5},{matrix:[[0,1,1],[1,0,0],[0,1,1]],title:"Final steps - 3 / 5",moves:3},{matrix:[[1,0,1],[1,1,0],[0,1,1]],title:"Final steps - 4 / 5",moves:4},{matrix:[[1,1,1],[1,0,1],[0,1,0]],title:"Final steps - 5 / 5",moves:5,showModal:!0}].map(e=>{const n=new ee({width:e.matrix[0].length,height:e.matrix.length,exclude:ee.getExcludeFromMatrix(e.matrix)});return n.setMatrix(e.matrix),{layout:n,matrix:e.matrix,showModal:e.showModal,solution:e.solution,modulo:e.modulo,title:e.title,moves:e.moves}});return{mistakes:0,highlightedTiles:[],showModal:!0,text:"Try it here!",modalPage:-1,stageIndex:0,stages:t,shake:!1,showWrong:!1,disabled:void 0,enableNext:!1,retry:!1,exampleLayout:(()=>{const e=new ee({width:5,height:5,id:"tutorial"});return e.setAllTiles(0),e})()}},watch:{showModal:{handler(t){t&&this.modalPage++},immediate:!0}},mounted(){window.setInterval(()=>{this.exampleLayout.swapTiles(2,2,1,2,tilesToFlip.value)},2e3)},computed:{stage(){return this.stages[this.stageIndex]},showMoves(){return this.stage.layout.matrix.every((t,e)=>t.every((n,s)=>n===this.stage.matrix[e][s]))&&!this.stage.solution}},methods:{handleClick(t,e,n){if(this.stage.solution&&!this.disabled&&!this.enableNext)if(this.stage.solution.includes(t))this.stages[this.stageIndex].solution.splice(this.stages[this.stageIndex].solution.indexOf(t),1),this.highlightedTiles=[],this.mistakes=0;else{this.mistakes++,this.mistakes>=4&&this.highlightedTiles.push([this.stage.solution[0]%this.stage.layout.width,Math.floor(this.stage.solution[0]/this.stage.layout.width)]),this.disabled=!0,setTimeout(()=>{this.stage.layout.swapTiles(e,n,-1,this.stage.modulo??2),this.shake=!0,this.showWrong=!0,this.disabled=void 0,setTimeout(()=>{this.showWrong=!1},2e3),setTimeout(()=>{this.shake=!1},900)},500);return}this.stage.layout.isSolved(this.stage.modulo??2)&&!this.enableNext&&(this.modalPage===0&&(this.showModal=!0),this.mistakes=0,this.highlightedTiles=[],this.enableNext=!0,this.text="Click next when finished experimenting")},next(){this.stage.showModal&&(this.showModal=!0),this.enableNext=!1,this.stageIndex!==this.stages.length-1&&(this.stageIndex++,this.text=this.stage.title)},reset(){this.stage.layout.setMatrix(this.stage.matrix)},end(){Y().setLayout(ee.fromId(0)),this.$router.push("/tutorialFreeplayGame")}}},rP=Object.assign(iP,{__name:"TutorialViewAdvanced",setup(t){return(e,n)=>(v(),C("main",null,[E(Tt,{modelValue:e.showModal,"onUpdate:modelValue":n[12]||(n[12]=s=>e.showModal=s)},{default:Me(()=>[e.modalPage===0?(v(),C("div",yx,[vx,wx,Cx,E(en,{class:"example-layout",small:"",disabled:"",modelValue:e.exampleLayout,"onUpdate:modelValue":n[0]||(n[0]=s=>e.exampleLayout=s),highlightedTiles:[[2,2]]},null,8,["modelValue"]),E(X,{black:"",text:"ok!",onPressed:n[1]||(n[1]=s=>e.showModal=!1)})])):e.modalPage===1?(v(),C("div",bx,[Ex,Tx,E(X,{black:"",text:"ok!",onPressed:n[2]||(n[2]=s=>e.showModal=!1)})])):e.modalPage===2?(v(),C("div",kx,[Ix,E(X,{black:"",text:"ok!",onPressed:n[3]||(n[3]=s=>e.showModal=!1)})])):e.modalPage===3?(v(),C("div",Sx,[xx,Px,E(X,{black:"",text:"ok!",onPressed:n[4]||(n[4]=s=>e.showModal=!1)})])):e.modalPage===4?(v(),C("div",Rx,[Mx,Ax,Ox,Lx,E(X,{black:"",text:"ok!",onPressed:n[5]||(n[5]=s=>e.showModal=!1)})])):e.modalPage===5?(v(),C("div",Nx,[Dx,$x,E(X,{black:"",text:"ok!",onPressed:n[6]||(n[6]=s=>e.modalPage++)})])):e.modalPage===6?(v(),C("div",Fx,[Ux,Vx,E(X,{black:"",text:"ok!",onPressed:n[7]||(n[7]=s=>e.modalPage++)})])):e.modalPage===7?(v(),C("div",Bx,[zx,Hx,Wx,E(X,{black:"",text:"ok!",onPressed:n[8]||(n[8]=s=>{e.showModal=!1,e.retry=!0})})])):e.modalPage===8?(v(),C("div",jx,[qx,E(X,{black:"",text:"ok!",onPressed:n[9]||(n[9]=s=>e.showModal=!1)})])):e.modalPage===9?(v(),C("div",Gx,[Kx,E(X,{black:"",text:"ok!",onPressed:n[10]||(n[10]=s=>e.showModal=!1)})])):e.modalPage===10?(v(),C("div",Yx,[Qx,E(X,{black:"",text:"ok!",onPressed:n[11]||(n[11]=s=>e.showModal=!1)})])):e.modalPage===11?(v(),C("div",Xx,[Jx,Zx,eP,tP,E(X,{black:"",text:"go to freeplay",onPressed:e.end},null,8,["onPressed"])])):je("",!0)]),_:1},8,["modelValue"]),E(sn,{appear:"",name:"fade",mode:"out-in"},{default:Me(()=>[(v(),C("div",{class:"center middle",key:e.stageIndex},[E(en,{highlightedTiles:e.highlightedTiles,class:ht({shake:e.shake}),modelValue:e.stage.layout,"onUpdate:modelValue":n[13]||(n[13]=s=>e.stage.layout=s),disabled:e.disabled,onSwap:e.handleClick},null,8,["highlightedTiles","class","modelValue","disabled","onSwap"])]))]),_:1}),y("div",nP,[y("h1",null,re(e.text),1),e.showWrong?(v(),C("h1",{key:0,class:ht({shake:e.shake})},"Wrong tile!",2)):je("",!0),e.retry?(v(),Pe(X,{key:1,text:"reset",onPressed:e.reset},null,8,["onPressed"])):je("",!0),e.showMoves?(v(),C("h1",sP,"this should take "+re(e.stage.moves)+" clicks",1)):je("",!0)]),e.enableNext?(v(),Pe(X,{key:0,class:"bottom center",text:"Next",onPressed:e.next},null,8,["onPressed"])):je("",!0)]))}}),oP=he(rP,[["__scopeId","data-v-13924395"]]);const $s=t=>(Ft("data-v-b07c154d"),t=t(),Ut(),t),aP={class:"top-menu"},lP={key:0,class:"top right"},cP={key:0},uP={key:1},dP=$s(()=>y("h1",null,"By finishing this pattern, you've gained a bit of score.",-1)),hP=$s(()=>y("h1",null,"The score you gain is proportional to the difficulty chosen on the slider.",-1)),fP=$s(()=>y("h1",null,"Reach the treshold at the end of the bar to unlock new things",-1)),pP=$s(()=>y("br",null,null,-1)),mP=$s(()=>y("h1",null,"However you might be tired of playing on the same pattern.",-1)),gP=$s(()=>y("h1",null,"Click on the back button to see what other options you have.",-1)),_P=$s(()=>y("h1",null,"Reach a score of 50 to unlock new gamemodes.",-1)),yP={data(){const t=Y(),e=t.currentLayout,{width:n}=Wr();return{firstCompletion:!0,modalPage:0,windowWidth:n,store:t,layout:e,savedMatrix:[],difficultyRange:[3,5],latestDifficulty:t.difficulty,latestScore:0,internalModulo:ae.value,showModal:!1,showBack:!1,moves:0}},watch:{internalModulo(t){Pi(t),this.randomize()},showModal(){this.showModal||(this.firstCompletion=!1,this.store.isRandomFreeplay&&(this.store.setLayout(ee.getRandomLayout()),this.layout=this.store.currentLayout),this.randomize())}},computed:{max(){return(ae.value-1)*this.layout.nTiles()}},methods:{handleClick(t,e,n){this.moves++,this.layout.isSolved(ae.value)&&(this.store.stats.layoutsSolved++,this.showModal=!0,this.latestScore=this.layout.computeScore(this.latestDifficulty),this.store.score+=this.latestScore,ft.advanceTasks(this.layout.id,ft.TASK_TYPES.FREEPLAY,this.store.difficulty))},randomize(){this.moves=0;const t=this.difficultyRange[0],e=this.difficultyRange[1];this.latestDifficulty=Math.floor(Math.random()*(e-t+1)+t),this.layout=this.layout.generatePosition(this.latestDifficulty,ae.value,xn.value),this.savedMatrix=this.layout.matrix.map(n=>n.map(s=>s))},reset(){this.moves=0,this.layout.matrix=this.savedMatrix.map(t=>t.map(e=>e))}},mounted(){this.randomize()}},vP=Object.assign(yP,{__name:"TutorialFreeplayGame",setup(t){return(e,n)=>(v(),C("div",null,[y("div",aP,[E(qm,{modelValue:e.difficultyRange,"onUpdate:modelValue":n[0]||(n[0]=s=>e.difficultyRange=s),max:e.max},null,8,["modelValue","max"]),E(X,{text:"randomize",onPressed:e.randomize},null,8,["onPressed"]),E(X,{text:"reset",onPressed:e.reset},null,8,["onPressed"])]),xs(y("p",{class:ht(["move-counter top",{left:e.windowWidth<600,center:e.windowWidth>=600}])},re(e.moves)+" move"+re(e.moves>1?"s":""),3),[[ca,e.moves>0]]),e.showBack?(v(),C("div",lP,[E(Ri,{text:"back",to:"/home"})])):je("",!0),y("main",null,[E(sn,{name:"fade",mode:"out-in"},{default:Me(()=>[(v(),Pe(en,{key:me(ae)+e.layout.id,modelValue:e.layout,"onUpdate:modelValue":n[1]||(n[1]=s=>e.layout=s),onSwap:e.handleClick},null,8,["modelValue","onSwap"]))]),_:1})]),E(Tt,{modelValue:e.showModal,"onUpdate:modelValue":n[5]||(n[5]=s=>e.showModal=s)},{default:Me(()=>[e.modalPage===0?(v(),C("div",cP,[y("h1",null,"you won in "+re(e.moves)+" move"+re(e.moves>1?"s":"")+"!",1),E(os,{value:e.store.score,max:e.store.nextScore,barColor:"#e58f65",style:{border:"5px solid black"},text:Math.floor(e.store.score)+(e.store.nextScore===0?"":" / "+e.store.nextScore)},null,8,["value","max","text"]),e.firstCompletion?(v(),Pe(X,{key:0,black:"",text:"next",onPressed:n[2]||(n[2]=s=>e.modalPage++)})):(v(),Pe(X,{key:1,black:"",text:"yay!",onPressed:n[3]||(n[3]=s=>e.showModal=!1)}))])):e.modalPage===1?(v(),C("div",uP,[dP,hP,fP,pP,mP,gP,_P,E(X,{black:"",text:"yay!",onPressed:n[4]||(n[4]=s=>{e.showModal=!1,e.modalPage=0,e.showBack=!0})})])):je("",!0)]),_:1},8,["modelValue"])]))}}),Yh=he(vP,[["__scopeId","data-v-b07c154d"]]);const wP={},Ra=t=>(Ft("data-v-3ba693a6"),t=t(),Ut(),t),CP=Ra(()=>y("div",{class:"tile"},null,-1)),bP=Ra(()=>y("div",{class:"tile"},null,-1)),EP=Ra(()=>y("div",{class:"tile"},null,-1)),TP=Ra(()=>y("div",{class:"tile"},null,-1)),kP=[CP,bP,EP,TP];function IP(t,e){return v(),C("main",null,kP)}const SP=he(wP,[["render",IP],["__scopeId","data-v-3ba693a6"]]);const xP=t=>(Ft("data-v-e5911d5a"),t=t(),Ut(),t),PP={class:"top right"},RP=xP(()=>y("h1",null,"Export",-1)),MP={data(){const e=Y().currentLayout;return{internalModulo:ae.value,showDevMode:!0,solutionIndex:0,solveOnClick:!1,solutions:[],determinant:0,showModal:!1,base:e.copy(),target:(()=>{const n=e.copy();return n.setAllTiles(1),n})()}},computed:{solution(){return this.solutions.length===0?null:this.solutions[this.solutionIndex].matrix},formatted(){var t,e;return JSON.stringify({moves:(t=this.solutions[this.solutionIndex])==null?void 0:t.moves,base:this.base.matrix,target:this.target.matrix,solution:(e=this.solution)==null?void 0:e.flat().map((n,s)=>[n,s]).filter(([n,s])=>n===this.internalModulo-1).map(([n,s])=>s),unlockCategory:0},null,2).replace(/"([^"]+)":/g,"$1:")}},watch:{internalModulo(t){Pi(t),this.solve()}},methods:{handleSwap(t,e){const n=Math.floor(e/t.width),s=e%t.width;t.swapTiles(n,s,-1,ae.value,xn.value),t.setTile(n,s,(t.getTile(n,s)+1)%ae.value),this.solve()},solve(){const{solutions:t,zerows:e,shortest:n,determinant:s}=bu({state:this.base.matrix,target:this.target.matrix,modulo:ae.value});this.solutions=t,this.determinant=s,this.solutionIndex=n}},mounted(){this.solve()}},AP=Object.assign(MP,{__name:"EditorView",setup(t){return(e,n)=>(v(),C("div",null,[E(Km,{show:e.showDevMode,"onUpdate:show":n[0]||(n[0]=s=>e.showDevMode=s),"solution-index":e.solutionIndex,"onUpdate:solutionIndex":n[1]||(n[1]=s=>e.solutionIndex=s),"solve-on-click":e.solveOnClick,"onUpdate:solveOnClick":n[2]||(n[2]=s=>e.solveOnClick=s),solutions:e.solutions,determinant:e.determinant},null,8,["show","solution-index","solve-on-click","solutions","determinant"]),y("main",null,[E(en,{onSwap:n[3]||(n[3]=s=>e.handleSwap(e.base,s)),modelValue:e.base,"onUpdate:modelValue":n[4]||(n[4]=s=>e.base=s),solution:e.solution},null,8,["modelValue","solution"]),E(en,{onSwap:n[5]||(n[5]=s=>e.handleSwap(e.target,s)),modelValue:e.target,"onUpdate:modelValue":n[6]||(n[6]=s=>e.target=s)},null,8,["modelValue"])]),y("div",PP,[E(Ri,{text:"back",to:"/freeplayGame"}),E(Gm,{modelValue:e.internalModulo,"onUpdate:modelValue":n[7]||(n[7]=s=>e.internalModulo=s)},null,8,["modelValue"]),E(X,{onPressed:n[8]||(n[8]=s=>e.showModal=!0),text:"export"})]),E(Tt,{modelValue:e.showModal,"onUpdate:modelValue":n[11]||(n[11]=s=>e.showModal=s)},{default:Me(()=>[RP,xs(y("textarea",{class:"export",readonly:"","onUpdate:modelValue":n[9]||(n[9]=s=>e.formatted=s)},null,512),[[El,e.formatted]]),E(X,{text:"close",onPressed:n[10]||(n[10]=s=>e.showModal=!1)})]),_:1},8,["modelValue"])]))}}),OP=he(AP,[["__scopeId","data-v-e5911d5a"]]);const LP={class:"bottom center"},NP={data(){const t=new ee({width:3,exclude:[],height:3,unlockCategory:0,id:0});return{width:3,height:3,exclude:[],layout:t,mode:"edit"}},computed:{enableClickOnHiddenTiles(){return this.mode==="edit"}},watch:{width(t){this.layout=new ee({width:parseInt(t),height:parseInt(this.height),exclude:this.exclude,unlockCategory:0,id:0})},height(t){this.layout=new ee({width:parseInt(this.width),height:parseInt(t),exclude:this.exclude,unlockCategory:0,id:0})}},methods:{handleClick(t,e,n){this.mode!=="play"&&(this.exclude.includes(t)?this.exclude=this.exclude.filter(s=>s!==t):this.exclude.push(t),this.layout=new ee({width:parseInt(this.width),height:parseInt(this.height),exclude:this.exclude,unlockCategory:0,id:0}))},exportLayout(){console.log(JSON.stringify({width:parseInt(this.width),height:parseInt(this.height),exclude:this.exclude},null,2))}}},DP=Object.assign(NP,{__name:"LayoutEditorView",setup(t){return(e,n)=>(v(),C("main",null,[E(Ri,{text:"back",to:"/home",class:"top right"}),E(X,{text:e.mode,onClick:n[0]||(n[0]=s=>e.mode=e.mode==="edit"?"play":"edit"),class:"top left"},null,8,["text"]),y("div",LP,[E(X,{text:"export",onClick:e.exportLayout},null,8,["onClick"]),xs(y("input",{type:"range",min:"1",max:"13",step:"1","onUpdate:modelValue":n[1]||(n[1]=s=>e.width=s)},null,512),[[El,e.width]]),xs(y("input",{type:"range",min:"1",max:"13",step:"1","onUpdate:modelValue":n[2]||(n[2]=s=>e.height=s)},null,512),[[El,e.height]])]),E(en,{disabled:e.enableClickOnHiddenTiles,enableClickOnHiddenTiles:e.enableClickOnHiddenTiles,onTileClick:e.handleClick,class:"center middle",modelValue:e.layout,"onUpdate:modelValue":n[3]||(n[3]=s=>e.layout=s)},null,8,["disabled","enableClickOnHiddenTiles","onTileClick","modelValue"])]))}}),$P=he(DP,[["__scopeId","data-v-0784ec8f"]]);const FP={class:"category"},UP={class:"progress"},VP={key:0,class:"position"},BP={name:"BottomBar",props:{views:{type:Array,required:!0}},emits:["swipe"],computed:{index(){return Y().menuViewIndex},score(){return Y().score},nextScore(){return Y().nextScore},currentCategory(){return Y().currentCategory},showDots(){return this.views.length>1}},components:{Progress:os}},zP=Object.assign(BP,{setup(t){return(e,n)=>(v(),C("main",null,[y("div",FP,re(e.currentCategory+1),1),y("div",UP,[E(os,{value:e.score,max:e.nextScore,barColor:"#e58f65",text:Math.floor(e.score)+(e.nextScore===0?"":" / "+e.nextScore)},null,8,["value","max","text"])]),e.showDots?(v(),C("div",VP,[(v(!0),C(_e,null,Qe(t.views,(s,i)=>(v(),C("div",Cc({class:["dot",{selected:i===e.index}],key:i},{[qi(me(xa).TOUCHSTART)]:r=>e.$emit("swipe",{page:i})}),null,16))),128))])):je("",!0)]))}}),HP=he(zP,[["__scopeId","data-v-9c24dcbe"]]);const WP={computed:{list(){const{stats:t}=Y();return Object.keys(qo).map(e=>{const n=qo[e];return`${n.name}: ${n.display(t[e])}`})}},methods:{async erase(){await ok(`users/${Wc.value.uid}/game-data/tileswap-naenae/`),window.location.reload()}}},jP=Object.assign(WP,{__name:"Stats",setup(t){return(e,n)=>(v(),C(_e,null,[y("ul",null,[(v(!0),C(_e,null,Qe(e.list,(s,i)=>(v(),C("li",{key:i},re(s),1))),128))]),me(ya)?(v(),Pe(X,{key:0,onPressed:e.erase,text:"Reset stats",black:""},null,8,["onPressed"])):je("",!0)],64))}}),qP=he(jP,[["__scopeId","data-v-c9217ebf"]]);const GP={class:"list"},KP=["title"],YP={class:"options"},QP=["data-text","onClick","title"],XP=["src"],JP={key:1},ZP={components:{SpikeTile:Bm,Round:zm,Squircle:Hm,Square:Wm},methods:{changeSetting(t,e){if(e>$t[t].unlocked)return;const n=Y();n.settings[t]=e},formatRgb(t){return`rgb(${t.r},${t.g},${t.b})`},formatBR(t,e){let n="";for(let s=0;s<t.length;s++)n+=`${t[s]*e}px `;return n}},computed:{settingsList(){const{settings:t}=Y();return Object.fromEntries(Object.entries($t).map(([n,s])=>[n,{...s,selected:t[n]}]))}}},e3=Object.assign(ZP,{__name:"Settings",setup(t){return(e,n)=>(v(),C("div",GP,[(v(!0),C(_e,null,Qe(e.settingsList,(s,i)=>(v(),C("div",{class:"element",key:i,title:i},[y("p",null,re(s.name),1),y("div",YP,[(v(!0),C(_e,null,Qe(s.options,(r,o)=>(v(),C("div",{style:Ht(`--selected: ${o===s.selected?"2px":"0px"};
          ${s.css?s.css(o):""}`),"data-text":s.text?s.text(o):"",class:ht(i),key:r+" "+o,onClick:a=>e.changeSetting(i,o),title:JSON.stringify(r)},[o>s.unlocked?(v(),C("img",{key:0,src:me(Hr)},null,8,XP)):i==="tilesSVG"?(v(),C("div",JP,[(v(),Pe(ra(r),{title:r,color:"#666"},null,8,["title"]))])):je("",!0)],14,QP))),128))])],8,KP))),128))]))}}),t3=he(e3,[["__scopeId","data-v-0baac1e5"]]),n3="/tileswap-naenae/images/svg/stats.svg",s3="/tileswap-naenae/images/svg/settings.svg",i3="/tileswap-naenae/images/svg/tasks.svg";const r3={class:"container"},o3=["onClick"],a3={methods:{claimTask(t){t.completed&&t.claim()}},computed:{tasks(){const{currentTasks:t}=Y();return t.filter(e=>e!==-1).map(e=>ft.TASKS[e])}}},l3=Object.assign(a3,{__name:"TaskContainer",setup(t){return(e,n)=>(v(),C("div",r3,[E(b_,{name:"slide"},{default:Me(()=>[(v(!0),C(_e,null,Qe(e.tasks,s=>(v(),C("div",{onClick:i=>e.claimTask(s),class:ht(["task",{"completed-task":s.completed}]),key:s.id},[y("p",null,re(s.text),1),E(os,{barColor:s.completed?"var(--hl-color)":null,value:s.progress.value,text:s.progress.text,max:"1"},null,8,["barColor","value","text"])],10,o3))),128))]),_:1})]))}}),c3=he(l3,[["__scopeId","data-v-5eda3618"]]);const Pu=t=>(Ft("data-v-f84a65aa"),t=t(),Ut(),t),u3={class:"center middle"},d3={class:"text-center"},h3=Pu(()=>y("h1",null,"Stats",-1)),f3=Pu(()=>y("h1",null,"Settings",-1)),p3=Pu(()=>y("h1",null,"Tasks",-1)),m3={data(){const{width:t}=Wr();return{windowWidth:t,showStats:!1,showSettings:!1,showTasks:!1}},methods:{signOut:$l,signInForm(){GC(prompt("Email"),prompt("Password"))},unlock(){Y().unlockAll()}}},g3=Object.assign(m3,{__name:"AdditionalSelection",setup(t){return(e,n)=>(v(),C("div",null,[y("main",u3,[y("div",d3,[me(ya)?(v(),C("p",{key:0,onClick:n[0]||(n[0]=(...s)=>me($l)&&me($l)(...s))}," You are logged in as "+re(me(Wc).displayName),1)):(v(),C("p",{key:1,onClick:n[1]||(n[1]=(...s)=>e.signInForm&&e.signInForm(...s))},"You are not logged in"))]),E(Ks,{icon:me(i3),onPressed:n[2]||(n[2]=s=>e.showTasks=!0)},null,8,["icon"]),E(Ks,{icon:me(n3),onPressed:n[3]||(n[3]=s=>e.showStats=!0)},null,8,["icon"]),E(Ks,{icon:me(s3),onPressed:n[4]||(n[4]=s=>e.showSettings=!0)},null,8,["icon"]),E(Ks,{icon:me(Ym),onPressed:n[5]||(n[5]=s=>e.$router.push("/tutorial"))},null,8,["icon"]),y("p",{class:"text-center",onClick:n[6]||(n[6]=(...s)=>e.unlock&&e.unlock(...s))},"unlock all")]),E(Tt,{modelValue:e.showStats,"onUpdate:modelValue":n[8]||(n[8]=s=>e.showStats=s)},{default:Me(()=>[h3,E(qP),E(X,{black:"",text:"close",onPressed:n[7]||(n[7]=s=>e.showStats=!1)})]),_:1},8,["modelValue"]),E(Tt,{modelValue:e.showSettings,"onUpdate:modelValue":n[10]||(n[10]=s=>e.showSettings=s)},{default:Me(()=>[f3,E(t3),E(X,{black:"",text:"close",onPressed:n[9]||(n[9]=s=>e.showSettings=!1)})]),_:1},8,["modelValue"]),E(Tt,{modelValue:e.showTasks,"onUpdate:modelValue":n[12]||(n[12]=s=>e.showTasks=s)},{default:Me(()=>[p3,E(c3),E(X,{black:"",text:"close",onPressed:n[11]||(n[11]=s=>e.showTasks=!1)})]),_:1},8,["modelValue"])]))}}),_3=he(g3,[["__scopeId","data-v-f84a65aa"]]);const y3={class:"main-container"},v3=["data-key"],w3={components:{FreeplaySelection:Fm,PuzzleSelection:Um,ChallengeSelection:Vm,AdditionalSelection:_3},computed:{views(){return Y().score>=50?["FreeplaySelection","PuzzleSelection","ChallengeSelection","AdditionalSelection"]:["FreeplaySelection"]}},mounted(){const{menuViewIndex:t,savedMenuScroll:e}=Y(),n=this.$el.querySelector(`main.carousell > div:nth-child(${t+1})`);n.scrollIntoView(),n.firstChild.scrollTop=e},methods:{handleScroll(){const t=window.scrollX,e=t+window.innerWidth;for(const n of this.$refs.viewsComponents){const s=n.getBoundingClientRect(),i=s.left,r=i+s.width;if(i>=t-window.innerWidth/2&&r<=e+window.innerWidth/2){Y().menuViewIndex=parseInt(n.getAttribute("data-key"));break}}},handleVerticalScroll(t){const e=Y();e.savedMenuScroll=t.target.scrollTop},handleSwipe(t){const{menuViewIndex:e}=Y(),n=Math.min(Math.max(t.delta?e+t.delta:t.page,0),this.views.length-1);this.$el.querySelector(`main.carousell > div:nth-child(${n+1})`).scrollIntoView({behavior:"smooth"})}}},C3=Object.assign(w3,{__name:"SwipeView",setup(t){return(e,n)=>(v(),C("div",y3,[y("main",{class:"carousell",onScroll:n[0]||(n[0]=(...s)=>e.handleScroll&&e.handleScroll(...s))},[(v(!0),C(_e,null,Qe(e.views,(s,i)=>(v(),C("div",{key:i,"data-key":i,ref_for:!0,ref:"viewsComponents"},[(v(),Pe(ra(s),{onScroll:e.handleVerticalScroll},null,40,["onScroll"]))],8,v3))),128))],32),E(HP,{onSwipe:e.handleSwipe,views:e.views},null,8,["onSwipe","views"])]))}}),b3=he(C3,[["__scopeId","data-v-6f48426d"]]),E3=Vy({history:sy("/tileswap-naenae/"),routes:[{path:"/",name:"intro",component:Yh},{path:"/home",name:"home",component:b3},{path:"/tutorial",name:"tutorial",component:oP},{path:"/tutorialFreeplayGame",name:"tutorialFreeplayGame",component:Yh},{path:"/freeplaySelection",name:"freeplaySelection",component:Fm},{path:"/puzzleSelection",name:"puzzleSelection",component:Um},{path:"/challengeSelection",name:"challengeSelection",component:Vm},{path:"/freeplayGame",name:"freeplayGame",component:JS},{path:"/puzzleGame",name:"puzzleGame",component:cx},{path:"/challengeGame",name:"challengeGame",component:_x},{path:"/test",name:"test",component:SP},{path:"/editor",name:"editor",component:OP},{path:"/layout-editor",name:"layout-editor",component:$P}]}),Ru=A_(Ek),Xm=N_();Ar(Xm);Ru.use(E3);Ru.use(Xm);Ru.mount("#app");
